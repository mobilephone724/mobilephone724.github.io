<!DOCTYPE html>
<html lang="en"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
   <meta name="description" content="In PostgreSQL, the adding and dropping a column is an instant ddl(This name seems only to be used in mysql, but I like it). In this article, I try to explain the implement of that.
The reference:

https://www.postgresql.org/docs/current/sql-altertable.html


Basic Concepts
instant ddl
For a table with $n$ tuples, if a ddl post can be performed in time $O(1)$ ,we call this ddl instant. So to implement an instant ddl, the data organization must remain unchanged. Instead, only the schema information can be changed, along withthe method to used to interpret the table&rsquo;s binary data according to the schema.">  

  <title>
    
      Column Schema Change
    
  </title>


  <link rel="shortcut icon" type="image/x-icon" href="/" />
  
  
  
  <link rel="stylesheet" href="//localhost:1313/css/main.900100e9dbee2d56c58fac8bb717037cae7e26a9c36c29d2ff587bdd65f0cbbe510b41d81a3bb234919cdfdc7550d786b2fab70c8fc507772d732fe097106d12.css" integrity="sha512-kAEA6dvuLVbFj6yLtxcDfK5&#43;JqnDbCnS/1h73WXwy75RC0HYGjuyNJGc39x1UNeGsvq3DI/FB3ctcy/glxBtEg==" />
  
</head>
<body a="auto">
        <main class="page-content" aria-label="Content">
            <div class="w">
<a href="/">..</a>


<article>
    <p class="post-meta">
        <time datetime="2024-04-07 22:19:24 &#43;0800 CST">
            2024-04-07
        </time>
    </p>

    <h1>Column Schema Change</h1>

    

    <p>In PostgreSQL, the adding and dropping a column is an instant ddl(This name seems only to be used in mysql, but I like it). In this article, I try to explain the implement of that.</p>
<p><strong>The reference:</strong></p>
<ul>
<li><a href="https://www.postgresql.org/docs/current/sql-altertable.html">https://www.postgresql.org/docs/current/sql-altertable.html</a></li>
<li></li>
</ul>
<h2 id="basic-concepts">Basic Concepts</h2>
<h3 id="instant-ddl">instant ddl</h3>
<p>For a table with $n$ tuples, if a ddl post can be performed in time $O(1)$ ,we call this ddl instant. So to implement an instant ddl, the data organization must remain unchanged. Instead, only the schema information can be changed, along withthe method to used to interpret the table&rsquo;s binary data according to the schema.</p>
<p>In this scenario, pg only changes the <code>pg_attribute</code> catalog, which records the attributes[#todo is this OK] of each relations.</p>
<h3 id="heap-page-representation">heap page representation</h3>
<p>Before illustrate the situation where interpreting the binary data with two different schemas, we figure out the way to organize the heap pages.</p>
<p><img src="https://raw.githubusercontent.com/mobilephone724/blog_pictures/master/image-20240407223441847.2024_04_07_1712500481.png" alt="image-20240407223441847"></p>

</article>

                
    
    
        Thanks for <a href="https://github.com/hanwenguo/hugo-theme-nostyleplease">https://github.com/hanwenguo/hugo-theme-nostyleplease</a>
    


            </div>
        </main>
    </body>
</html>
