<!DOCTYPE html>
<head><meta charset="utf-8"></meta>
 <meta content="minimum-scale=1, initial-scale=1, width=device-width, shrink-to-fit=no" name="viewport"></meta>
 <link type="text/css" href="static/css/tabler-icons.min.css" rel="stylesheet"></link>
 <link type="text/css" href="static/css/style.css" rel="stylesheet"></link>
 <link type="text/css" href="static/css/custom.css" rel="stylesheet"></link>
 <link type="text/css" href="static/css/export.css" rel="stylesheet"></link>
 <link href="static/img/logo.png" type="image/png" rel="shortcut icon"></link>
 <link href="static/img/logo.png" sizes="192x192" rel="shortcut icon"></link>
 <link href="static/img/logo.png" rel="apple-touch-icon"></link>
 <meta name="apple-mobile-web-app-title"></meta>
 <meta name="apple-mobile-web-app-capable" content="yes"></meta>
 <meta name="apple-touch-fullscreen" content="yes"></meta>
 <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"></meta>
 <meta name="mobile-web-app-capable" content="yes"></meta>
 <meta property="og:title"></meta>
 <meta content="site" property="og:type"></meta>
  <meta content="static/img/logo.png" property="og:image"></meta>
 <meta property="og:description"></meta>
 <title></title>
 <meta property="og:site_name"></meta>
 <meta></meta>
</head>
 <body><div id="root"></div>
 <script>window.logseq_db="[logseq____&quot;~#datascript/DBlogseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;~:schemalogseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;~:ast/versionlogseq____&quot;,[logseq____&quot;^ logseq____&quot;],logseq____&quot;~:file/contentlogseq____&quot;,[logseq____&quot;^ logseq____&quot;],logseq____&quot;~:block/properties-text-valueslogseq____&quot;,[logseq____&quot;^ logseq____&quot;],logseq____&quot;~:block/aliaslogseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;~:db/valueTypelogseq____&quot;,logseq____&quot;~:db.type/reflogseq____&quot;,logseq____&quot;~:db/cardinalitylogseq____&quot;,logseq____&quot;~:db.cardinality/manylogseq____&quot;],logseq____&quot;~:block/pre-block?logseq____&quot;,[logseq____&quot;^ logseq____&quot;],logseq____&quot;~:block/uuidlogseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;~:db/uniquelogseq____&quot;,logseq____&quot;~:db.unique/identitylogseq____&quot;],logseq____&quot;~:block/prioritylogseq____&quot;,[logseq____&quot;^ logseq____&quot;],logseq____&quot;~:block/propertieslogseq____&quot;,[logseq____&quot;^ logseq____&quot;],logseq____&quot;~:block/journal?logseq____&quot;,[logseq____&quot;^ logseq____&quot;],logseq____&quot;~:block/namespacelogseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^6logseq____&quot;,logseq____&quot;^7logseq____&quot;],logseq____&quot;~:block/updated-atlogseq____&quot;,[logseq____&quot;^ logseq____&quot;],logseq____&quot;~:block/repeated?logseq____&quot;,[logseq____&quot;^ logseq____&quot;],logseq____&quot;~:db/typelogseq____&quot;,[logseq____&quot;^ logseq____&quot;],logseq____&quot;~:file/handlelogseq____&quot;,[logseq____&quot;^ logseq____&quot;],logseq____&quot;~:block/leftlogseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^6logseq____&quot;,logseq____&quot;^7logseq____&quot;,logseq____&quot;~:db/indexlogseq____&quot;,true],logseq____&quot;~:block/refslogseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^6logseq____&quot;,logseq____&quot;^7logseq____&quot;,logseq____&quot;^8logseq____&quot;,logseq____&quot;^9logseq____&quot;],logseq____&quot;~:block/scheduledlogseq____&quot;,[logseq____&quot;^ logseq____&quot;],logseq____&quot;~:block/properties-orderlogseq____&quot;,[logseq____&quot;^ logseq____&quot;],logseq____&quot;~:block/created-atlogseq____&quot;,[logseq____&quot;^ logseq____&quot;],logseq____&quot;~:block/deadlinelogseq____&quot;,[logseq____&quot;^ logseq____&quot;],logseq____&quot;~:block/collapsed?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^Glogseq____&quot;,true],logseq____&quot;~:block/journal-daylogseq____&quot;,[logseq____&quot;^ logseq____&quot;],logseq____&quot;~:block/formatlogseq____&quot;,[logseq____&quot;^ logseq____&quot;],logseq____&quot;~:block/tagslogseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^6logseq____&quot;,logseq____&quot;^7logseq____&quot;,logseq____&quot;^8logseq____&quot;,logseq____&quot;^9logseq____&quot;],logseq____&quot;~:block/contentlogseq____&quot;,[logseq____&quot;^ logseq____&quot;],logseq____&quot;~:recent/pageslogseq____&quot;,[logseq____&quot;^ logseq____&quot;],logseq____&quot;~:block/macroslogseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^6logseq____&quot;,logseq____&quot;^7logseq____&quot;,logseq____&quot;^8logseq____&quot;,logseq____&quot;^9logseq____&quot;],logseq____&quot;~:db/identlogseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^logseq____&lt;logseq____&quot;,logseq____&quot;^=logseq____&quot;],logseq____&quot;~:block/path-refslogseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^6logseq____&quot;,logseq____&quot;^7logseq____&quot;,logseq____&quot;^8logseq____&quot;,logseq____&quot;^9logseq____&quot;],logseq____&quot;~:block/parentlogseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^6logseq____&quot;,logseq____&quot;^7logseq____&quot;,logseq____&quot;^Glogseq____&quot;,true],logseq____&quot;~:block/typelogseq____&quot;,[logseq____&quot;^ logseq____&quot;],logseq____&quot;~:block/pagelogseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^6logseq____&quot;,logseq____&quot;^7logseq____&quot;,logseq____&quot;^Glogseq____&quot;,true],logseq____&quot;~:block/namelogseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^logseq____&lt;logseq____&quot;,logseq____&quot;^=logseq____&quot;],logseq____&quot;~:file/pathlogseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^logseq____&lt;logseq____&quot;,logseq____&quot;^=logseq____&quot;],logseq____&quot;~:block/filelogseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^6logseq____&quot;,logseq____&quot;^7logseq____&quot;],logseq____&quot;~:block/markerlogseq____&quot;,[logseq____&quot;^ logseq____&quot;],logseq____&quot;~:block/original-namelogseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^logseq____&lt;logseq____&quot;,logseq____&quot;^=logseq____&quot;],logseq____&quot;~:schema/versionlogseq____&quot;,[logseq____&quot;^ logseq____&quot;]],logseq____&quot;~:datomslogseq____&quot;,[logseq____&quot;~#listlogseq____&quot;,[[logseq____&quot;~#datascript/Datomlogseq____&quot;,[1,logseq____&quot;^12logseq____&quot;,2,536870913]],[logseq____&quot;^15logseq____&quot;,[2,logseq____&quot;^@logseq____&quot;,false,536870914]],[logseq____&quot;^15logseq____&quot;,[2,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;cardlogseq____&quot;,536870913]],[logseq____&quot;^15logseq____&quot;,[2,logseq____&quot;^11logseq____&quot;,logseq____&quot;cardlogseq____&quot;,536870913]],[logseq____&quot;^15logseq____&quot;,[2,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u9fae7680-7b43-48a2-862c-80b607b4b5f8logseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[3,logseq____&quot;^@logseq____&quot;,false,536870914]],[logseq____&quot;^15logseq____&quot;,[3,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;canceledlogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[3,logseq____&quot;^11logseq____&quot;,logseq____&quot;CANCELEDlogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[3,logseq____&quot;^;logseq____&quot;,logseq____&quot;~ud7182744-84aa-4a48-bc71-e15f474b0373logseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[4,logseq____&quot;^@logseq____&quot;,false,536870914]],[logseq____&quot;^15logseq____&quot;,[4,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;todologseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[4,logseq____&quot;^11logseq____&quot;,logseq____&quot;TODOlogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[4,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-b97f-4359-bbff-c158f1f4a8a1logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[5,logseq____&quot;^@logseq____&quot;,false,536870914]],[logseq____&quot;^15logseq____&quot;,[5,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;nowlogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[5,logseq____&quot;^11logseq____&quot;,logseq____&quot;NOWlogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[5,logseq____&quot;^;logseq____&quot;,logseq____&quot;~uf0f9b722-42a8-45df-a499-2aa59eed9b34logseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[6,logseq____&quot;^@logseq____&quot;,false,536870914]],[logseq____&quot;^15logseq____&quot;,[6,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;laterlogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[6,logseq____&quot;^11logseq____&quot;,logseq____&quot;LATERlogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[6,logseq____&quot;^;logseq____&quot;,logseq____&quot;~udddf26fe-daaa-4150-9a3d-5ad921faab3clogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[7,logseq____&quot;^@logseq____&quot;,false,536870914]],[logseq____&quot;^15logseq____&quot;,[7,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;donelogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[7,logseq____&quot;^11logseq____&quot;,logseq____&quot;DONElogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[7,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u983b2a48-0185-46a0-85b1-b8b71cfb1c5elogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[8,logseq____&quot;^@logseq____&quot;,false,536870914]],[logseq____&quot;^15logseq____&quot;,[8,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;doinglogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[8,logseq____&quot;^11logseq____&quot;,logseq____&quot;DOINGlogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[8,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u8dc9d43f-3721-4019-8148-45f067911d78logseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[9,logseq____&quot;^@logseq____&quot;,false,536870914]],[logseq____&quot;^15logseq____&quot;,[9,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;in-progresslogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[9,logseq____&quot;^11logseq____&quot;,logseq____&quot;IN-PROGRESSlogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[9,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u7c4774c2-9bbc-4187-bf6f-871c87da8cdflogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[10,logseq____&quot;^@logseq____&quot;,false,536870914]],[logseq____&quot;^15logseq____&quot;,[10,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;clogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[10,logseq____&quot;^11logseq____&quot;,logseq____&quot;Clogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[10,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u60203418-8e21-4592-b11b-011118f7ac43logseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[11,logseq____&quot;^@logseq____&quot;,false,536870914]],[logseq____&quot;^15logseq____&quot;,[11,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;blogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[11,logseq____&quot;^11logseq____&quot;,logseq____&quot;Blogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[11,logseq____&quot;^;logseq____&quot;,logseq____&quot;~uc119b5ac-4320-4a0f-8c95-21b81837c5d7logseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[12,logseq____&quot;^@logseq____&quot;,false,536870914]],[logseq____&quot;^15logseq____&quot;,[12,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;contentslogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[12,logseq____&quot;^11logseq____&quot;,logseq____&quot;contentslogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[12,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a6-cf5e-4292-8846-07dece3c4b62logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[13,logseq____&quot;^@logseq____&quot;,false,536870914]],[logseq____&quot;^15logseq____&quot;,[13,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;waitinglogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[13,logseq____&quot;^11logseq____&quot;,logseq____&quot;WAITINGlogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[13,logseq____&quot;^;logseq____&quot;,logseq____&quot;~uc6199386-116c-40da-b1a9-a3fd716d5c2clogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[14,logseq____&quot;^@logseq____&quot;,false,536870914]],[logseq____&quot;^15logseq____&quot;,[14,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;favoriteslogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[14,logseq____&quot;^11logseq____&quot;,logseq____&quot;Favoriteslogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[14,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65591248-5b5d-45b2-b7a6-6b2054fc763dlogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[15,logseq____&quot;^@logseq____&quot;,false,536870914]],[logseq____&quot;^15logseq____&quot;,[15,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;alogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[15,logseq____&quot;^11logseq____&quot;,logseq____&quot;Alogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[15,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u2a216fdc-d382-4d0b-921e-be11205ff2f5logseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[16,logseq____&quot;^@logseq____&quot;,false,536870914]],[logseq____&quot;^15logseq____&quot;,[16,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;cancelledlogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[16,logseq____&quot;^11logseq____&quot;,logseq____&quot;CANCELLEDlogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[16,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u1215df92-60fa-49fe-a25b-8629ea210beclogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[17,logseq____&quot;^@logseq____&quot;,false,536870914]],[logseq____&quot;^15logseq____&quot;,[17,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;waitlogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[17,logseq____&quot;^11logseq____&quot;,logseq____&quot;WAITlogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[17,logseq____&quot;^;logseq____&quot;,logseq____&quot;~ud6f61252-5e91-4203-bb81-d71ce5e68584logseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[21,logseq____&quot;^Klogseq____&quot;,1703413926670,536870917]],[logseq____&quot;^15logseq____&quot;,[21,logseq____&quot;^@logseq____&quot;,false,536870917]],[logseq____&quot;^15logseq____&quot;,[21,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;wal-structurelogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[21,logseq____&quot;^11logseq____&quot;,logseq____&quot;wal-structurelogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[21,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;~:taglogseq____&quot;,logseq____&quot;WALlogseq____&quot;],536870928]],[logseq____&quot;^15logseq____&quot;,[21,logseq____&quot;^4logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^16logseq____&quot;,logseq____&quot;WALlogseq____&quot;],536870928]],[logseq____&quot;^15logseq____&quot;,[21,logseq____&quot;^Blogseq____&quot;,1703413926670,536870917]],[logseq____&quot;^15logseq____&quot;,[21,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-6fdb-429b-994b-e70e7d2314a0logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[22,logseq____&quot;^Klogseq____&quot;,1703413926667,536870917]],[logseq____&quot;^15logseq____&quot;,[22,logseq____&quot;^@logseq____&quot;,false,536870917]],[logseq____&quot;^15logseq____&quot;,[22,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;multixactlogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[22,logseq____&quot;^11logseq____&quot;,logseq____&quot;multixactlogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[22,logseq____&quot;^Blogseq____&quot;,1703413926667,536870917]],[logseq____&quot;^15logseq____&quot;,[22,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a6-d06c-46df-935f-ac5e7bb94b89logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[23,logseq____&quot;^Klogseq____&quot;,1703413926663,536870917]],[logseq____&quot;^15logseq____&quot;,[23,logseq____&quot;^@logseq____&quot;,false,536870917]],[logseq____&quot;^15logseq____&quot;,[23,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;slru_implementlogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[23,logseq____&quot;^11logseq____&quot;,logseq____&quot;SLRU_IMPLEMENTlogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[23,logseq____&quot;^Blogseq____&quot;,1703413926663,536870917]],[logseq____&quot;^15logseq____&quot;,[23,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-df38-47f7-9133-1a6cb7126a70logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[24,logseq____&quot;^Klogseq____&quot;,1703413926667,536870917]],[logseq____&quot;^15logseq____&quot;,[24,logseq____&quot;^@logseq____&quot;,false,536870917]],[logseq____&quot;^15logseq____&quot;,[24,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;wallogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[24,logseq____&quot;^11logseq____&quot;,logseq____&quot;wallogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[24,logseq____&quot;^Blogseq____&quot;,1703413926667,536870917]],[logseq____&quot;^15logseq____&quot;,[24,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-b3e5-41c5-bd8c-dcc982e7bff7logseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[25,logseq____&quot;^Klogseq____&quot;,1703413926669,536870917]],[logseq____&quot;^15logseq____&quot;,[25,logseq____&quot;^@logseq____&quot;,false,536870917]],[logseq____&quot;^15logseq____&quot;,[25,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;wal-insertlogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[25,logseq____&quot;^11logseq____&quot;,logseq____&quot;wal-insertlogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[25,logseq____&quot;^Blogseq____&quot;,1703413926669,536870917]],[logseq____&quot;^15logseq____&quot;,[25,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-1864-47d1-a7bd-fd1d66a07276logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[26,logseq____&quot;^Klogseq____&quot;,1703413926668,536870917]],[logseq____&quot;^15logseq____&quot;,[26,logseq____&quot;^@logseq____&quot;,false,536870917]],[logseq____&quot;^15logseq____&quot;,[26,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;wal-basiclogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[26,logseq____&quot;^11logseq____&quot;,logseq____&quot;wal-basiclogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[26,logseq____&quot;^Blogseq____&quot;,1703413926668,536870917]],[logseq____&quot;^15logseq____&quot;,[26,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-f3d1-4973-8f61-c03a2f539c87logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[27,logseq____&quot;^Klogseq____&quot;,1703413926664,536870917]],[logseq____&quot;^15logseq____&quot;,[27,logseq____&quot;^@logseq____&quot;,false,536870917]],[logseq____&quot;^15logseq____&quot;,[27,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;slrulogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[27,logseq____&quot;^11logseq____&quot;,logseq____&quot;slrulogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[27,logseq____&quot;^Blogseq____&quot;,1703413926664,536870917]],[logseq____&quot;^15logseq____&quot;,[27,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-ba1b-4f77-8a63-83a9b2490b79logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[28,logseq____&quot;^Klogseq____&quot;,1703413926666,536870917]],[logseq____&quot;^15logseq____&quot;,[28,logseq____&quot;^@logseq____&quot;,false,536870917]],[logseq____&quot;^15logseq____&quot;,[28,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;subtransactionlogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[28,logseq____&quot;^11logseq____&quot;,logseq____&quot;subtransactionlogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[28,logseq____&quot;^Blogseq____&quot;,1703413926666,536870917]],[logseq____&quot;^15logseq____&quot;,[28,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-b028-4b23-b2de-82312bb92208logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[29,logseq____&quot;^Klogseq____&quot;,1703413926665,536870917]],[logseq____&quot;^15logseq____&quot;,[29,logseq____&quot;^@logseq____&quot;,false,536870917]],[logseq____&quot;^15logseq____&quot;,[29,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;cloglogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[29,logseq____&quot;^11logseq____&quot;,logseq____&quot;cloglogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[29,logseq____&quot;^Blogseq____&quot;,1703413926665,536870917]],[logseq____&quot;^15logseq____&quot;,[29,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-b457-42ed-98c3-442b1df0e754logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[30,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;🧬 transactionslogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[30,logseq____&quot;^Ologseq____&quot;,logseq____&quot;~:markdownlogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[30,logseq____&quot;^Flogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[30,logseq____&quot;^Xlogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[30,logseq____&quot;^Vlogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[30,logseq____&quot;^Ulogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[30,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a6-bcfb-4909-ae77-d9429b63fb51logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[31,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[31,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[31,logseq____&quot;^Flogseq____&quot;,30,536870917]],[logseq____&quot;^15logseq____&quot;,[31,logseq____&quot;^Xlogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[31,logseq____&quot;^Vlogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[31,logseq____&quot;^Ulogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[31,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a6-b270-415e-a01a-3d16d707fb5flogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[32,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[32,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[32,logseq____&quot;^Flogseq____&quot;,40,536870917]],[logseq____&quot;^15logseq____&quot;,[32,logseq____&quot;^Xlogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[32,logseq____&quot;^Vlogseq____&quot;,36,536870917]],[logseq____&quot;^15logseq____&quot;,[32,logseq____&quot;^Ulogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[32,logseq____&quot;^Ulogseq____&quot;,24,536870917]],[logseq____&quot;^15logseq____&quot;,[32,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a6-8b4e-4fe4-829a-135b4295a9e2logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[33,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;[[clog]]logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[33,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[33,logseq____&quot;^Flogseq____&quot;,41,536870917]],[logseq____&quot;^15logseq____&quot;,[33,logseq____&quot;^Xlogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[33,logseq____&quot;^Vlogseq____&quot;,38,536870917]],[logseq____&quot;^15logseq____&quot;,[33,logseq____&quot;^Ulogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[33,logseq____&quot;^Ulogseq____&quot;,23,536870917]],[logseq____&quot;^15logseq____&quot;,[33,logseq____&quot;^Ulogseq____&quot;,29,536870917]],[logseq____&quot;^15logseq____&quot;,[33,logseq____&quot;^Hlogseq____&quot;,29,536870917]],[logseq____&quot;^15logseq____&quot;,[33,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a6-11ab-4ec5-a3be-065879c30066logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[34,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;[[subtransaction]]logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[34,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[34,logseq____&quot;^Flogseq____&quot;,33,536870917]],[logseq____&quot;^15logseq____&quot;,[34,logseq____&quot;^Xlogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[34,logseq____&quot;^Vlogseq____&quot;,38,536870917]],[logseq____&quot;^15logseq____&quot;,[34,logseq____&quot;^Ulogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[34,logseq____&quot;^Ulogseq____&quot;,23,536870917]],[logseq____&quot;^15logseq____&quot;,[34,logseq____&quot;^Ulogseq____&quot;,28,536870917]],[logseq____&quot;^15logseq____&quot;,[34,logseq____&quot;^Hlogseq____&quot;,28,536870917]],[logseq____&quot;^15logseq____&quot;,[34,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a6-f1ce-45ea-a73e-ca5915dc588dlogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[35,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;[[multixact]]logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[35,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[35,logseq____&quot;^Flogseq____&quot;,34,536870917]],[logseq____&quot;^15logseq____&quot;,[35,logseq____&quot;^Xlogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[35,logseq____&quot;^Vlogseq____&quot;,38,536870917]],[logseq____&quot;^15logseq____&quot;,[35,logseq____&quot;^Ulogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[35,logseq____&quot;^Ulogseq____&quot;,22,536870917]],[logseq____&quot;^15logseq____&quot;,[35,logseq____&quot;^Ulogseq____&quot;,23,536870917]],[logseq____&quot;^15logseq____&quot;,[35,logseq____&quot;^Hlogseq____&quot;,22,536870917]],[logseq____&quot;^15logseq____&quot;,[35,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a6-5751-4313-9336-b8e8333b13adlogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[36,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;⏳️ [[wal]]logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[36,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[36,logseq____&quot;^Flogseq____&quot;,38,536870917]],[logseq____&quot;^15logseq____&quot;,[36,logseq____&quot;^Xlogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[36,logseq____&quot;^Vlogseq____&quot;,30,536870917]],[logseq____&quot;^15logseq____&quot;,[36,logseq____&quot;^Ulogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[36,logseq____&quot;^Ulogseq____&quot;,24,536870917]],[logseq____&quot;^15logseq____&quot;,[36,logseq____&quot;^Hlogseq____&quot;,24,536870917]],[logseq____&quot;^15logseq____&quot;,[36,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a6-1e0a-4309-ba41-c6997ac628e0logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[37,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;[[wal-basic]]logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[37,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[37,logseq____&quot;^Flogseq____&quot;,36,536870917]],[logseq____&quot;^15logseq____&quot;,[37,logseq____&quot;^Xlogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[37,logseq____&quot;^Vlogseq____&quot;,36,536870917]],[logseq____&quot;^15logseq____&quot;,[37,logseq____&quot;^Ulogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[37,logseq____&quot;^Ulogseq____&quot;,24,536870917]],[logseq____&quot;^15logseq____&quot;,[37,logseq____&quot;^Ulogseq____&quot;,26,536870917]],[logseq____&quot;^15logseq____&quot;,[37,logseq____&quot;^Hlogseq____&quot;,26,536870917]],[logseq____&quot;^15logseq____&quot;,[37,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a6-4d6a-4fa5-88b9-4e7997f31818logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[38,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;🔗 [[SLRU_IMPLEMENT]]logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[38,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[38,logseq____&quot;^Flogseq____&quot;,30,536870917]],[logseq____&quot;^15logseq____&quot;,[38,logseq____&quot;^Xlogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[38,logseq____&quot;^Vlogseq____&quot;,30,536870917]],[logseq____&quot;^15logseq____&quot;,[38,logseq____&quot;^Ulogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[38,logseq____&quot;^Ulogseq____&quot;,23,536870917]],[logseq____&quot;^15logseq____&quot;,[38,logseq____&quot;^Hlogseq____&quot;,23,536870917]],[logseq____&quot;^15logseq____&quot;,[38,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a6-51b5-4323-884d-517a428454f0logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[39,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;[[wal-insert]]logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[39,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[39,logseq____&quot;^Flogseq____&quot;,37,536870917]],[logseq____&quot;^15logseq____&quot;,[39,logseq____&quot;^Xlogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[39,logseq____&quot;^Vlogseq____&quot;,36,536870917]],[logseq____&quot;^15logseq____&quot;,[39,logseq____&quot;^Ulogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[39,logseq____&quot;^Ulogseq____&quot;,24,536870917]],[logseq____&quot;^15logseq____&quot;,[39,logseq____&quot;^Ulogseq____&quot;,25,536870917]],[logseq____&quot;^15logseq____&quot;,[39,logseq____&quot;^Hlogseq____&quot;,25,536870917]],[logseq____&quot;^15logseq____&quot;,[39,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a6-5fe8-4871-a9d5-e50049075cb7logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[40,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;[[wal-structure]]logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[40,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[40,logseq____&quot;^Flogseq____&quot;,39,536870917]],[logseq____&quot;^15logseq____&quot;,[40,logseq____&quot;^Xlogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[40,logseq____&quot;^Vlogseq____&quot;,36,536870917]],[logseq____&quot;^15logseq____&quot;,[40,logseq____&quot;^Ulogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[40,logseq____&quot;^Ulogseq____&quot;,21,536870917]],[logseq____&quot;^15logseq____&quot;,[40,logseq____&quot;^Ulogseq____&quot;,24,536870917]],[logseq____&quot;^15logseq____&quot;,[40,logseq____&quot;^Hlogseq____&quot;,21,536870917]],[logseq____&quot;^15logseq____&quot;,[40,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a6-1163-4243-b06f-7330c6bc1fdelogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[41,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;[[slru]]logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[41,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[41,logseq____&quot;^Flogseq____&quot;,38,536870917]],[logseq____&quot;^15logseq____&quot;,[41,logseq____&quot;^Xlogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[41,logseq____&quot;^Vlogseq____&quot;,38,536870917]],[logseq____&quot;^15logseq____&quot;,[41,logseq____&quot;^Ulogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[41,logseq____&quot;^Ulogseq____&quot;,23,536870917]],[logseq____&quot;^15logseq____&quot;,[41,logseq____&quot;^Ulogseq____&quot;,27,536870917]],[logseq____&quot;^15logseq____&quot;,[41,logseq____&quot;^Hlogseq____&quot;,27,536870917]],[logseq____&quot;^15logseq____&quot;,[41,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a6-0143-476b-9e8f-345abd791daelogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[43,logseq____&quot;^Klogseq____&quot;,1703413926712,536870918]],[logseq____&quot;^15logseq____&quot;,[43,logseq____&quot;^@logseq____&quot;,false,536870918]],[logseq____&quot;^15logseq____&quot;,[43,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;blocklogseq____&quot;,536870918]],[logseq____&quot;^15logseq____&quot;,[43,logseq____&quot;^11logseq____&quot;,logseq____&quot;blocklogseq____&quot;,536870918]],[logseq____&quot;^15logseq____&quot;,[43,logseq____&quot;^Blogseq____&quot;,1703413926712,536870918]],[logseq____&quot;^15logseq____&quot;,[43,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-a239-4f2a-985a-e65ca66710a3logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[44,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;Each data file (heap or index) is divided into `postgres` disk blocks, the blocks are numbered sequentially, 0 to 0xFFFFFFFE.logseq____&quot;,536870918]],[logseq____&quot;^15logseq____&quot;,[44,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870918]],[logseq____&quot;^15logseq____&quot;,[44,logseq____&quot;^Flogseq____&quot;,43,536870918]],[logseq____&quot;^15logseq____&quot;,[44,logseq____&quot;^Xlogseq____&quot;,43,536870918]],[logseq____&quot;^15logseq____&quot;,[44,logseq____&quot;^Vlogseq____&quot;,43,536870918]],[logseq____&quot;^15logseq____&quot;,[44,logseq____&quot;^Ulogseq____&quot;,43,536870918]],[logseq____&quot;^15logseq____&quot;,[44,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a6-d4b0-44e5-a364-a51142aae385logseq____&quot;,536870918]],[logseq____&quot;^15logseq____&quot;,[45,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~```C\\ntypedef uint32 BlockNumber;\\n#define InvalidBlockNumber\\t\\t((BlockNumber) 0xFFFFFFFF)\\n#define MaxBlockNumber\\t\\t\\t((BlockNumber) 0xFFFFFFFE)\\n```logseq____&quot;,536870918]],[logseq____&quot;^15logseq____&quot;,[45,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870918]],[logseq____&quot;^15logseq____&quot;,[45,logseq____&quot;^Flogseq____&quot;,44,536870918]],[logseq____&quot;^15logseq____&quot;,[45,logseq____&quot;^Xlogseq____&quot;,43,536870918]],[logseq____&quot;^15logseq____&quot;,[45,logseq____&quot;^Vlogseq____&quot;,43,536870918]],[logseq____&quot;^15logseq____&quot;,[45,logseq____&quot;^Ulogseq____&quot;,43,536870918]],[logseq____&quot;^15logseq____&quot;,[45,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a6-a012-4347-962f-208cb2561126logseq____&quot;,536870918]],[logseq____&quot;^15logseq____&quot;,[46,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;So one relation can have $32T$ storage sizelogseq____&quot;,536870918]],[logseq____&quot;^15logseq____&quot;,[46,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870918]],[logseq____&quot;^15logseq____&quot;,[46,logseq____&quot;^Flogseq____&quot;,45,536870918]],[logseq____&quot;^15logseq____&quot;,[46,logseq____&quot;^Xlogseq____&quot;,43,536870918]],[logseq____&quot;^15logseq____&quot;,[46,logseq____&quot;^Vlogseq____&quot;,43,536870918]],[logseq____&quot;^15logseq____&quot;,[46,logseq____&quot;^Ulogseq____&quot;,43,536870918]],[logseq____&quot;^15logseq____&quot;,[46,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a6-13d0-4960-b0b7-48e400c12f4clogseq____&quot;,536870918]],[logseq____&quot;^15logseq____&quot;,[47,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;$$4294967294( blocks) * 8(one block is 8K) / 1024 / 1024/ 1024 = 32T$$logseq____&quot;,536870918]],[logseq____&quot;^15logseq____&quot;,[47,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870918]],[logseq____&quot;^15logseq____&quot;,[47,logseq____&quot;^Flogseq____&quot;,46,536870918]],[logseq____&quot;^15logseq____&quot;,[47,logseq____&quot;^Xlogseq____&quot;,43,536870918]],[logseq____&quot;^15logseq____&quot;,[47,logseq____&quot;^Vlogseq____&quot;,46,536870918]],[logseq____&quot;^15logseq____&quot;,[47,logseq____&quot;^Ulogseq____&quot;,43,536870918]],[logseq____&quot;^15logseq____&quot;,[47,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a6-a2d3-46bd-9d61-22cbb84a135elogseq____&quot;,536870918]],[logseq____&quot;^15logseq____&quot;,[48,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;logseq____&quot;,536870918]],[logseq____&quot;^15logseq____&quot;,[48,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870918]],[logseq____&quot;^15logseq____&quot;,[48,logseq____&quot;^Flogseq____&quot;,46,536870918]],[logseq____&quot;^15logseq____&quot;,[48,logseq____&quot;^Xlogseq____&quot;,43,536870918]],[logseq____&quot;^15logseq____&quot;,[48,logseq____&quot;^Vlogseq____&quot;,43,536870918]],[logseq____&quot;^15logseq____&quot;,[48,logseq____&quot;^Ulogseq____&quot;,43,536870918]],[logseq____&quot;^15logseq____&quot;,[48,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a6-202e-4af1-b9cd-acbb726168d9logseq____&quot;,536870918]],[logseq____&quot;^15logseq____&quot;,[50,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;tag::WALlogseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[50,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[50,logseq____&quot;^Flogseq____&quot;,29,536870919]],[logseq____&quot;^15logseq____&quot;,[50,logseq____&quot;^Xlogseq____&quot;,29,536870919]],[logseq____&quot;^15logseq____&quot;,[50,logseq____&quot;^Vlogseq____&quot;,29,536870919]],[logseq____&quot;^15logseq____&quot;,[50,logseq____&quot;^Ulogseq____&quot;,29,536870919]],[logseq____&quot;^15logseq____&quot;,[50,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a6-ae7b-4786-95ad-6ceabeb86d3dlogseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[51,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;## Overview\\nThis chapter explains the content of `clog` #SLRU_IMPLEMENT\\n\\n`clog`(commit log), records the commit status of each transaction. The log exists both in memory mannaged by `slru` buffer and disk for durability. The commit status can be the four kinds below:\\n```C\\n#define TRANSACTION_STATUS_IN_PROGRESS\\t\\t0x00\\n#define TRANSACTION_STATUS_COMMITTED\\t\\t0x01\\n#define TRANSACTION_STATUS_ABORTED\\t\\t\\t0x02\\n#define TRANSACTION_STATUS_SUB_COMMITTED\\t0x03\\n```logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[51,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[51,logseq____&quot;^Flogseq____&quot;,50,536870919]],[logseq____&quot;^15logseq____&quot;,[51,logseq____&quot;^Xlogseq____&quot;,29,536870919]],[logseq____&quot;^15logseq____&quot;,[51,logseq____&quot;^Vlogseq____&quot;,29,536870919]],[logseq____&quot;^15logseq____&quot;,[51,logseq____&quot;^Ulogseq____&quot;,23,536870919]],[logseq____&quot;^15logseq____&quot;,[51,logseq____&quot;^Ulogseq____&quot;,29,536870919]],[logseq____&quot;^15logseq____&quot;,[51,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;~:headinglogseq____&quot;,2],536870919]],[logseq____&quot;^15logseq____&quot;,[51,logseq____&quot;^Jlogseq____&quot;,[],536870919]],[logseq____&quot;^15logseq____&quot;,[51,logseq____&quot;^Hlogseq____&quot;,23,536870919]],[logseq____&quot;^15logseq____&quot;,[51,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a6-d46f-4b97-b570-f1edf1053520logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[52,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;## In-Disk Representation\\nThinking that the commit status of each transaction composites an array `clog[]` and `clog[xid]` records the status, we can easily store the array to disk by the `slru`.\\n\\nThe status of one transaction needs two bits to represent:\\n```C\\n#define CLOG_BITS_PER_XACT\\t2\\n#define CLOG_XACTS_PER_BYTE 4\\n#define CLOG_XACTS_PER_PAGE (BLCKSZ * CLOG_XACTS_PER_BYTE)\\n#define CLOG_XACT_BITMASK\\t((1 logseq____&lt;logseq____&lt; CLOG_BITS_PER_XACT) - 1)\\n```\\n\\nSo we can get the xidlogseq____&apos;s index and offset in page and byte.\\n```C\\n#define TransactionIdToPage(xid)\\t((xid) / (TransactionId) CLOG_XACTS_PER_PAGE)\\n#define TransactionIdToPgIndex(xid) ((xid) % (TransactionId) CLOG_XACTS_PER_PAGE)\\n#define TransactionIdToByte(xid)\\t(TransactionIdToPgIndex(xid) / CLOG_XACTS_PER_BYTE)\\n#define TransactionIdToBIndex(xid)\\t((xid) % (TransactionId) CLOG_XACTS_PER_BYTE)\\n```\\n\\nThinking of that one slru segment contains 32 pages, so we name the clog file as `0000`(contains xid in [0, 32 * CLOG_XACTS_PER_PAGE - 1]), `0001`(contains xid in [32 * CLOG_XACTS_PER_PAGE, 32 * CLOG_XACTS_PER_PAGE * 2 - 1]) and so on. Because four hex numbers can represent $16^4=2^{12}$ files with $2^{12} \\\\times 32 \\\\times 8192 \\\\times 4 = 2^{32}$ transactionslogseq____&apos; status(a int32 size)\\n\\nAttension, such simple mapping means that the pages in clog file donlogseq____&apos;t have page headers. So we canlogseq____&apos;t record `LSN`, `checksum` in each page. The lack of `LSN` means the changes of clog page wouldnlogseq____&apos;t be recorded in `WAL` but clog doesnlogseq____&apos;t need it indeed.logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[52,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[52,logseq____&quot;^Flogseq____&quot;,51,536870919]],[logseq____&quot;^15logseq____&quot;,[52,logseq____&quot;^Xlogseq____&quot;,29,536870919]],[logseq____&quot;^15logseq____&quot;,[52,logseq____&quot;^Vlogseq____&quot;,29,536870919]],[logseq____&quot;^15logseq____&quot;,[52,logseq____&quot;^Ulogseq____&quot;,29,536870919]],[logseq____&quot;^15logseq____&quot;,[52,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^18logseq____&quot;,2],536870919]],[logseq____&quot;^15logseq____&quot;,[52,logseq____&quot;^Jlogseq____&quot;,[],536870919]],[logseq____&quot;^15logseq____&quot;,[52,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a6-5fbb-47ab-9c0b-5970f061059blogseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[53,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;## Extend And Truncate\\nDuring the process of generating a new `xid`, we make sure that the slru page exists.\\n* If itlogseq____&apos;s the first xid of the page, we allocate a new page in clog buffer.\\n* Also generate a WAL to record the birth of the page.\\n* If not, the page must exist in memory or flushed into disk. So itlogseq____&apos;s for slru\\nlayer to manage such situation.  Keep in mind that the general self-increment xid doeslogseq____&apos;t begin at zero:\\n```C\\n#define FirstNormalTransactionId\\t((TransactionId) 3)\\n```\\nso:\\n* During bootstrap, initialize the first clog page\\n* During extend new pages, be careful about the `FirstNormalTransactionId`,\\nsince it is not the first xid in page representation but the first general one.\\n\\nThe above behaviors indicate that although a clog segment at most occupies 256K space, it doesnlogseq____&apos;t have such size just after initialization. We extend 8K pages one by one during the xid increment.\\n\\nSince at most half of `uint32` xids can be in use, itlogseq____&apos;s natural to clean up out of date clog files. Different from extending a page, we always delete a whole page. So once we promote the `frozenxid`, we try to find some clog files to delete:\\n1. The judgement whether there is a file can be deleted is completed in slru layer(a loop to scan the directory), but clog layer supports a hook to judge one file.\\n2. Advance the oldest clog xid in shared memory\\n3. Generate a clog truncate WAL record\\n4. Real truncate. Complemented in slru layer.\\n\\nDetails of the two kind WAL record will be shown later.logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[53,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[53,logseq____&quot;^Flogseq____&quot;,52,536870919]],[logseq____&quot;^15logseq____&quot;,[53,logseq____&quot;^Xlogseq____&quot;,29,536870919]],[logseq____&quot;^15logseq____&quot;,[53,logseq____&quot;^Vlogseq____&quot;,29,536870919]],[logseq____&quot;^15logseq____&quot;,[53,logseq____&quot;^Ulogseq____&quot;,29,536870919]],[logseq____&quot;^15logseq____&quot;,[53,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^18logseq____&quot;,2],536870919]],[logseq____&quot;^15logseq____&quot;,[53,logseq____&quot;^Jlogseq____&quot;,[],536870919]],[logseq____&quot;^15logseq____&quot;,[53,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a6-e274-44de-8a2e-fa1b8851ea17logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[54,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;## Set And Get\\nConcerned with subtransactions ...\\nlogseq____&gt; I canlogseq____&apos;t totally figure out the commit tree without knowing the mechanism of subtransaction. Just assuming subxids as a set of xids related to the main xid seems not convictive enough for me. So I remain it here now and will finish it after reading subtransactions)\\n\\n\\nFor now, it seems enough to knowing that\\n1. The pair of operations wouldnlogseq____&apos;t generate any WAL record\\n2. They are done during the commit or abort procedure.logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[54,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[54,logseq____&quot;^Flogseq____&quot;,53,536870919]],[logseq____&quot;^15logseq____&quot;,[54,logseq____&quot;^Xlogseq____&quot;,29,536870919]],[logseq____&quot;^15logseq____&quot;,[54,logseq____&quot;^Vlogseq____&quot;,29,536870919]],[logseq____&quot;^15logseq____&quot;,[54,logseq____&quot;^Ulogseq____&quot;,29,536870919]],[logseq____&quot;^15logseq____&quot;,[54,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^18logseq____&quot;,2],536870919]],[logseq____&quot;^15logseq____&quot;,[54,logseq____&quot;^Jlogseq____&quot;,[],536870919]],[logseq____&quot;^15logseq____&quot;,[54,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a6-8f5f-40e6-bf36-64652be94cb8logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[55,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;## Record changes in WAL #wal \\nRecall what mentioned above:\\n* Extending a new page and delete a segment will generate a WAL record.\\n* Setting commit status wouldnlogseq____&apos;t\\n\\nFor the latter one, itlogseq____&apos;s unbelievable but tricky. Since only the transactions that changes the content data(some hint flags are exception, such as tuple infomask) will have a xid(and then record on clog segment). During the replay of such transactionslogseq____&apos; commit(or abort) WAL record, we can redo the clog by the way. \\n\\nFor the former one, itlogseq____&apos;s a matter of course, since we must guarantee the clog to be recovery-safe. But some details deserve a glance:\\n\\n* For extending a new page, it makes no difference that we flush the WAL record now or later. Since once we want to set status in a non-existent page during recovery, we can padding a new empty page. This trick doesnlogseq____&apos;t affect the page usage.\\n* For deleting a clog segment, we have no chance to remedy the lost of clogs, and the disaster means a lot of tuple can be accessed at all. So regardless of the synchronous commit level, we must ensure the WAL record has flushed into disk before really delete the segments.logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[55,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[55,logseq____&quot;^Flogseq____&quot;,54,536870919]],[logseq____&quot;^15logseq____&quot;,[55,logseq____&quot;^Xlogseq____&quot;,29,536870919]],[logseq____&quot;^15logseq____&quot;,[55,logseq____&quot;^Vlogseq____&quot;,29,536870919]],[logseq____&quot;^15logseq____&quot;,[55,logseq____&quot;^Ulogseq____&quot;,24,536870919]],[logseq____&quot;^15logseq____&quot;,[55,logseq____&quot;^Ulogseq____&quot;,29,536870919]],[logseq____&quot;^15logseq____&quot;,[55,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^18logseq____&quot;,2],536870919]],[logseq____&quot;^15logseq____&quot;,[55,logseq____&quot;^Jlogseq____&quot;,[],536870919]],[logseq____&quot;^15logseq____&quot;,[55,logseq____&quot;^Hlogseq____&quot;,24,536870919]],[logseq____&quot;^15logseq____&quot;,[55,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a6-b85e-4cd2-9a35-4411030baf2elogseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[57,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~```C\\ntypedef enum\\n{\\n\\tMultiXactStatusForKeyShare = 0x00,\\n\\tMultiXactStatusForShare = 0x01,\\n\\tMultiXactStatusForNoKeyUpdate = 0x02,\\n\\tMultiXactStatusForUpdate = 0x03,\\n\\t/* an update that doesnlogseq____&apos;t touch \\logseq____&quot;key\\logseq____&quot; columns */\\n\\tMultiXactStatusNoKeyUpdate = 0x04,\\n\\t/* other updates, and delete */\\n\\tMultiXactStatusUpdate = 0x05\\n} MultiXactStatus;\\n```logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[57,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[57,logseq____&quot;^Flogseq____&quot;,75,536870920]],[logseq____&quot;^15logseq____&quot;,[57,logseq____&quot;^Xlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[57,logseq____&quot;^Vlogseq____&quot;,75,536870920]],[logseq____&quot;^15logseq____&quot;,[57,logseq____&quot;^Ulogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[57,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a6-0364-41f5-9431-247bacb1c682logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[58,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;So we call the the transaction with its lock type as `multi transaction member(MXactM)`logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[58,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[58,logseq____&quot;^Flogseq____&quot;,59,536870920]],[logseq____&quot;^15logseq____&quot;,[58,logseq____&quot;^Xlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[58,logseq____&quot;^Vlogseq____&quot;,70,536870920]],[logseq____&quot;^15logseq____&quot;,[58,logseq____&quot;^Ulogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[58,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a6-efe3-4825-a6d1-6983a0555db1logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[59,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;Whatlogseq____&apos;s `MXact`:\\nDifferent from `xid` as a transaction level concept,  `multi-transaction-id(MXact)` is a `tuple` level concepts.  When there may be a conflict at tuple, that is deciding the `xmax` value , a `MXact` is generated with tuple. The `Mxact` relates to an array of `xid`s which are accessing the tuple an their lock types.logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[59,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[59,logseq____&quot;^Flogseq____&quot;,70,536870920]],[logseq____&quot;^15logseq____&quot;,[59,logseq____&quot;^Xlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[59,logseq____&quot;^Vlogseq____&quot;,70,536870920]],[logseq____&quot;^15logseq____&quot;,[59,logseq____&quot;^Ulogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[59,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a6-3dc5-45ad-9ee2-94281fb9c6e8logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[60,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;As mentioned above, we need to maintain every `MXactM` lists for each `MXact`, The logical implement is below:logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[60,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[60,logseq____&quot;^Flogseq____&quot;,62,536870920]],[logseq____&quot;^15logseq____&quot;,[60,logseq____&quot;^Xlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[60,logseq____&quot;^Vlogseq____&quot;,62,536870920]],[logseq____&quot;^15logseq____&quot;,[60,logseq____&quot;^Ulogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[60,logseq____&quot;^Ulogseq____&quot;,27,536870920]],[logseq____&quot;^15logseq____&quot;,[60,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a6-6a4e-4ca7-8d07-9cd903abef96logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[61,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;## Backgroundlogseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[61,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[61,logseq____&quot;^Flogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[61,logseq____&quot;^Xlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[61,logseq____&quot;^Vlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[61,logseq____&quot;^Ulogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[61,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^18logseq____&quot;,2],536870920]],[logseq____&quot;^15logseq____&quot;,[61,logseq____&quot;^Jlogseq____&quot;,[],536870920]],[logseq____&quot;^15logseq____&quot;,[61,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a6-7896-4f4f-a9bd-fa5c875fdfa5logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[62,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;### Two [[slru]] structure:logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[62,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[62,logseq____&quot;^Flogseq____&quot;,70,536870920]],[logseq____&quot;^15logseq____&quot;,[62,logseq____&quot;^Xlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[62,logseq____&quot;^Vlogseq____&quot;,66,536870920]],[logseq____&quot;^15logseq____&quot;,[62,logseq____&quot;^Ulogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[62,logseq____&quot;^Ulogseq____&quot;,27,536870920]],[logseq____&quot;^15logseq____&quot;,[62,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^18logseq____&quot;,3],536870920]],[logseq____&quot;^15logseq____&quot;,[62,logseq____&quot;^Jlogseq____&quot;,[],536870920]],[logseq____&quot;^15logseq____&quot;,[62,logseq____&quot;^Hlogseq____&quot;,27,536870920]],[logseq____&quot;^15logseq____&quot;,[62,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a6-1d55-40ef-9074-a6509864f7cblogseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[63,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~```\\nheapam_tuple_delete\\n.   heapam_tuple_lock_internal\\n.       heap_lock_tuple\\n.           if (infomask logseq____&amp; HEAP_XMAX_IS_MULTI)\\n            GetMultiXactIdMembers\\n```logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[63,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[63,logseq____&quot;^Flogseq____&quot;,71,536870920]],[logseq____&quot;^15logseq____&quot;,[63,logseq____&quot;^Xlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[63,logseq____&quot;^Vlogseq____&quot;,71,536870920]],[logseq____&quot;^15logseq____&quot;,[63,logseq____&quot;^Ulogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[63,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a6-9f7b-4ee3-8dcb-53968fc76fcalogseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[64,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~```C\\ntypedef struct MultiXactMember\\n{\\n\\tTransactionId xid;\\n\\tMultiXactStatus status;\\n} MultiXactMember;\\n```logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[64,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[64,logseq____&quot;^Flogseq____&quot;,58,536870920]],[logseq____&quot;^15logseq____&quot;,[64,logseq____&quot;^Xlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[64,logseq____&quot;^Vlogseq____&quot;,58,536870920]],[logseq____&quot;^15logseq____&quot;,[64,logseq____&quot;^Ulogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[64,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a6-d247-4609-8fc4-01787ce1ab6alogseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[65,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~`Mxact` Page:\\nSimilar to clog, one `mxact` occupy 32 bits, so `mxact` can fill the page perfectlylogseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[65,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[65,logseq____&quot;^Flogseq____&quot;,73,536870920]],[logseq____&quot;^15logseq____&quot;,[65,logseq____&quot;^Xlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[65,logseq____&quot;^Vlogseq____&quot;,62,536870920]],[logseq____&quot;^15logseq____&quot;,[65,logseq____&quot;^Ulogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[65,logseq____&quot;^Ulogseq____&quot;,27,536870920]],[logseq____&quot;^15logseq____&quot;,[65,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a6-2abc-4278-9010-48cd9f70a156logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[66,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;## Low level Designlogseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[66,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[66,logseq____&quot;^Flogseq____&quot;,69,536870920]],[logseq____&quot;^15logseq____&quot;,[66,logseq____&quot;^Xlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[66,logseq____&quot;^Vlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[66,logseq____&quot;^Ulogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[66,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^18logseq____&quot;,2],536870920]],[logseq____&quot;^15logseq____&quot;,[66,logseq____&quot;^Jlogseq____&quot;,[],536870920]],[logseq____&quot;^15logseq____&quot;,[66,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a6-8586-44d2-a5b9-51544d533677logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[67,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~`MxactM` Page:\\nIt is a bit more complex, since we need a external byte for each `xid` attribute. To avoid alignment issues, we bind four `MxactM` as a group(20 bytes). Thus, with 8kB BLCKSZ, we keep 409 groups er page.  This wastes 12 bytes per page, but thatlogseq____&apos;s OK.logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[67,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[67,logseq____&quot;^Flogseq____&quot;,65,536870920]],[logseq____&quot;^15logseq____&quot;,[67,logseq____&quot;^Xlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[67,logseq____&quot;^Vlogseq____&quot;,62,536870920]],[logseq____&quot;^15logseq____&quot;,[67,logseq____&quot;^Ulogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[67,logseq____&quot;^Ulogseq____&quot;,27,536870920]],[logseq____&quot;^15logseq____&quot;,[67,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a6-db97-49ba-bfb3-ac2b10ceeb32logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[68,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;Why is `multi-transaction-log` #SLRU_IMPLEMENT\\n* Since many transactions can have the shared lock on a same tuple simultaneously but there is no space to record these transactions in the tuple header, welogseq____&apos;d better to manage a specific **shared space** to recording the transactions that holding the tuple-level locks.\\n* A shared memory space doesnlogseq____&apos;t seem OK since one transaction can access tons of tuple which is unadvisable to store them in memory. So the only solution is recording in disk\\n* So locking a row might cause a disk writelogseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[68,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[68,logseq____&quot;^Flogseq____&quot;,61,536870920]],[logseq____&quot;^15logseq____&quot;,[68,logseq____&quot;^Xlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[68,logseq____&quot;^Vlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[68,logseq____&quot;^Ulogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[68,logseq____&quot;^Ulogseq____&quot;,23,536870920]],[logseq____&quot;^15logseq____&quot;,[68,logseq____&quot;^Hlogseq____&quot;,23,536870920]],[logseq____&quot;^15logseq____&quot;,[68,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a6-9bda-4fd1-ba9f-4d8de31b8470logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[69,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;Four kind of locks:\\nid:: 65844328-bef2-44af-8583-d61849a30ab1\\n* From [Official Docs](https://www.postgresql.org/docs/current/explicit-locking.html#LOCKING-ROWS) , PG has four kinds of tuple-level locks.\\n* ![image.png](../assets/tuple-level-lock-table.png)\\n* `FOR UPDATE` : acquired by `delete` or `UPDATE` that modifies the values of certain columns\\n* have a **unique index** on them that can be used in a foreign key\\n* `FOR NO KEY UPDATE`: acquired by or `UPDATE` that expect the situation above\\n* `FOR SHARE` : #TODO\\n* `FOR KEY SHARE` : #TODO \\n\\n#TODO  letlogseq____&apos;s see `heapam` first before studying the `multixact`logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[69,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[69,logseq____&quot;^Flogseq____&quot;,68,536870920]],[logseq____&quot;^15logseq____&quot;,[69,logseq____&quot;^Xlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[69,logseq____&quot;^Vlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[69,logseq____&quot;^Ulogseq____&quot;,4,536870920]],[logseq____&quot;^15logseq____&quot;,[69,logseq____&quot;^Ulogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[69,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;~:idlogseq____&quot;,logseq____&quot;65844328-bef2-44af-8583-d61849a30ab1logseq____&quot;],536870920]],[logseq____&quot;^15logseq____&quot;,[69,logseq____&quot;^Jlogseq____&quot;,[logseq____&quot;^19logseq____&quot;],536870920]],[logseq____&quot;^15logseq____&quot;,[69,logseq____&quot;^4logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^19logseq____&quot;,logseq____&quot;65844328-bef2-44af-8583-d61849a30ab1logseq____&quot;],536870920]],[logseq____&quot;^15logseq____&quot;,[69,logseq____&quot;^Hlogseq____&quot;,4,536870920]],[logseq____&quot;^15logseq____&quot;,[69,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65844328-bef2-44af-8583-d61849a30ab1logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[70,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;### backendlogseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[70,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[70,logseq____&quot;^Flogseq____&quot;,66,536870920]],[logseq____&quot;^15logseq____&quot;,[70,logseq____&quot;^Xlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[70,logseq____&quot;^Vlogseq____&quot;,66,536870920]],[logseq____&quot;^15logseq____&quot;,[70,logseq____&quot;^Ulogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[70,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^18logseq____&quot;,3],536870920]],[logseq____&quot;^15logseq____&quot;,[70,logseq____&quot;^Jlogseq____&quot;,[],536870920]],[logseq____&quot;^15logseq____&quot;,[70,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a6-9bce-4d49-8040-c460c93b209blogseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[71,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;## otherslogseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[71,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[71,logseq____&quot;^Flogseq____&quot;,66,536870920]],[logseq____&quot;^15logseq____&quot;,[71,logseq____&quot;^Xlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[71,logseq____&quot;^Vlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[71,logseq____&quot;^Ulogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[71,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^18logseq____&quot;,2],536870920]],[logseq____&quot;^15logseq____&quot;,[71,logseq____&quot;^Jlogseq____&quot;,[],536870920]],[logseq____&quot;^15logseq____&quot;,[71,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a6-46df-49c6-8846-bbd71e6b2d55logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[72,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;### Control dat: `MultiXactStateData`logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[72,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[72,logseq____&quot;^Flogseq____&quot;,62,536870920]],[logseq____&quot;^15logseq____&quot;,[72,logseq____&quot;^Xlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[72,logseq____&quot;^Vlogseq____&quot;,66,536870920]],[logseq____&quot;^15logseq____&quot;,[72,logseq____&quot;^Ulogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[72,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^18logseq____&quot;,3],536870920]],[logseq____&quot;^15logseq____&quot;,[72,logseq____&quot;^Jlogseq____&quot;,[],536870920]],[logseq____&quot;^15logseq____&quot;,[72,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a6-7974-4654-b1c3-d27490116312logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[73,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;![🖼 mxact-page.png](../assets/mxact-page.png)logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[73,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[73,logseq____&quot;^Flogseq____&quot;,60,536870920]],[logseq____&quot;^15logseq____&quot;,[73,logseq____&quot;^Xlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[73,logseq____&quot;^Vlogseq____&quot;,62,536870920]],[logseq____&quot;^15logseq____&quot;,[73,logseq____&quot;^Ulogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[73,logseq____&quot;^Ulogseq____&quot;,27,536870920]],[logseq____&quot;^15logseq____&quot;,[73,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a6-9b1d-4784-b9a8-1e418c04fbbclogseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[74,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[74,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[74,logseq____&quot;^Flogseq____&quot;,72,536870920]],[logseq____&quot;^15logseq____&quot;,[74,logseq____&quot;^Xlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[74,logseq____&quot;^Vlogseq____&quot;,72,536870920]],[logseq____&quot;^15logseq____&quot;,[74,logseq____&quot;^Ulogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[74,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a6-ed34-448d-abd6-51e31c1cef90logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[75,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;The `MultiXactStatus` is the lock type ((65844328-bef2-44af-8583-d61849a30ab1))logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[75,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[75,logseq____&quot;^Flogseq____&quot;,58,536870920]],[logseq____&quot;^15logseq____&quot;,[75,logseq____&quot;^Xlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[75,logseq____&quot;^Vlogseq____&quot;,70,536870920]],[logseq____&quot;^15logseq____&quot;,[75,logseq____&quot;^Ulogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[75,logseq____&quot;^Hlogseq____&quot;,69,536870920]],[logseq____&quot;^15logseq____&quot;,[75,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a6-4a96-444e-b6de-4bb43ed07432logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[77,logseq____&quot;^Klogseq____&quot;,1703413926924,536870921]],[logseq____&quot;^15logseq____&quot;,[77,logseq____&quot;^@logseq____&quot;,false,536870921]],[logseq____&quot;^15logseq____&quot;,[77,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;relfilelocatorlogseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[77,logseq____&quot;^11logseq____&quot;,logseq____&quot;relfilelocatorlogseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[77,logseq____&quot;^Blogseq____&quot;,1703413926924,536870921]],[logseq____&quot;^15logseq____&quot;,[77,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-4325-4943-b0e0-2d455154ad53logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[78,logseq____&quot;^Klogseq____&quot;,1703413926926,536870921]],[logseq____&quot;^15logseq____&quot;,[78,logseq____&quot;^@logseq____&quot;,false,536870921]],[logseq____&quot;^15logseq____&quot;,[78,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;shared-bufferslogseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[78,logseq____&quot;^11logseq____&quot;,logseq____&quot;shared-bufferslogseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[78,logseq____&quot;^Blogseq____&quot;,1703413926926,536870921]],[logseq____&quot;^15logseq____&quot;,[78,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a6-44c2-476f-91e8-741b73c7ee74logseq____&quot;,536870922]],[logseq____&quot;^15logseq____&quot;,[79,logseq____&quot;^Klogseq____&quot;,1703413926927,536870921]],[logseq____&quot;^15logseq____&quot;,[79,logseq____&quot;^@logseq____&quot;,false,536870921]],[logseq____&quot;^15logseq____&quot;,[79,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;unlogged-tablelogseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[79,logseq____&quot;^11logseq____&quot;,logseq____&quot;unlogged-tablelogseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[79,logseq____&quot;^Blogseq____&quot;,1703413926927,536870921]],[logseq____&quot;^15logseq____&quot;,[79,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-3030-4b45-a26f-c48a6a74f6b6logseq____&quot;,536870925]],[logseq____&quot;^15logseq____&quot;,[80,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~`FSM_FORKNUM` : free space manager filelogseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[80,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[80,logseq____&quot;^Flogseq____&quot;,94,536870921]],[logseq____&quot;^15logseq____&quot;,[80,logseq____&quot;^Xlogseq____&quot;,77,536870921]],[logseq____&quot;^15logseq____&quot;,[80,logseq____&quot;^Vlogseq____&quot;,86,536870921]],[logseq____&quot;^15logseq____&quot;,[80,logseq____&quot;^Ulogseq____&quot;,77,536870921]],[logseq____&quot;^15logseq____&quot;,[80,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a6-dcaf-424b-b760-901abb77d412logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[81,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~`INIT_FORKNUM` : for  [unlogged table](https://www.postgresql.org/docs/current/sql-createtable.html#SQL-CREATETABLE-UNLOGGED)logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[81,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[81,logseq____&quot;^Flogseq____&quot;,87,536870921]],[logseq____&quot;^15logseq____&quot;,[81,logseq____&quot;^Xlogseq____&quot;,77,536870921]],[logseq____&quot;^15logseq____&quot;,[81,logseq____&quot;^Vlogseq____&quot;,86,536870921]],[logseq____&quot;^15logseq____&quot;,[81,logseq____&quot;^Ulogseq____&quot;,77,536870921]],[logseq____&quot;^15logseq____&quot;,[81,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a6-cbd7-41c0-ba0a-f62077b2bd79logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[82,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;RelFileNumber is physically existent, since operations like `vacuum full` and `truncate` will create new files with different file namelogseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[82,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[82,logseq____&quot;^Flogseq____&quot;,93,536870921]],[logseq____&quot;^15logseq____&quot;,[82,logseq____&quot;^Xlogseq____&quot;,77,536870921]],[logseq____&quot;^15logseq____&quot;,[82,logseq____&quot;^Vlogseq____&quot;,85,536870921]],[logseq____&quot;^15logseq____&quot;,[82,logseq____&quot;^Ulogseq____&quot;,77,536870921]],[logseq____&quot;^15logseq____&quot;,[82,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a6-e288-4c90-8dcb-2fa7bca03870logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[83,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;## buffer tag\\nid:: 6581a94f-7372-4aef-9531-962f2170ffeclogseq____&quot;,536870922]],[logseq____&quot;^15logseq____&quot;,[83,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870922]],[logseq____&quot;^15logseq____&quot;,[83,logseq____&quot;^Flogseq____&quot;,78,536870922]],[logseq____&quot;^15logseq____&quot;,[83,logseq____&quot;^Xlogseq____&quot;,78,536870922]],[logseq____&quot;^15logseq____&quot;,[83,logseq____&quot;^Vlogseq____&quot;,78,536870922]],[logseq____&quot;^15logseq____&quot;,[83,logseq____&quot;^Ulogseq____&quot;,78,536870922]],[logseq____&quot;^15logseq____&quot;,[83,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^19logseq____&quot;,logseq____&quot;6581a94f-7372-4aef-9531-962f2170ffeclogseq____&quot;,logseq____&quot;^18logseq____&quot;,2],536870922]],[logseq____&quot;^15logseq____&quot;,[83,logseq____&quot;^Jlogseq____&quot;,[logseq____&quot;^19logseq____&quot;],536870922]],[logseq____&quot;^15logseq____&quot;,[83,logseq____&quot;^4logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^19logseq____&quot;,logseq____&quot;6581a94f-7372-4aef-9531-962f2170ffeclogseq____&quot;],536870922]],[logseq____&quot;^15logseq____&quot;,[83,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u6581a94f-7372-4aef-9531-962f2170ffeclogseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[84,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[84,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[84,logseq____&quot;^Flogseq____&quot;,86,536870921]],[logseq____&quot;^15logseq____&quot;,[84,logseq____&quot;^Xlogseq____&quot;,77,536870921]],[logseq____&quot;^15logseq____&quot;,[84,logseq____&quot;^Vlogseq____&quot;,77,536870921]],[logseq____&quot;^15logseq____&quot;,[84,logseq____&quot;^Ulogseq____&quot;,77,536870921]],[logseq____&quot;^15logseq____&quot;,[84,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a6-74ba-42ce-b052-e2c67daf93a9logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[85,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~`RelFileNumber` is the file name of the relationlogseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[85,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[85,logseq____&quot;^Flogseq____&quot;,92,536870921]],[logseq____&quot;^15logseq____&quot;,[85,logseq____&quot;^Xlogseq____&quot;,77,536870921]],[logseq____&quot;^15logseq____&quot;,[85,logseq____&quot;^Vlogseq____&quot;,77,536870921]],[logseq____&quot;^15logseq____&quot;,[85,logseq____&quot;^Ulogseq____&quot;,77,536870921]],[logseq____&quot;^15logseq____&quot;,[85,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a6-aae8-414d-96ff-f6299750412clogseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[86,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~`ForkNumber`\\nid:: 65805626-a222-4aa2-88e3-8a3dcfda498flogseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[86,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[86,logseq____&quot;^Flogseq____&quot;,85,536870921]],[logseq____&quot;^15logseq____&quot;,[86,logseq____&quot;^Xlogseq____&quot;,77,536870921]],[logseq____&quot;^15logseq____&quot;,[86,logseq____&quot;^Vlogseq____&quot;,77,536870921]],[logseq____&quot;^15logseq____&quot;,[86,logseq____&quot;^Ulogseq____&quot;,77,536870921]],[logseq____&quot;^15logseq____&quot;,[86,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^19logseq____&quot;,logseq____&quot;65805626-a222-4aa2-88e3-8a3dcfda498flogseq____&quot;],536870921]],[logseq____&quot;^15logseq____&quot;,[86,logseq____&quot;^Jlogseq____&quot;,[logseq____&quot;^19logseq____&quot;],536870921]],[logseq____&quot;^15logseq____&quot;,[86,logseq____&quot;^4logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^19logseq____&quot;,logseq____&quot;65805626-a222-4aa2-88e3-8a3dcfda498flogseq____&quot;],536870921]],[logseq____&quot;^15logseq____&quot;,[86,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65805626-a222-4aa2-88e3-8a3dcfda498flogseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[87,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~`VISIBILITYMAP_FORKNUM` : VISIBILITYMAP filelogseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[87,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[87,logseq____&quot;^Flogseq____&quot;,80,536870921]],[logseq____&quot;^15logseq____&quot;,[87,logseq____&quot;^Xlogseq____&quot;,77,536870921]],[logseq____&quot;^15logseq____&quot;,[87,logseq____&quot;^Vlogseq____&quot;,86,536870921]],[logseq____&quot;^15logseq____&quot;,[87,logseq____&quot;^Ulogseq____&quot;,77,536870921]],[logseq____&quot;^15logseq____&quot;,[87,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a6-53af-4b12-b272-7065e142a457logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[88,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;The main data, fsm and vm are all buffered by the [[shared-buffers]] .logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[88,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[88,logseq____&quot;^Flogseq____&quot;,89,536870921]],[logseq____&quot;^15logseq____&quot;,[88,logseq____&quot;^Xlogseq____&quot;,77,536870921]],[logseq____&quot;^15logseq____&quot;,[88,logseq____&quot;^Vlogseq____&quot;,89,536870921]],[logseq____&quot;^15logseq____&quot;,[88,logseq____&quot;^Ulogseq____&quot;,77,536870921]],[logseq____&quot;^15logseq____&quot;,[88,logseq____&quot;^Ulogseq____&quot;,78,536870921]],[logseq____&quot;^15logseq____&quot;,[88,logseq____&quot;^Hlogseq____&quot;,78,536870921]],[logseq____&quot;^15logseq____&quot;,[88,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a6-266f-43df-bfc6-f774b3978412logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[89,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;It is the file \\logseq____&quot;type\\logseq____&quot; of a relationlogseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[89,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[89,logseq____&quot;^Flogseq____&quot;,86,536870921]],[logseq____&quot;^15logseq____&quot;,[89,logseq____&quot;^Xlogseq____&quot;,77,536870921]],[logseq____&quot;^15logseq____&quot;,[89,logseq____&quot;^Vlogseq____&quot;,86,536870921]],[logseq____&quot;^15logseq____&quot;,[89,logseq____&quot;^Ulogseq____&quot;,77,536870921]],[logseq____&quot;^15logseq____&quot;,[89,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a6-fb58-4e21-944b-c1bcd63774f8logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[90,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;See ((6581a94f-7372-4aef-9531-962f2170ffec)) for detaillogseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[90,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[90,logseq____&quot;^Flogseq____&quot;,88,536870921]],[logseq____&quot;^15logseq____&quot;,[90,logseq____&quot;^Xlogseq____&quot;,77,536870921]],[logseq____&quot;^15logseq____&quot;,[90,logseq____&quot;^Vlogseq____&quot;,89,536870921]],[logseq____&quot;^15logseq____&quot;,[90,logseq____&quot;^Ulogseq____&quot;,77,536870921]],[logseq____&quot;^15logseq____&quot;,[90,logseq____&quot;^Hlogseq____&quot;,83,536870921]],[logseq____&quot;^15logseq____&quot;,[90,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a6-6e6d-4c9d-b69e-6485c8a16baalogseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[91,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;{{embed [[unlogged-table]]}}logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[91,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[91,logseq____&quot;^Flogseq____&quot;,81,536870921]],[logseq____&quot;^15logseq____&quot;,[91,logseq____&quot;^Slogseq____&quot;,96,536870921]],[logseq____&quot;^15logseq____&quot;,[91,logseq____&quot;^Xlogseq____&quot;,77,536870921]],[logseq____&quot;^15logseq____&quot;,[91,logseq____&quot;^Vlogseq____&quot;,81,536870921]],[logseq____&quot;^15logseq____&quot;,[91,logseq____&quot;^Ulogseq____&quot;,77,536870921]],[logseq____&quot;^15logseq____&quot;,[91,logseq____&quot;^Ulogseq____&quot;,79,536870921]],[logseq____&quot;^15logseq____&quot;,[91,logseq____&quot;^Hlogseq____&quot;,79,536870921]],[logseq____&quot;^15logseq____&quot;,[91,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a6-d89f-4027-88cb-a585ddc9c7f6logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[92,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~```C\\ntypedef struct RelFileLocator\\n{\\n\\tOid\\t\\t\\tspcOid;\\t\\t\\t/* tablespace */\\n\\tOid\\t\\t\\tdbOid;\\t\\t\\t/* database */\\n\\tRelFileNumber relNumber;\\t/* relation */\\n} RelFileLocator;\\n```logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[92,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[92,logseq____&quot;^Flogseq____&quot;,77,536870921]],[logseq____&quot;^15logseq____&quot;,[92,logseq____&quot;^Xlogseq____&quot;,77,536870921]],[logseq____&quot;^15logseq____&quot;,[92,logseq____&quot;^Vlogseq____&quot;,77,536870921]],[logseq____&quot;^15logseq____&quot;,[92,logseq____&quot;^Ulogseq____&quot;,77,536870921]],[logseq____&quot;^15logseq____&quot;,[92,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a6-2cb9-44cd-abab-973666081e19logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[93,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;Oid of a relation is logically existent.logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[93,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[93,logseq____&quot;^Flogseq____&quot;,85,536870921]],[logseq____&quot;^15logseq____&quot;,[93,logseq____&quot;^Xlogseq____&quot;,77,536870921]],[logseq____&quot;^15logseq____&quot;,[93,logseq____&quot;^Vlogseq____&quot;,85,536870921]],[logseq____&quot;^15logseq____&quot;,[93,logseq____&quot;^Ulogseq____&quot;,77,536870921]],[logseq____&quot;^15logseq____&quot;,[93,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a6-1230-497f-9335-0d1aaefddcfelogseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[94,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~`MAIN_FORKNUM` : heap filelogseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[94,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[94,logseq____&quot;^Flogseq____&quot;,89,536870921]],[logseq____&quot;^15logseq____&quot;,[94,logseq____&quot;^Xlogseq____&quot;,77,536870921]],[logseq____&quot;^15logseq____&quot;,[94,logseq____&quot;^Vlogseq____&quot;,86,536870921]],[logseq____&quot;^15logseq____&quot;,[94,logseq____&quot;^Ulogseq____&quot;,77,536870921]],[logseq____&quot;^15logseq____&quot;,[94,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a6-6352-4449-916d-365ea5bdf9b0logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[95,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[95,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[95,logseq____&quot;^Flogseq____&quot;,81,536870921]],[logseq____&quot;^15logseq____&quot;,[95,logseq____&quot;^Xlogseq____&quot;,77,536870921]],[logseq____&quot;^15logseq____&quot;,[95,logseq____&quot;^Vlogseq____&quot;,86,536870921]],[logseq____&quot;^15logseq____&quot;,[95,logseq____&quot;^Ulogseq____&quot;,77,536870921]],[logseq____&quot;^15logseq____&quot;,[95,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a6-20c4-4000-8ee9-3c13c3dbebaflogseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[96,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;~:logseq.macro-namelogseq____&quot;,logseq____&quot;embedlogseq____&quot;,logseq____&quot;~:logseq.macro-argumentslogseq____&quot;,[logseq____&quot;[[unlogged-table]]logseq____&quot;]],536870921]],[logseq____&quot;^15logseq____&quot;,[96,logseq____&quot;^Wlogseq____&quot;,logseq____&quot;macrologseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[96,logseq____&quot;^Tlogseq____&quot;,logseq____&quot;embed [[unlogged-table]]logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[98,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~```\\nBufferGetTag(Buffer buffer, RelFileLocator *rlocator, ForkNumber *forknum,\\n\\t\\t\\t BlockNumber *blknum)\\n{\\n\\tbufHdr = GetLocalBufferDescriptor/GetBufferDescriptor\\n    *rlocator = BufTagGetRelFileLocator(logseq____&amp;bufHdr-logseq____&gt;tag);\\n    *forknum = BufTagGetForkNum(logseq____&amp;bufHdr-logseq____&gt;tag);\\n    *blknum = bufHdr-logseq____&gt;tag.blockNum;\\n}\\n```logseq____&quot;,536870922]],[logseq____&quot;^15logseq____&quot;,[98,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870922]],[logseq____&quot;^15logseq____&quot;,[98,logseq____&quot;^Flogseq____&quot;,83,536870922]],[logseq____&quot;^15logseq____&quot;,[98,logseq____&quot;^Xlogseq____&quot;,78,536870922]],[logseq____&quot;^15logseq____&quot;,[98,logseq____&quot;^Vlogseq____&quot;,83,536870922]],[logseq____&quot;^15logseq____&quot;,[98,logseq____&quot;^Ulogseq____&quot;,78,536870922]],[logseq____&quot;^15logseq____&quot;,[98,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a6-65a8-42fe-ba1a-40e991e4bcedlogseq____&quot;,536870922]],[logseq____&quot;^15logseq____&quot;,[99,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;logseq____&quot;,536870922]],[logseq____&quot;^15logseq____&quot;,[99,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870922]],[logseq____&quot;^15logseq____&quot;,[99,logseq____&quot;^Flogseq____&quot;,83,536870922]],[logseq____&quot;^15logseq____&quot;,[99,logseq____&quot;^Xlogseq____&quot;,78,536870922]],[logseq____&quot;^15logseq____&quot;,[99,logseq____&quot;^Vlogseq____&quot;,78,536870922]],[logseq____&quot;^15logseq____&quot;,[99,logseq____&quot;^Ulogseq____&quot;,78,536870922]],[logseq____&quot;^15logseq____&quot;,[99,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a6-0c0e-4e0e-8762-4b6d6104e446logseq____&quot;,536870922]],[logseq____&quot;^15logseq____&quot;,[101,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;### 核心功能\\n\\n1. `SimpleLruZeroPage`：新增一个page\\n2. `SimpleLruReadPage` ：读一个page\\n3. `SimpleLruWritePage` ：写一个pagelogseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[101,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[101,logseq____&quot;^Flogseq____&quot;,104,536870923]],[logseq____&quot;^15logseq____&quot;,[101,logseq____&quot;^Xlogseq____&quot;,27,536870923]],[logseq____&quot;^15logseq____&quot;,[101,logseq____&quot;^Vlogseq____&quot;,27,536870923]],[logseq____&quot;^15logseq____&quot;,[101,logseq____&quot;^Ulogseq____&quot;,27,536870923]],[logseq____&quot;^15logseq____&quot;,[101,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^18logseq____&quot;,3],536870923]],[logseq____&quot;^15logseq____&quot;,[101,logseq____&quot;^Jlogseq____&quot;,[],536870923]],[logseq____&quot;^15logseq____&quot;,[101,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a6-5491-4160-9f44-c8f6df73ee0dlogseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[102,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;### 存储结构\\n\\n与bpm不同，通过slru管理的page，其文件大小固定，一个文件有32个page，一个page有8KB，故一个文件最大为256K。\\n\\n与WAL不同，WAL文件的大小在创建时就已经确定为16M，与WAL文件重用保持一致，而slru的文件，先在内存中产生相应的page，再会去落盘。\\n\\n```C\\n#define SLRU_PAGES_PER_SEGMENT\\t32\\n```logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[102,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[102,logseq____&quot;^Flogseq____&quot;,107,536870923]],[logseq____&quot;^15logseq____&quot;,[102,logseq____&quot;^Xlogseq____&quot;,27,536870923]],[logseq____&quot;^15logseq____&quot;,[102,logseq____&quot;^Vlogseq____&quot;,27,536870923]],[logseq____&quot;^15logseq____&quot;,[102,logseq____&quot;^Ulogseq____&quot;,27,536870923]],[logseq____&quot;^15logseq____&quot;,[102,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^18logseq____&quot;,3],536870923]],[logseq____&quot;^15logseq____&quot;,[102,logseq____&quot;^Jlogseq____&quot;,[],536870923]],[logseq____&quot;^15logseq____&quot;,[102,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-c7b9-4a56-a5a9-f639aed11332logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[103,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;##### 全局 buffer 数组\\n\\n```C\\ntypedef struct SlruSharedData\\n{\\nLWLock\\t   *ControlLock;\\n\\n/* Number of buffers managed by this SLRU structure */\\nint\\t\\t\\tnum_slots;\\n\\n/*\\n* Arrays holding info for each buffer slot.  Page number is undefined\\n* when status is EMPTY, as is page_lru_count.\\n*/\\nchar\\t  **page_buffer;\\nSlruPageStatus *page_status;\\nbool\\t   *page_dirty;\\nint\\t\\t   *page_number;\\nint\\t\\t   *page_lru_count;\\nLWLockPadded *buffer_locks;\\n\\n  XLogRecPtr *group_lsn;\\nint\\t\\t\\tlsn_groups_per_page;\\n\\n/*----------\\n* We mark a page \\logseq____&quot;most recently used\\logseq____&quot; by setting\\n*\\t\\tpage_lru_count[slotno] = ++cur_lru_count;\\n* The oldest page is therefore the one with the highest value of\\n*\\t\\tcur_lru_count - page_lru_count[slotno]\\n* The counts will eventually wrap around, but this calculation still\\n* works as long as no pagelogseq____&apos;s age exceeds INT_MAX counts.\\n*----------\\n*/\\nint\\t\\t\\tcur_lru_count;\\n} SlruSharedData;\\n```\\n\\n从内存结构上看，是一个数组，每个元素代表一个page。同时，记录这些page的使用次数。\\n\\n```C\\npage_lru_count[slotno] = ++cur_lru_count;\\n```\\n\\n同时每个page，都有状态标识，以在刷脏时，确定脏页。实际上这里没有脏页这个选项，因为只有 `valid` 状态的页才有可能是脏页，有包含关系。故在`SlruSharedData` 中使用 `page_dirty` 进行单独标识。\\n\\n```C\\ntypedef enum\\n{\\nSLRU_PAGE_EMPTY,\\t\\t\\t/* buffer is not in use */\\nSLRU_PAGE_READ_IN_PROGRESS, /* page is being read in */\\nSLRU_PAGE_VALID,\\t\\t\\t/* page is valid and not being written */\\nSLRU_PAGE_WRITE_IN_PROGRESS /* page is being written out */\\n} SlruPageStatus;\\n```\\n关于为什么需要记录LSN信息 `group_lsn`：这与 `WAL` 设计有关。对于 `WAL` 而言，无论是同步提交或是异步提交，都需要在对应的 `buffer page` 落盘前落盘,所以 `slru` 也需要满足这样的规则。同时，可能是为了节约内存（节约的内存实在有限），或是减少`WAL flush`的调用次数以增加 `IO` 效率，`slru`的实现中并不记录每个`buffer page`的 `LSN`，而是记录一组 `page` 的 `LSN`，在刷下一个 `page` 前，需要把一组 `page` 中最大的 `LSN` 前的 `WAL` 落盘。而这样的“一组”的长度，就为`lsn_groups_per_page`logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[103,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[103,logseq____&quot;^Flogseq____&quot;,109,536870923]],[logseq____&quot;^15logseq____&quot;,[103,logseq____&quot;^Xlogseq____&quot;,27,536870923]],[logseq____&quot;^15logseq____&quot;,[103,logseq____&quot;^Vlogseq____&quot;,27,536870923]],[logseq____&quot;^15logseq____&quot;,[103,logseq____&quot;^Ulogseq____&quot;,27,536870923]],[logseq____&quot;^15logseq____&quot;,[103,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^18logseq____&quot;,5],536870923]],[logseq____&quot;^15logseq____&quot;,[103,logseq____&quot;^Jlogseq____&quot;,[],536870923]],[logseq____&quot;^15logseq____&quot;,[103,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a6-4b3d-4781-bb8d-029e6215e479logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[104,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;##### 各个进程私有的pointer\\n\\n```C\\n\\n/*\\n* SlruCtlData is an unshared structure that points to the active information\\n* in shared memory.\\n*/\\ntypedef struct SlruCtlData\\n{\\nSlruShared\\tshared;\\n\\n/*\\n* Decide whether a page is \\logseq____&quot;older\\logseq____&quot; for truncation and as a hint for\\n* evicting pages in LRU order.  \\n*/\\nbool\\t\\t(*PagePrecedes) (int, int);\\n\\n/*\\n* Dir is set during SimpleLruInit and does not change thereafter. Since\\n* itlogseq____&apos;s always the same, it doesnlogseq____&apos;t need to be in shared memory.\\n*/\\nchar\\t\\tDir[64];\\n} SlruCtlData;\\n```\\n\\n初始化时，即返回一个`SlruCtlData`。`Dir` 是初始化时的标记，不同模块会填充对应的名称。logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[104,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[104,logseq____&quot;^Flogseq____&quot;,103,536870923]],[logseq____&quot;^15logseq____&quot;,[104,logseq____&quot;^Xlogseq____&quot;,27,536870923]],[logseq____&quot;^15logseq____&quot;,[104,logseq____&quot;^Vlogseq____&quot;,27,536870923]],[logseq____&quot;^15logseq____&quot;,[104,logseq____&quot;^Ulogseq____&quot;,27,536870923]],[logseq____&quot;^15logseq____&quot;,[104,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^18logseq____&quot;,5],536870923]],[logseq____&quot;^15logseq____&quot;,[104,logseq____&quot;^Jlogseq____&quot;,[],536870923]],[logseq____&quot;^15logseq____&quot;,[104,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a6-c92f-4f86-894c-9d59d2d4ff47logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[105,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;本文主要为`SLRU`本身的结构解读。 #SLRU_IMPLEMENTlogseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[105,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[105,logseq____&quot;^Flogseq____&quot;,27,536870923]],[logseq____&quot;^15logseq____&quot;,[105,logseq____&quot;^Xlogseq____&quot;,27,536870923]],[logseq____&quot;^15logseq____&quot;,[105,logseq____&quot;^Vlogseq____&quot;,27,536870923]],[logseq____&quot;^15logseq____&quot;,[105,logseq____&quot;^Ulogseq____&quot;,23,536870923]],[logseq____&quot;^15logseq____&quot;,[105,logseq____&quot;^Ulogseq____&quot;,27,536870923]],[logseq____&quot;^15logseq____&quot;,[105,logseq____&quot;^Hlogseq____&quot;,23,536870923]],[logseq____&quot;^15logseq____&quot;,[105,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-5a0b-43cf-9303-2e28208e303alogseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[106,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;#### 基础函数\\n\\n* 选择一个空slot\\n\\n```C\\n/* Select the slot to re-use when we need a free slot. */\\n/* Control lock must be held at entry, and will be held at exit. */\\nstatic int\\nSlruSelectLRUPage(SlruCtl ctl, int pageno)\\n{\\nfor (;;)\\n# return if we have such a slot\\n# return if we have an empty slot \\logseq____&quot;SLRU_PAGE_EMPTY\\logseq____&quot;\\n# select a lru slot\\n\\t# return it if itlogseq____&apos;s clean. Or\\n\\t# victim it if dirty\\n# loop end -- Itlogseq____&apos;s a very clever design to dealing with corner cases\\n#             such as the victim page being re-dirtied while we wrote it.\\n}\\n```\\n\\n* 记录一个\\logseq____&quot;most recently used\\logseq____&quot;的page，`cur_lru_count++` 并用其赋值 \\n\\n```C\\n#define SlruRecentlyUsed(shared, slotno)\\t\\\\\\ndo { \\\\\\nint\\t\\tnew_lru_count = (shared)-logseq____&gt;cur_lru_count; \\\\\\nif (new_lru_count != (shared)-logseq____&gt;page_lru_count[slotno]) { \\\\\\n\\t(shared)-logseq____&gt;cur_lru_count = ++new_lru_count; \\\\\\n\\t(shared)-logseq____&gt;page_lru_count[slotno] = new_lru_count; \\\\\\n} \\\\\\n} while (0)\\n```\\n\\n* 从磁盘中读取一个 `page`\\n\\n```C\\nSlruPhysicalReadPage\\n{\\n  int\\tsegno = pageno / SLRU_PAGES_PER_SEGMENT;\\n  SlruFileName(ctl, path, segno);\\n\\n  /*\\n   * In a crash-and-restart situation, itlogseq____&apos;s possible for us to receive\\n   * commands to set the commit status of transactions whose bits are in\\n   * already-truncated segments of the commit log\\n   */\\n  fd = OpenTransientFile(path, O_RDONLY | PG_BINARY);\\n  if (fd logseq____&lt; 0 logseq____&amp;logseq____&amp; !InRecovery) ereport()\\n\\n  pg_pread(fd, shared-logseq____&gt;page_buffer[slotno], BLCKSZ, offset)\\n}\\n```\\n\\n* 向磁盘中写入一个 `page`\\n\\n```C\\nSlruPhysicalWritePage\\n{\\n  /* We must flush WAL before flush slru pages */\\n  if (shared-logseq____&gt;group_lsn != NULL)\\n  {\\n      max_lsn = shared-logseq____&gt;group_lsn[lsnindex++];\\n      XLogFlush(max_lsn);\\n  }\\n\\n  SlruFileName(ctl, path, segno);\\n  fd = OpenTransientFile(path, O_RDWR | O_CREAT | PG_BINARY);\\n  pg_pwrite(fd, shared-logseq____&gt;page_buffer[slotno], BLCKSZ, offset)\\n  /* Queue up a sync request for the checkpointer. */\\n  ...\\n}\\n```logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[106,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[106,logseq____&quot;^Flogseq____&quot;,101,536870923]],[logseq____&quot;^15logseq____&quot;,[106,logseq____&quot;^Xlogseq____&quot;,27,536870923]],[logseq____&quot;^15logseq____&quot;,[106,logseq____&quot;^Vlogseq____&quot;,27,536870923]],[logseq____&quot;^15logseq____&quot;,[106,logseq____&quot;^Ulogseq____&quot;,27,536870923]],[logseq____&quot;^15logseq____&quot;,[106,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^18logseq____&quot;,4],536870923]],[logseq____&quot;^15logseq____&quot;,[106,logseq____&quot;^Jlogseq____&quot;,[],536870923]],[logseq____&quot;^15logseq____&quot;,[106,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a6-ed93-4f04-b8c7-4c1eddad5e05logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[107,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;### 简述\\n\\n+ slru用来干什么？\\n  + slru是一个简单的buffer管理模块，simple slru\\n+ 有了buffer pool manager，为什么还要slru？\\n  + bpm管理通用的page，比如heap，vm等\\n  + slru最大的特点就是lru，非常适合处理xid这样，递增的信息。\\n+ 下面的代码分析基于pg15logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[107,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[107,logseq____&quot;^Flogseq____&quot;,105,536870923]],[logseq____&quot;^15logseq____&quot;,[107,logseq____&quot;^Xlogseq____&quot;,27,536870923]],[logseq____&quot;^15logseq____&quot;,[107,logseq____&quot;^Vlogseq____&quot;,27,536870923]],[logseq____&quot;^15logseq____&quot;,[107,logseq____&quot;^Ulogseq____&quot;,27,536870923]],[logseq____&quot;^15logseq____&quot;,[107,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^18logseq____&quot;,3],536870923]],[logseq____&quot;^15logseq____&quot;,[107,logseq____&quot;^Jlogseq____&quot;,[],536870923]],[logseq____&quot;^15logseq____&quot;,[107,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-3515-441d-bdab-f1d6ca653032logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[108,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;#### interface\\n\\n* 新增一个 `page` 到buffer。\\n```C\\n/* Initialize (or reinitialize) a page to zeroes. */\\nint\\nSimpleLruZeroPage(SlruCtl ctl, int pageno)\\n{\\nslotno = SlruSelectLRUPage(ctl, pageno);\\nSlruRecentlyUsed(shared, slotno);\\n\\n# SlruSelectLRUPage may return a in-use page, we must clear it\\nMemSet(shared-logseq____&gt;page_buffer[slotno], 0, BLCKSZ);\\n\\nSimpleLruZeroLSNs(ctl, slotno);\\n}\\n```\\n\\n* 从 `disk` 中读取一个 `page`\\n```C\\n/* Control lock must be held at entry, and will be held at exit. */\\nSimpleLruReadPage\\n{\\n  #infinite loop\\n      slotno = SlruSelectLRUPage(ctl, pageno);\\n      # for in IO slots, just wait\\n      /* update in-memory status */\\n      shared-logseq____&gt;page_number[slotno] = pageno;\\n      shared-logseq____&gt;page_status[slotno] = SLRU_PAGE_READ_IN_PROGRESS;\\n      shared-logseq____&gt;page_dirty[slotno] = false;\\n\\n      /* Acquire per-buffer lock and release control lock */\\n      LWLockAcquire(logseq____&amp;shared-logseq____&gt;buffer_locks[slotno].lock, LW_EXCLUSIVE);\\n      LWLockRelease(shared-logseq____&gt;ControlLock);\\n\\n      ok = SlruPhysicalReadPage(ctl, pageno, slotno);\\n\\n      /* re-acquire control lock */\\n      LWLockAcquire(shared-logseq____&gt;ControlLock, LW_EXCLUSIVE);\\n      # others\\n}\\n```\\n这里的锁设计很特别：\\n1. 在 `SlruSelectLRUPage` 需要获取全局锁\\n2. 在 `SimpleLruReadPage` 中，先初始化内存，再获取 `per-buffer` 锁，同时释放 `ControlLock`\\n\\n在看函数 `SimpleLruZeroPage`\\n```C\\n/* Control lock must be held at entry, and will be held at exit. */\\nSimpleLruZeroPage\\n{\\n  slotno = SlruSelectLRUPage(ctl, pageno);\\n  shared-logseq____&gt;page_number[slotno] = pageno;\\n  shared-logseq____&gt;page_status[slotno] = SLRU_PAGE_VALID;\\n  shared-logseq____&gt;page_dirty[slotno] = true;\\n}\\n```\\n难道，一旦获取 `ControlLock`，即可对任意 `slot` 进行修改？\\n\\n实际上，`SimpleLruReadPage` 读取的 `page`，必须已存在于磁盘（或者经由 `WAL` 来保证）。\\n而 `SimpleLruZeroPage` 所初始化的 `page` 必须不存在。从使用逻辑上保证二者不产生冲突。\\n\\n* SimpleLruWritePage(SlruInternalWritePage)\\n\\n```C\\n/* Control lock must be held at entry, and will be held at exit. */\\nSlruInternalWritePage\\n{\\n  /* If a write is in progress, wait for it to finish */\\n  /* Do nothing if page is not dirty */\\n\\n  /* update in-memory status */\\n  shared-logseq____&gt;page_status[slotno] = SLRU_PAGE_WRITE_IN_PROGRESS;\\n  shared-logseq____&gt;page_dirty[slotno] = false;\\n\\n  /* Acquire per-buffer lock and release control lock */\\n  LWLockAcquire(logseq____&amp;shared-logseq____&gt;buffer_locks[slotno].lock, LW_EXCLUSIVE);\\n  LWLockRelease(shared-logseq____&gt;ControlLock);\\n\\n  SlruPhysicalWritePage(ctl, pageno, slotno, fdata);\\n\\n  /* re-acquire control lock */\\n  LWLockAcquire(shared-logseq____&gt;ControlLock, LW_EXCLUSIVE);\\n\\n  shared-logseq____&gt;page_status[slotno] = SLRU_PAGE_VALID;\\n}\\n```logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[108,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[108,logseq____&quot;^Flogseq____&quot;,106,536870923]],[logseq____&quot;^15logseq____&quot;,[108,logseq____&quot;^Xlogseq____&quot;,27,536870923]],[logseq____&quot;^15logseq____&quot;,[108,logseq____&quot;^Vlogseq____&quot;,27,536870923]],[logseq____&quot;^15logseq____&quot;,[108,logseq____&quot;^Ulogseq____&quot;,27,536870923]],[logseq____&quot;^15logseq____&quot;,[108,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^18logseq____&quot;,4],536870923]],[logseq____&quot;^15logseq____&quot;,[108,logseq____&quot;^Jlogseq____&quot;,[],536870923]],[logseq____&quot;^15logseq____&quot;,[108,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a6-63a5-4272-946c-1639f2ae4f21logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[109,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;####  内存slrulogseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[109,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[109,logseq____&quot;^Flogseq____&quot;,102,536870923]],[logseq____&quot;^15logseq____&quot;,[109,logseq____&quot;^Xlogseq____&quot;,27,536870923]],[logseq____&quot;^15logseq____&quot;,[109,logseq____&quot;^Vlogseq____&quot;,27,536870923]],[logseq____&quot;^15logseq____&quot;,[109,logseq____&quot;^Ulogseq____&quot;,27,536870923]],[logseq____&quot;^15logseq____&quot;,[109,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^18logseq____&quot;,4],536870923]],[logseq____&quot;^15logseq____&quot;,[109,logseq____&quot;^Jlogseq____&quot;,[],536870923]],[logseq____&quot;^15logseq____&quot;,[109,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-8820-40a7-a50a-5b0d50f8c7f4logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[111,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[111,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[111,logseq____&quot;^Flogseq____&quot;,120,536870924]],[logseq____&quot;^15logseq____&quot;,[111,logseq____&quot;^Xlogseq____&quot;,28,536870924]],[logseq____&quot;^15logseq____&quot;,[111,logseq____&quot;^Vlogseq____&quot;,120,536870924]],[logseq____&quot;^15logseq____&quot;,[111,logseq____&quot;^Ulogseq____&quot;,28,536870924]],[logseq____&quot;^15logseq____&quot;,[111,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-4cf5-46b6-a3e3-cd00214627bflogseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[112,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;A notable point is that not all meaningful `xid` are in current manger\\n```\\n/* Bootstrap and frozen XIDs have no parent */\\nif (!TransactionIdIsNormal(xid))\\n\\treturn InvalidTransactionId;\\n```logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[112,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[112,logseq____&quot;^Flogseq____&quot;,119,536870924]],[logseq____&quot;^15logseq____&quot;,[112,logseq____&quot;^Xlogseq____&quot;,28,536870924]],[logseq____&quot;^15logseq____&quot;,[112,logseq____&quot;^Vlogseq____&quot;,119,536870924]],[logseq____&quot;^15logseq____&quot;,[112,logseq____&quot;^Ulogseq____&quot;,28,536870924]],[logseq____&quot;^15logseq____&quot;,[112,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-ae0d-487a-b500-79c78c0995b1logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[113,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;## backgroundlogseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[113,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[113,logseq____&quot;^Flogseq____&quot;,28,536870924]],[logseq____&quot;^15logseq____&quot;,[113,logseq____&quot;^Xlogseq____&quot;,28,536870924]],[logseq____&quot;^15logseq____&quot;,[113,logseq____&quot;^Vlogseq____&quot;,28,536870924]],[logseq____&quot;^15logseq____&quot;,[113,logseq____&quot;^Ulogseq____&quot;,28,536870924]],[logseq____&quot;^15logseq____&quot;,[113,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^18logseq____&quot;,2],536870924]],[logseq____&quot;^15logseq____&quot;,[113,logseq____&quot;^Jlogseq____&quot;,[],536870924]],[logseq____&quot;^15logseq____&quot;,[113,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-331e-4dd4-b1b9-7c1878385b66logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[114,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;page organizationlogseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[114,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[114,logseq____&quot;^Flogseq____&quot;,116,536870924]],[logseq____&quot;^15logseq____&quot;,[114,logseq____&quot;^Xlogseq____&quot;,28,536870924]],[logseq____&quot;^15logseq____&quot;,[114,logseq____&quot;^Vlogseq____&quot;,28,536870924]],[logseq____&quot;^15logseq____&quot;,[114,logseq____&quot;^Ulogseq____&quot;,28,536870924]],[logseq____&quot;^15logseq____&quot;,[114,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-0618-4aeb-b564-8254e8473d31logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[115,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;## lower level designlogseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[115,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[115,logseq____&quot;^Flogseq____&quot;,114,536870924]],[logseq____&quot;^15logseq____&quot;,[115,logseq____&quot;^Xlogseq____&quot;,28,536870924]],[logseq____&quot;^15logseq____&quot;,[115,logseq____&quot;^Vlogseq____&quot;,28,536870924]],[logseq____&quot;^15logseq____&quot;,[115,logseq____&quot;^Ulogseq____&quot;,28,536870924]],[logseq____&quot;^15logseq____&quot;,[115,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^18logseq____&quot;,2],536870924]],[logseq____&quot;^15logseq____&quot;,[115,logseq____&quot;^Jlogseq____&quot;,[],536870924]],[logseq____&quot;^15logseq____&quot;,[115,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-cbb9-458a-a368-b7311161737alogseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[116,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;The main function:logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[116,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[116,logseq____&quot;^Flogseq____&quot;,125,536870924]],[logseq____&quot;^15logseq____&quot;,[116,logseq____&quot;^Xlogseq____&quot;,28,536870924]],[logseq____&quot;^15logseq____&quot;,[116,logseq____&quot;^Vlogseq____&quot;,28,536870924]],[logseq____&quot;^15logseq____&quot;,[116,logseq____&quot;^Ulogseq____&quot;,28,536870924]],[logseq____&quot;^15logseq____&quot;,[116,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-ae0f-4c84-838a-eedb9c74ad81logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[117,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;A notable optimal point is:\\n```C\\nif (*ptr != parent)\\n{\\n\\tAssert(*ptr == InvalidTransactionId);\\n\\t*ptr = parent;\\n\\tSubTransCtl-logseq____&gt;shared-logseq____&gt;page_dirty[slotno] = true;\\n}\\n```\\nIf there is no need to set the parent xid, we can avoid dirtying the buffer.logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[117,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[117,logseq____&quot;^Flogseq____&quot;,123,536870924]],[logseq____&quot;^15logseq____&quot;,[117,logseq____&quot;^Xlogseq____&quot;,28,536870924]],[logseq____&quot;^15logseq____&quot;,[117,logseq____&quot;^Vlogseq____&quot;,123,536870924]],[logseq____&quot;^15logseq____&quot;,[117,logseq____&quot;^Ulogseq____&quot;,28,536870924]],[logseq____&quot;^15logseq____&quot;,[117,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-f460-46dd-88e9-8ffc3a4eabcclogseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[118,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;From from `backend/access/transam/subtrans.c`\\n* Tree like structure\\n\\n#+BEGIN_QUOTE\\nThe pg_subtrans manager is a pg_xact-like manager that stores the parent transaction Id for each transaction\\nA main transaction has a parent of InvalidTransactionId, and each subtransaction has its immediate parent. **The tree can easily be walked from child to parent, but not in the opposite direction.**\\n#+END_QUOTE\\n\\n* No restart or crash recovery restore. But this doesnlogseq____&apos;t mean no disk storage, since we still consider that the `slru` buffer may be full.\\n\\n#+BEGIN_QUOTE\\nwe only need to remember pg_subtrans information for currently-open transactions. Thus, there is no need to preserve data over a crash and restart. During database startup, we simply force the currently-active page of SUBTRANS to zeroes.\\n#+END_QUOTElogseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[118,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[118,logseq____&quot;^Flogseq____&quot;,116,536870924]],[logseq____&quot;^15logseq____&quot;,[118,logseq____&quot;^Xlogseq____&quot;,28,536870924]],[logseq____&quot;^15logseq____&quot;,[118,logseq____&quot;^Vlogseq____&quot;,116,536870924]],[logseq____&quot;^15logseq____&quot;,[118,logseq____&quot;^Ulogseq____&quot;,28,536870924]],[logseq____&quot;^15logseq____&quot;,[118,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-f3a7-4cb2-b314-90652daaec19logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[119,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~`SubTransGetParent`logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[119,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[119,logseq____&quot;^Flogseq____&quot;,123,536870924]],[logseq____&quot;^15logseq____&quot;,[119,logseq____&quot;^Xlogseq____&quot;,28,536870924]],[logseq____&quot;^15logseq____&quot;,[119,logseq____&quot;^Vlogseq____&quot;,28,536870924]],[logseq____&quot;^15logseq____&quot;,[119,logseq____&quot;^Ulogseq____&quot;,28,536870924]],[logseq____&quot;^15logseq____&quot;,[119,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-0a59-4cf5-ad0d-9ac7c5cd1320logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[120,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~`SubTransGetTopmostTransaction`logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[120,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[120,logseq____&quot;^Flogseq____&quot;,119,536870924]],[logseq____&quot;^15logseq____&quot;,[120,logseq____&quot;^Xlogseq____&quot;,28,536870924]],[logseq____&quot;^15logseq____&quot;,[120,logseq____&quot;^Vlogseq____&quot;,28,536870924]],[logseq____&quot;^15logseq____&quot;,[120,logseq____&quot;^Ulogseq____&quot;,28,536870924]],[logseq____&quot;^15logseq____&quot;,[120,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-a83d-4be2-ae65-43528a9e1760logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[121,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;Thinking of [[clog]] , to tell the parent `Xid` of each `Xact`, just store a very large array like:\\n```\\nxid parent_xid[XID_UPPER_LIMIT]\\n```\\nIn clog, two bits are needed to represent the the commit status of a `xid`. Similarly, `sizeof(xid)`(That is 32 bits) is need to represent its parent.logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[121,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[121,logseq____&quot;^Flogseq____&quot;,114,536870924]],[logseq____&quot;^15logseq____&quot;,[121,logseq____&quot;^Xlogseq____&quot;,28,536870924]],[logseq____&quot;^15logseq____&quot;,[121,logseq____&quot;^Vlogseq____&quot;,114,536870924]],[logseq____&quot;^15logseq____&quot;,[121,logseq____&quot;^Ulogseq____&quot;,28,536870924]],[logseq____&quot;^15logseq____&quot;,[121,logseq____&quot;^Ulogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[121,logseq____&quot;^Hlogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[121,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-2bf1-4582-a2c7-232fa2285ce8logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[122,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[122,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[122,logseq____&quot;^Flogseq____&quot;,118,536870924]],[logseq____&quot;^15logseq____&quot;,[122,logseq____&quot;^Xlogseq____&quot;,28,536870924]],[logseq____&quot;^15logseq____&quot;,[122,logseq____&quot;^Vlogseq____&quot;,116,536870924]],[logseq____&quot;^15logseq____&quot;,[122,logseq____&quot;^Ulogseq____&quot;,28,536870924]],[logseq____&quot;^15logseq____&quot;,[122,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-f76b-45bc-8b2e-e76966a9f5ddlogseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[123,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~`SubTransSetParent`logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[123,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[123,logseq____&quot;^Flogseq____&quot;,115,536870924]],[logseq____&quot;^15logseq____&quot;,[123,logseq____&quot;^Xlogseq____&quot;,28,536870924]],[logseq____&quot;^15logseq____&quot;,[123,logseq____&quot;^Vlogseq____&quot;,28,536870924]],[logseq____&quot;^15logseq____&quot;,[123,logseq____&quot;^Ulogseq____&quot;,28,536870924]],[logseq____&quot;^15logseq____&quot;,[123,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-2442-4416-9f5b-88dda8286fe8logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[124,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;From [Official introduction ot Subtransactions](https://www.postgresql.org/docs/current/subxacts.html)\\n#+BEGIN_QUOTE\\nSubtransactions are started inside transactions, allowing large transactions to be broken into smaller units. Subtransactions can commit or abort without affecting their parent transactions, allowing parent transactions to continue. This allows errors to be handled more easily, which is a common application development pattern. The word subtransaction is often abbreviated as **subxact**.\\n#+END_QUOTElogseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[124,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[124,logseq____&quot;^Flogseq____&quot;,113,536870924]],[logseq____&quot;^15logseq____&quot;,[124,logseq____&quot;^Xlogseq____&quot;,28,536870924]],[logseq____&quot;^15logseq____&quot;,[124,logseq____&quot;^Vlogseq____&quot;,28,536870924]],[logseq____&quot;^15logseq____&quot;,[124,logseq____&quot;^Ulogseq____&quot;,28,536870924]],[logseq____&quot;^15logseq____&quot;,[124,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-7293-4fe3-8335-a018ea28e2celogseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[125,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;## high level viewlogseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[125,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[125,logseq____&quot;^Flogseq____&quot;,124,536870924]],[logseq____&quot;^15logseq____&quot;,[125,logseq____&quot;^Xlogseq____&quot;,28,536870924]],[logseq____&quot;^15logseq____&quot;,[125,logseq____&quot;^Vlogseq____&quot;,28,536870924]],[logseq____&quot;^15logseq____&quot;,[125,logseq____&quot;^Ulogseq____&quot;,28,536870924]],[logseq____&quot;^15logseq____&quot;,[125,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^18logseq____&quot;,2],536870924]],[logseq____&quot;^15logseq____&quot;,[125,logseq____&quot;^Jlogseq____&quot;,[],536870924]],[logseq____&quot;^15logseq____&quot;,[125,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-2939-4ae6-86eb-38f58dd30057logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[127,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;Data written to unlogged tables is **not written to the write-ahead log** which makes them considerably **faster** than ordinary tables. However, they are **not crash-safe**: an unlogged **table is automatically truncated** after a crash or unclean shutdown. The contents of an unlogged table are also **not replicated to standby servers**. Any indexes created on an unlogged table are automatically unlogged as well.logseq____&quot;,536870925]],[logseq____&quot;^15logseq____&quot;,[127,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870925]],[logseq____&quot;^15logseq____&quot;,[127,logseq____&quot;^Flogseq____&quot;,79,536870925]],[logseq____&quot;^15logseq____&quot;,[127,logseq____&quot;^Xlogseq____&quot;,79,536870925]],[logseq____&quot;^15logseq____&quot;,[127,logseq____&quot;^Vlogseq____&quot;,79,536870925]],[logseq____&quot;^15logseq____&quot;,[127,logseq____&quot;^Ulogseq____&quot;,79,536870925]],[logseq____&quot;^15logseq____&quot;,[127,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-7601-4d70-9743-84c9620436balogseq____&quot;,536870925]],[logseq____&quot;^15logseq____&quot;,[128,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;If this is specified, any sequences created together with the unlogged table (for identity or serial columns) are also created as unlogged.logseq____&quot;,536870925]],[logseq____&quot;^15logseq____&quot;,[128,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870925]],[logseq____&quot;^15logseq____&quot;,[128,logseq____&quot;^Flogseq____&quot;,127,536870925]],[logseq____&quot;^15logseq____&quot;,[128,logseq____&quot;^Xlogseq____&quot;,79,536870925]],[logseq____&quot;^15logseq____&quot;,[128,logseq____&quot;^Vlogseq____&quot;,79,536870925]],[logseq____&quot;^15logseq____&quot;,[128,logseq____&quot;^Ulogseq____&quot;,79,536870925]],[logseq____&quot;^15logseq____&quot;,[128,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-7aae-4da2-8bc6-95dc31f6541clogseq____&quot;,536870925]],[logseq____&quot;^15logseq____&quot;,[129,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;Data written to unlogged tables is not written to the write-ahead log (see [Chapter 30](https://www.postgresql.org/docs/current/wal.html)), which makes them considerably faster than ordinary tables. However, they are not crash-safe: an unlogged table is automatically truncated after a crash or unclean shutdown. The contents of an unlogged table are also not replicated to standby servers. Any indexes created on an unlogged table are automatically unlogged as well.logseq____&quot;,536870925]],[logseq____&quot;^15logseq____&quot;,[129,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870925]],[logseq____&quot;^15logseq____&quot;,[129,logseq____&quot;^Flogseq____&quot;,128,536870925]],[logseq____&quot;^15logseq____&quot;,[129,logseq____&quot;^Xlogseq____&quot;,79,536870925]],[logseq____&quot;^15logseq____&quot;,[129,logseq____&quot;^Vlogseq____&quot;,79,536870925]],[logseq____&quot;^15logseq____&quot;,[129,logseq____&quot;^Ulogseq____&quot;,79,536870925]],[logseq____&quot;^15logseq____&quot;,[129,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-9f32-4ab6-b4df-af4e17a65331logseq____&quot;,536870925]],[logseq____&quot;^15logseq____&quot;,[130,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;If this is specified, any sequences created together with the unlogged table (for identity or serial columns) are also created as unlogged.logseq____&quot;,536870925]],[logseq____&quot;^15logseq____&quot;,[130,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870925]],[logseq____&quot;^15logseq____&quot;,[130,logseq____&quot;^Flogseq____&quot;,129,536870925]],[logseq____&quot;^15logseq____&quot;,[130,logseq____&quot;^Xlogseq____&quot;,79,536870925]],[logseq____&quot;^15logseq____&quot;,[130,logseq____&quot;^Vlogseq____&quot;,79,536870925]],[logseq____&quot;^15logseq____&quot;,[130,logseq____&quot;^Ulogseq____&quot;,79,536870925]],[logseq____&quot;^15logseq____&quot;,[130,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-5f18-4030-a239-cae3516e7f77logseq____&quot;,536870925]],[logseq____&quot;^15logseq____&quot;,[132,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;4. 标记为脏页，logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[132,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[132,logseq____&quot;^Flogseq____&quot;,146,536870926]],[logseq____&quot;^15logseq____&quot;,[132,logseq____&quot;^Xlogseq____&quot;,26,536870926]],[logseq____&quot;^15logseq____&quot;,[132,logseq____&quot;^Vlogseq____&quot;,136,536870926]],[logseq____&quot;^15logseq____&quot;,[132,logseq____&quot;^Ulogseq____&quot;,26,536870926]],[logseq____&quot;^15logseq____&quot;,[132,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-8fc6-49f8-8223-cca319268b61logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[133,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;仅在写下第（2）个日志前，数据库恰好崩溃，标志位才会被感知。\\n* (该标志位应该没有MVCC，否则会在事务层屏蔽）#TODO\\n* 搜索时，不管这个中间状态\\n* 插入时，如果发现这个中间状态，先在上一层的页插入对应key，以修复这个“崩溃”状态，再继续插入logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[133,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[133,logseq____&quot;^Flogseq____&quot;,145,536870926]],[logseq____&quot;^15logseq____&quot;,[133,logseq____&quot;^Xlogseq____&quot;,26,536870926]],[logseq____&quot;^15logseq____&quot;,[133,logseq____&quot;^Vlogseq____&quot;,149,536870926]],[logseq____&quot;^15logseq____&quot;,[133,logseq____&quot;^Ulogseq____&quot;,4,536870926]],[logseq____&quot;^15logseq____&quot;,[133,logseq____&quot;^Ulogseq____&quot;,26,536870926]],[logseq____&quot;^15logseq____&quot;,[133,logseq____&quot;^Hlogseq____&quot;,4,536870926]],[logseq____&quot;^15logseq____&quot;,[133,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-33d4-4a47-b68c-45b9a93c299flogseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[134,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;一些复杂的操作，需要原子地写下一串WAL记录，但中间状态必须自洽(self-consistent)。这样在回放wal日志时，如果中断，系统还能够正常运行。注意：此时相当于事务回滚，但是其部分更改已经落盘。举例：logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[134,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[134,logseq____&quot;^Flogseq____&quot;,148,536870926]],[logseq____&quot;^15logseq____&quot;,[134,logseq____&quot;^Xlogseq____&quot;,26,536870926]],[logseq____&quot;^15logseq____&quot;,[134,logseq____&quot;^Vlogseq____&quot;,148,536870926]],[logseq____&quot;^15logseq____&quot;,[134,logseq____&quot;^Ulogseq____&quot;,26,536870926]],[logseq____&quot;^15logseq____&quot;,[134,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-7c6b-4cdf-9da3-b68a14f60964logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[135,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;回放第（1）个日志：\\n* 分配一个新页，将元组移动进去\\n* 设置标记位，表示上一层的页没有更新logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[135,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[135,logseq____&quot;^Flogseq____&quot;,138,536870926]],[logseq____&quot;^15logseq____&quot;,[135,logseq____&quot;^Xlogseq____&quot;,26,536870926]],[logseq____&quot;^15logseq____&quot;,[135,logseq____&quot;^Vlogseq____&quot;,149,536870926]],[logseq____&quot;^15logseq____&quot;,[135,logseq____&quot;^Ulogseq____&quot;,26,536870926]],[logseq____&quot;^15logseq____&quot;,[135,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-3da9-4cc5-a2ab-8dc47915089clogseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[136,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;3. 写下WAL日志的逻辑为logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[136,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[136,logseq____&quot;^Flogseq____&quot;,137,536870926]],[logseq____&quot;^15logseq____&quot;,[136,logseq____&quot;^Xlogseq____&quot;,26,536870926]],[logseq____&quot;^15logseq____&quot;,[136,logseq____&quot;^Vlogseq____&quot;,26,536870926]],[logseq____&quot;^15logseq____&quot;,[136,logseq____&quot;^Ulogseq____&quot;,26,536870926]],[logseq____&quot;^15logseq____&quot;,[136,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-d7dc-4f30-816b-f76dc5960eaflogseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[137,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;WAL 包含一个（或一小组）页的**增量更新**的重做信息。\\n  1. 依赖文件系统和硬件的原子写，不可靠！\\n  2. checkpoint，checkpointer后的第一次写全页。通过 checkpoint 留下的 `LSN ` 来判断是否为第一次写logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[137,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[137,logseq____&quot;^Flogseq____&quot;,144,536870926]],[logseq____&quot;^15logseq____&quot;,[137,logseq____&quot;^Xlogseq____&quot;,26,536870926]],[logseq____&quot;^15logseq____&quot;,[137,logseq____&quot;^Vlogseq____&quot;,26,536870926]],[logseq____&quot;^15logseq____&quot;,[137,logseq____&quot;^Ulogseq____&quot;,26,536870926]],[logseq____&quot;^15logseq____&quot;,[137,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-e8a1-45ec-ae8b-9a8743a7d196logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[138,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;但是因为锁，这会形成两个独立的WAL日志。在回放WAL日志时：logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[138,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[138,logseq____&quot;^Flogseq____&quot;,149,536870926]],[logseq____&quot;^15logseq____&quot;,[138,logseq____&quot;^Xlogseq____&quot;,26,536870926]],[logseq____&quot;^15logseq____&quot;,[138,logseq____&quot;^Vlogseq____&quot;,149,536870926]],[logseq____&quot;^15logseq____&quot;,[138,logseq____&quot;^Ulogseq____&quot;,26,536870926]],[logseq____&quot;^15logseq____&quot;,[138,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-35ca-439d-b97b-d47d183b90c5logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[139,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;6. END_CRIT_SECTION，退出logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[139,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[139,logseq____&quot;^Flogseq____&quot;,152,536870926]],[logseq____&quot;^15logseq____&quot;,[139,logseq____&quot;^Xlogseq____&quot;,26,536870926]],[logseq____&quot;^15logseq____&quot;,[139,logseq____&quot;^Vlogseq____&quot;,136,536870926]],[logseq____&quot;^15logseq____&quot;,[139,logseq____&quot;^Ulogseq____&quot;,26,536870926]],[logseq____&quot;^15logseq____&quot;,[139,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-596e-4347-8e3a-d8849d49a7aelogseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[140,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;回放第（2）个日志：\\n* 在上一层的页中新插入一条数据\\n* 清除第（1）个日志中的标记位logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[140,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[140,logseq____&quot;^Flogseq____&quot;,135,536870926]],[logseq____&quot;^15logseq____&quot;,[140,logseq____&quot;^Xlogseq____&quot;,26,536870926]],[logseq____&quot;^15logseq____&quot;,[140,logseq____&quot;^Vlogseq____&quot;,149,536870926]],[logseq____&quot;^15logseq____&quot;,[140,logseq____&quot;^Ulogseq____&quot;,26,536870926]],[logseq____&quot;^15logseq____&quot;,[140,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-d139-4162-8071-6d2caaf234a4logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[141,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;2. START_CRIT_SECTION，发生错误时确保整个数据库能立即重启logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[141,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[141,logseq____&quot;^Flogseq____&quot;,150,536870926]],[logseq____&quot;^15logseq____&quot;,[141,logseq____&quot;^Xlogseq____&quot;,26,536870926]],[logseq____&quot;^15logseq____&quot;,[141,logseq____&quot;^Vlogseq____&quot;,136,536870926]],[logseq____&quot;^15logseq____&quot;,[141,logseq____&quot;^Ulogseq____&quot;,26,536870926]],[logseq____&quot;^15logseq____&quot;,[141,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-1ac7-40df-bf7f-9d192f9019cflogseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[142,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;2. 只有在要写WAL时，才能标记脏页（TODO，为什么？）logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[142,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[142,logseq____&quot;^Flogseq____&quot;,153,536870926]],[logseq____&quot;^15logseq____&quot;,[142,logseq____&quot;^Xlogseq____&quot;,26,536870926]],[logseq____&quot;^15logseq____&quot;,[142,logseq____&quot;^Vlogseq____&quot;,132,536870926]],[logseq____&quot;^15logseq____&quot;,[142,logseq____&quot;^Ulogseq____&quot;,26,536870926]],[logseq____&quot;^15logseq____&quot;,[142,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-fa6f-453c-9845-9c496e9a4eb2logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[143,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;基本思想:logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[143,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[143,logseq____&quot;^Flogseq____&quot;,26,536870926]],[logseq____&quot;^15logseq____&quot;,[143,logseq____&quot;^Xlogseq____&quot;,26,536870926]],[logseq____&quot;^15logseq____&quot;,[143,logseq____&quot;^Vlogseq____&quot;,26,536870926]],[logseq____&quot;^15logseq____&quot;,[143,logseq____&quot;^Ulogseq____&quot;,26,536870926]],[logseq____&quot;^15logseq____&quot;,[143,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-d1ff-48e8-bff6-eee7efc4222clogseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[144,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~`LSN`：刷脏前检查`LSN`对应的日志已经落盘。\\n优势\\n  1. 仅在必要的时候等待`XLOG`的`IO`。（异步`IO`）\\n  2. `LSN`的检查模块只用在 buffer manager 中实现\\n  3. 在WAL回放时，避免相同的日志被重复回放（可重入）。（TODO：full page write是否在另一个层面上保证了可重入）logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[144,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[144,logseq____&quot;^Flogseq____&quot;,143,536870926]],[logseq____&quot;^15logseq____&quot;,[144,logseq____&quot;^Xlogseq____&quot;,26,536870926]],[logseq____&quot;^15logseq____&quot;,[144,logseq____&quot;^Vlogseq____&quot;,26,536870926]],[logseq____&quot;^15logseq____&quot;,[144,logseq____&quot;^Ulogseq____&quot;,26,536870926]],[logseq____&quot;^15logseq____&quot;,[144,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-7561-4447-88cf-46d7201a75b4logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[145,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;标志位通常情况下不可见，因为对 child page 的修改时持有的锁，在两个操作完成后才会释放。logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[145,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[145,logseq____&quot;^Flogseq____&quot;,140,536870926]],[logseq____&quot;^15logseq____&quot;,[145,logseq____&quot;^Xlogseq____&quot;,26,536870926]],[logseq____&quot;^15logseq____&quot;,[145,logseq____&quot;^Vlogseq____&quot;,149,536870926]],[logseq____&quot;^15logseq____&quot;,[145,logseq____&quot;^Ulogseq____&quot;,26,536870926]],[logseq____&quot;^15logseq____&quot;,[145,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-eb4e-4f92-bec5-334b159a7a6alogseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[146,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;3. 在shared buffer上，进行对应的修改logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[146,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[146,logseq____&quot;^Flogseq____&quot;,141,536870926]],[logseq____&quot;^15logseq____&quot;,[146,logseq____&quot;^Xlogseq____&quot;,26,536870926]],[logseq____&quot;^15logseq____&quot;,[146,logseq____&quot;^Vlogseq____&quot;,136,536870926]],[logseq____&quot;^15logseq____&quot;,[146,logseq____&quot;^Ulogseq____&quot;,26,536870926]],[logseq____&quot;^15logseq____&quot;,[146,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-6cfd-4afd-8ce9-3e2a35c6144alogseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[147,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;7. 解锁和unpin （注意顺序）logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[147,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[147,logseq____&quot;^Flogseq____&quot;,139,536870926]],[logseq____&quot;^15logseq____&quot;,[147,logseq____&quot;^Xlogseq____&quot;,26,536870926]],[logseq____&quot;^15logseq____&quot;,[147,logseq____&quot;^Vlogseq____&quot;,136,536870926]],[logseq____&quot;^15logseq____&quot;,[147,logseq____&quot;^Ulogseq____&quot;,26,536870926]],[logseq____&quot;^15logseq____&quot;,[147,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-e143-4a7a-87aa-86ba693679c0logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[148,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;自洽(self-consistent)logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[148,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[148,logseq____&quot;^Flogseq____&quot;,136,536870926]],[logseq____&quot;^15logseq____&quot;,[148,logseq____&quot;^Xlogseq____&quot;,26,536870926]],[logseq____&quot;^15logseq____&quot;,[148,logseq____&quot;^Vlogseq____&quot;,26,536870926]],[logseq____&quot;^15logseq____&quot;,[148,logseq____&quot;^Ulogseq____&quot;,26,536870926]],[logseq____&quot;^15logseq____&quot;,[148,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-6ba8-4d43-8cca-d2dcadb115e0logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[149,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;在btree索引中，页的分裂分为两步（1）分配一个新页（2）在上一层的页(parent page)中新插入一条数据。logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[149,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[149,logseq____&quot;^Flogseq____&quot;,134,536870926]],[logseq____&quot;^15logseq____&quot;,[149,logseq____&quot;^Xlogseq____&quot;,26,536870926]],[logseq____&quot;^15logseq____&quot;,[149,logseq____&quot;^Vlogseq____&quot;,148,536870926]],[logseq____&quot;^15logseq____&quot;,[149,logseq____&quot;^Ulogseq____&quot;,26,536870926]],[logseq____&quot;^15logseq____&quot;,[149,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-28b7-421c-8aab-a3ac7e3c5ba2logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[150,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;1. pin and exclusive-lock the shared bufferlogseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[150,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[150,logseq____&quot;^Flogseq____&quot;,136,536870926]],[logseq____&quot;^15logseq____&quot;,[150,logseq____&quot;^Xlogseq____&quot;,26,536870926]],[logseq____&quot;^15logseq____&quot;,[150,logseq____&quot;^Vlogseq____&quot;,136,536870926]],[logseq____&quot;^15logseq____&quot;,[150,logseq____&quot;^Ulogseq____&quot;,26,536870926]],[logseq____&quot;^15logseq____&quot;,[150,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-3026-4abc-8901-1b92e030664alogseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[151,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;日志在数据页前落盘logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[151,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[151,logseq____&quot;^Flogseq____&quot;,143,536870926]],[logseq____&quot;^15logseq____&quot;,[151,logseq____&quot;^Xlogseq____&quot;,26,536870926]],[logseq____&quot;^15logseq____&quot;,[151,logseq____&quot;^Vlogseq____&quot;,143,536870926]],[logseq____&quot;^15logseq____&quot;,[151,logseq____&quot;^Ulogseq____&quot;,26,536870926]],[logseq____&quot;^15logseq____&quot;,[151,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-6313-46cc-9324-228353fd47c5logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[152,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;5. 使用`XLogBeginInsert` 和 `XLogRegister*` 函数构建WAL，使用返回的`LSN`来更新`page`logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[152,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[152,logseq____&quot;^Flogseq____&quot;,132,536870926]],[logseq____&quot;^15logseq____&quot;,[152,logseq____&quot;^Xlogseq____&quot;,26,536870926]],[logseq____&quot;^15logseq____&quot;,[152,logseq____&quot;^Vlogseq____&quot;,136,536870926]],[logseq____&quot;^15logseq____&quot;,[152,logseq____&quot;^Ulogseq____&quot;,26,536870926]],[logseq____&quot;^15logseq____&quot;,[152,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-17b5-4160-9a31-65e9c039e07alogseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[153,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;1. 必须在WAL日志写入前完成（TODO，为什么？`SyncOneBuffer`）logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[153,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[153,logseq____&quot;^Flogseq____&quot;,132,536870926]],[logseq____&quot;^15logseq____&quot;,[153,logseq____&quot;^Xlogseq____&quot;,26,536870926]],[logseq____&quot;^15logseq____&quot;,[153,logseq____&quot;^Vlogseq____&quot;,132,536870926]],[logseq____&quot;^15logseq____&quot;,[153,logseq____&quot;^Ulogseq____&quot;,26,536870926]],[logseq____&quot;^15logseq____&quot;,[153,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-e2c9-477d-b94e-30b2121f6ce1logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[155,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;## XLogRegisterBlocklogseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[155,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[155,logseq____&quot;^Flogseq____&quot;,166,536870927]],[logseq____&quot;^15logseq____&quot;,[155,logseq____&quot;^Xlogseq____&quot;,25,536870927]],[logseq____&quot;^15logseq____&quot;,[155,logseq____&quot;^Vlogseq____&quot;,25,536870927]],[logseq____&quot;^15logseq____&quot;,[155,logseq____&quot;^Ulogseq____&quot;,25,536870927]],[logseq____&quot;^15logseq____&quot;,[155,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^18logseq____&quot;,2],536870927]],[logseq____&quot;^15logseq____&quot;,[155,logseq____&quot;^Jlogseq____&quot;,[],536870927]],[logseq____&quot;^15logseq____&quot;,[155,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-f2f4-4399-a0cb-4c0ffa4475a4logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[156,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~```\\nvoid\\nXLogRegisterBlock(uint8 block_id, RelFileLocator *rlocator, ForkNumberforknum,\\n                  BlockNumber blknum, Page page, uint8 flags)\\n```logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[156,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[156,logseq____&quot;^Flogseq____&quot;,155,536870927]],[logseq____&quot;^15logseq____&quot;,[156,logseq____&quot;^Xlogseq____&quot;,25,536870927]],[logseq____&quot;^15logseq____&quot;,[156,logseq____&quot;^Vlogseq____&quot;,155,536870927]],[logseq____&quot;^15logseq____&quot;,[156,logseq____&quot;^Ulogseq____&quot;,25,536870927]],[logseq____&quot;^15logseq____&quot;,[156,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-f8b4-4db8-81fd-4d7cbef31858logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[157,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;value we need from parameterslogseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[157,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[157,logseq____&quot;^Flogseq____&quot;,156,536870927]],[logseq____&quot;^15logseq____&quot;,[157,logseq____&quot;^Xlogseq____&quot;,25,536870927]],[logseq____&quot;^15logseq____&quot;,[157,logseq____&quot;^Vlogseq____&quot;,155,536870927]],[logseq____&quot;^15logseq____&quot;,[157,logseq____&quot;^Ulogseq____&quot;,25,536870927]],[logseq____&quot;^15logseq____&quot;,[157,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-f83d-4fc0-840a-d2631c09365clogseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[158,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~```\\nXLogRegisterBuffer\\n  regbuf = logseq____&amp;registered_buffers[block_id];\\n  BufferGetTag(buffer, logseq____&amp;regbuf-logseq____&gt;rlocator, logseq____&amp;regbuf-logseq____&gt;forkno, regbuf-logseq____&gt;block);\\n  regbuf-logseq____&gt;page = BufferGetPage(buffer);\\n  regbuf-logseq____&gt;flags = flags;\\n  regbuf-logseq____&gt;rdata_tail = (XLogRecData *) logseq____&amp;regbuf-logseq____&gt;rdata_head;\\n  regbuf-logseq____&gt;rdata_len = 0;\\n  gbuf-logseq____&gt;rdata_tail = (XLogRecData *) logseq____&amp;regbuf-logseq____&gt;rdata_head;\\n  regbuf-logseq____&gt;rdata_len = 0;\\n```logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[158,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[158,logseq____&quot;^Flogseq____&quot;,161,536870927]],[logseq____&quot;^15logseq____&quot;,[158,logseq____&quot;^Xlogseq____&quot;,25,536870927]],[logseq____&quot;^15logseq____&quot;,[158,logseq____&quot;^Vlogseq____&quot;,166,536870927]],[logseq____&quot;^15logseq____&quot;,[158,logseq____&quot;^Ulogseq____&quot;,24,536870927]],[logseq____&quot;^15logseq____&quot;,[158,logseq____&quot;^Ulogseq____&quot;,25,536870927]],[logseq____&quot;^15logseq____&quot;,[158,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-9e59-409e-ba56-8b6931717759logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[159,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;## XLogRegisterDatalogseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[159,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[159,logseq____&quot;^Flogseq____&quot;,155,536870927]],[logseq____&quot;^15logseq____&quot;,[159,logseq____&quot;^Xlogseq____&quot;,25,536870927]],[logseq____&quot;^15logseq____&quot;,[159,logseq____&quot;^Vlogseq____&quot;,25,536870927]],[logseq____&quot;^15logseq____&quot;,[159,logseq____&quot;^Ulogseq____&quot;,25,536870927]],[logseq____&quot;^15logseq____&quot;,[159,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^18logseq____&quot;,2],536870927]],[logseq____&quot;^15logseq____&quot;,[159,logseq____&quot;^Jlogseq____&quot;,[],536870927]],[logseq____&quot;^15logseq____&quot;,[159,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-b409-4c07-aacb-7b0c5a397465logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[160,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~```\\nXLogRegisterData\\nrdata = logseq____&amp;rdatas[num_rdatas++];\\nrdata-logseq____&gt;data = data;\\nrdata-logseq____&gt;len = len;\\nmainrdata_last-logseq____&gt;next = rdata;\\nmainrdata_last = rdata;\\nmainrdata_len += len;\\n```logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[160,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[160,logseq____&quot;^Flogseq____&quot;,163,536870927]],[logseq____&quot;^15logseq____&quot;,[160,logseq____&quot;^Xlogseq____&quot;,25,536870927]],[logseq____&quot;^15logseq____&quot;,[160,logseq____&quot;^Vlogseq____&quot;,159,536870927]],[logseq____&quot;^15logseq____&quot;,[160,logseq____&quot;^Ulogseq____&quot;,25,536870927]],[logseq____&quot;^15logseq____&quot;,[160,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-9384-43c3-88e8-f22fec4136a7logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[161,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;just to record a bufferlogseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[161,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[161,logseq____&quot;^Flogseq____&quot;,166,536870927]],[logseq____&quot;^15logseq____&quot;,[161,logseq____&quot;^Xlogseq____&quot;,25,536870927]],[logseq____&quot;^15logseq____&quot;,[161,logseq____&quot;^Vlogseq____&quot;,166,536870927]],[logseq____&quot;^15logseq____&quot;,[161,logseq____&quot;^Ulogseq____&quot;,24,536870927]],[logseq____&quot;^15logseq____&quot;,[161,logseq____&quot;^Ulogseq____&quot;,25,536870927]],[logseq____&quot;^15logseq____&quot;,[161,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-72c0-4db5-a824-b4456d4bc1d7logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[162,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;## XLogRegisterBufDatalogseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[162,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[162,logseq____&quot;^Flogseq____&quot;,159,536870927]],[logseq____&quot;^15logseq____&quot;,[162,logseq____&quot;^Xlogseq____&quot;,25,536870927]],[logseq____&quot;^15logseq____&quot;,[162,logseq____&quot;^Vlogseq____&quot;,25,536870927]],[logseq____&quot;^15logseq____&quot;,[162,logseq____&quot;^Ulogseq____&quot;,25,536870927]],[logseq____&quot;^15logseq____&quot;,[162,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^18logseq____&quot;,2],536870927]],[logseq____&quot;^15logseq____&quot;,[162,logseq____&quot;^Jlogseq____&quot;,[],536870927]],[logseq____&quot;^15logseq____&quot;,[162,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-a0a9-4ae6-8004-6e6d508c8583logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[163,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;add record to the main chunklogseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[163,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[163,logseq____&quot;^Flogseq____&quot;,159,536870927]],[logseq____&quot;^15logseq____&quot;,[163,logseq____&quot;^Xlogseq____&quot;,25,536870927]],[logseq____&quot;^15logseq____&quot;,[163,logseq____&quot;^Vlogseq____&quot;,159,536870927]],[logseq____&quot;^15logseq____&quot;,[163,logseq____&quot;^Ulogseq____&quot;,25,536870927]],[logseq____&quot;^15logseq____&quot;,[163,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-8ee7-45c9-bdd7-626ddea2d9e1logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[164,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~```\\nXLogRegisterBufData\\n  regbuf = logseq____&amp;registered_buffers[block_id];\\n  rdata = logseq____&amp;rdatas[num_rdatas++];\\n\\n  rdata-logseq____&gt;data = data;\\n  rdata-logseq____&gt;len = len;\\n\\n  regbuf-logseq____&gt;rdata_tail-logseq____&gt;next = rdata;\\n  regbuf-logseq____&gt;rdata_tail = rdata;\\n  regbuf-logseq____&gt;rdata_len += len;\\n```logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[164,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[164,logseq____&quot;^Flogseq____&quot;,167,536870927]],[logseq____&quot;^15logseq____&quot;,[164,logseq____&quot;^Xlogseq____&quot;,25,536870927]],[logseq____&quot;^15logseq____&quot;,[164,logseq____&quot;^Vlogseq____&quot;,162,536870927]],[logseq____&quot;^15logseq____&quot;,[164,logseq____&quot;^Ulogseq____&quot;,25,536870927]],[logseq____&quot;^15logseq____&quot;,[164,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-63b6-48a4-bc4c-4e08c08a7872logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[165,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;![🖼 wal-record-structure.png](../assets/wal-record-structure.png)logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[165,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[165,logseq____&quot;^Flogseq____&quot;,25,536870927]],[logseq____&quot;^15logseq____&quot;,[165,logseq____&quot;^Xlogseq____&quot;,25,536870927]],[logseq____&quot;^15logseq____&quot;,[165,logseq____&quot;^Vlogseq____&quot;,25,536870927]],[logseq____&quot;^15logseq____&quot;,[165,logseq____&quot;^Ulogseq____&quot;,25,536870927]],[logseq____&quot;^15logseq____&quot;,[165,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-d0d6-411e-9bba-7dec31a01f12logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[166,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;## XLogRegisterBuffer #wallogseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[166,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[166,logseq____&quot;^Flogseq____&quot;,165,536870927]],[logseq____&quot;^15logseq____&quot;,[166,logseq____&quot;^Xlogseq____&quot;,25,536870927]],[logseq____&quot;^15logseq____&quot;,[166,logseq____&quot;^Vlogseq____&quot;,25,536870927]],[logseq____&quot;^15logseq____&quot;,[166,logseq____&quot;^Ulogseq____&quot;,24,536870927]],[logseq____&quot;^15logseq____&quot;,[166,logseq____&quot;^Ulogseq____&quot;,25,536870927]],[logseq____&quot;^15logseq____&quot;,[166,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^18logseq____&quot;,2],536870927]],[logseq____&quot;^15logseq____&quot;,[166,logseq____&quot;^Jlogseq____&quot;,[],536870927]],[logseq____&quot;^15logseq____&quot;,[166,logseq____&quot;^Hlogseq____&quot;,24,536870927]],[logseq____&quot;^15logseq____&quot;,[166,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-0b62-40b6-93a2-9613994b6f42logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[167,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;like `XLogRegisterData` but register with thespecific bufferlogseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[167,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[167,logseq____&quot;^Flogseq____&quot;,162,536870927]],[logseq____&quot;^15logseq____&quot;,[167,logseq____&quot;^Xlogseq____&quot;,25,536870927]],[logseq____&quot;^15logseq____&quot;,[167,logseq____&quot;^Vlogseq____&quot;,162,536870927]],[logseq____&quot;^15logseq____&quot;,[167,logseq____&quot;^Ulogseq____&quot;,25,536870927]],[logseq____&quot;^15logseq____&quot;,[167,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-b7eb-466d-9f57-51289369897dlogseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[169,logseq____&quot;^Klogseq____&quot;,1703413927161,536870928]],[logseq____&quot;^15logseq____&quot;,[169,logseq____&quot;^@logseq____&quot;,false,536870928]],[logseq____&quot;^15logseq____&quot;,[169,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;taglogseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[169,logseq____&quot;^11logseq____&quot;,logseq____&quot;taglogseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[169,logseq____&quot;^Blogseq____&quot;,1703413927161,536870928]],[logseq____&quot;^15logseq____&quot;,[169,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-2410-497b-bb24-628dcbc06ef0logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[170,logseq____&quot;^Klogseq____&quot;,1703413927163,536870928]],[logseq____&quot;^15logseq____&quot;,[170,logseq____&quot;^@logseq____&quot;,false,536870928]],[logseq____&quot;^15logseq____&quot;,[170,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;fsmlogseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[170,logseq____&quot;^11logseq____&quot;,logseq____&quot;fsmlogseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[170,logseq____&quot;^Blogseq____&quot;,1703413927163,536870928]],[logseq____&quot;^15logseq____&quot;,[170,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-30c2-407c-ba09-40d9841e60fdlogseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[171,logseq____&quot;^Klogseq____&quot;,1703413927164,536870928]],[logseq____&quot;^15logseq____&quot;,[171,logseq____&quot;^@logseq____&quot;,false,536870928]],[logseq____&quot;^15logseq____&quot;,[171,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;vmlogseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[171,logseq____&quot;^11logseq____&quot;,logseq____&quot;vmlogseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[171,logseq____&quot;^Blogseq____&quot;,1703413927164,536870928]],[logseq____&quot;^15logseq____&quot;,[171,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-b6e5-4c14-8e0a-aef2b3f78fb2logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[172,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;tag:: WAL\\n\\nlogseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[172,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[172,logseq____&quot;~:block/invalid-propertieslogseq____&quot;,[logseq____&quot;~#setlogseq____&quot;,[]],536870928]],[logseq____&quot;^15logseq____&quot;,[172,logseq____&quot;^Flogseq____&quot;,21,536870928]],[logseq____&quot;^15logseq____&quot;,[172,logseq____&quot;^Xlogseq____&quot;,21,536870928]],[logseq____&quot;^15logseq____&quot;,[172,logseq____&quot;^Vlogseq____&quot;,21,536870928]],[logseq____&quot;^15logseq____&quot;,[172,logseq____&quot;^Ulogseq____&quot;,21,536870928]],[logseq____&quot;^15logseq____&quot;,[172,logseq____&quot;^Ulogseq____&quot;,169,536870928]],[logseq____&quot;^15logseq____&quot;,[172,logseq____&quot;^:logseq____&quot;,true,536870928]],[logseq____&quot;^15logseq____&quot;,[172,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^16logseq____&quot;,logseq____&quot;WALlogseq____&quot;],536870928]],[logseq____&quot;^15logseq____&quot;,[172,logseq____&quot;^Jlogseq____&quot;,[logseq____&quot;^16logseq____&quot;],536870928]],[logseq____&quot;^15logseq____&quot;,[172,logseq____&quot;^4logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^16logseq____&quot;,logseq____&quot;WALlogseq____&quot;],536870928]],[logseq____&quot;^15logseq____&quot;,[172,logseq____&quot;^Hlogseq____&quot;,169,536870928]],[logseq____&quot;^15logseq____&quot;,[172,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-e603-465a-ac7d-f9318ff9b0f6logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[173,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;For heap pages: The three below attributes can specify a concrete pagelogseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[173,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[173,logseq____&quot;^Flogseq____&quot;,183,536870928]],[logseq____&quot;^15logseq____&quot;,[173,logseq____&quot;^Xlogseq____&quot;,21,536870928]],[logseq____&quot;^15logseq____&quot;,[173,logseq____&quot;^Vlogseq____&quot;,183,536870928]],[logseq____&quot;^15logseq____&quot;,[173,logseq____&quot;^Ulogseq____&quot;,21,536870928]],[logseq____&quot;^15logseq____&quot;,[173,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-6cef-490a-a5b3-0c8c10e8684flogseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[174,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;Logically, a `WAL` record must contains the three parts below:logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[174,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[174,logseq____&quot;^Flogseq____&quot;,180,536870928]],[logseq____&quot;^15logseq____&quot;,[174,logseq____&quot;^Xlogseq____&quot;,21,536870928]],[logseq____&quot;^15logseq____&quot;,[174,logseq____&quot;^Vlogseq____&quot;,175,536870928]],[logseq____&quot;^15logseq____&quot;,[174,logseq____&quot;^Ulogseq____&quot;,21,536870928]],[logseq____&quot;^15logseq____&quot;,[174,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-c4fd-4ba1-a35b-b77ccd363282logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[175,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;# wal recordlogseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[175,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[175,logseq____&quot;^Flogseq____&quot;,172,536870928]],[logseq____&quot;^15logseq____&quot;,[175,logseq____&quot;^Xlogseq____&quot;,21,536870928]],[logseq____&quot;^15logseq____&quot;,[175,logseq____&quot;^Vlogseq____&quot;,21,536870928]],[logseq____&quot;^15logseq____&quot;,[175,logseq____&quot;^Ulogseq____&quot;,21,536870928]],[logseq____&quot;^15logseq____&quot;,[175,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^18logseq____&quot;,1],536870928]],[logseq____&quot;^15logseq____&quot;,[175,logseq____&quot;^Jlogseq____&quot;,[],536870928]],[logseq____&quot;^15logseq____&quot;,[175,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-6368-424e-9c3c-aafb41166166logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[176,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~`relfilelocator`: which relationlogseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[176,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[176,logseq____&quot;^Flogseq____&quot;,173,536870928]],[logseq____&quot;^15logseq____&quot;,[176,logseq____&quot;^Xlogseq____&quot;,21,536870928]],[logseq____&quot;^15logseq____&quot;,[176,logseq____&quot;^Vlogseq____&quot;,183,536870928]],[logseq____&quot;^15logseq____&quot;,[176,logseq____&quot;^Ulogseq____&quot;,21,536870928]],[logseq____&quot;^15logseq____&quot;,[176,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-0340-4dbd-89ba-4c7bdd0b9d32logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[177,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;![wal-record-structure.png](../assets/wal-record-structure.png)logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[177,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[177,logseq____&quot;^Flogseq____&quot;,180,536870928]],[logseq____&quot;^15logseq____&quot;,[177,logseq____&quot;^Xlogseq____&quot;,21,536870928]],[logseq____&quot;^15logseq____&quot;,[177,logseq____&quot;^Vlogseq____&quot;,180,536870928]],[logseq____&quot;^15logseq____&quot;,[177,logseq____&quot;^Ulogseq____&quot;,21,536870928]],[logseq____&quot;^15logseq____&quot;,[177,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-286c-4327-b558-18eb42984eddlogseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[178,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~`forknumber`: type -- that is #vm, #fsm or main datalogseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[178,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[178,logseq____&quot;^Flogseq____&quot;,181,536870928]],[logseq____&quot;^15logseq____&quot;,[178,logseq____&quot;^Xlogseq____&quot;,21,536870928]],[logseq____&quot;^15logseq____&quot;,[178,logseq____&quot;^Vlogseq____&quot;,183,536870928]],[logseq____&quot;^15logseq____&quot;,[178,logseq____&quot;^Ulogseq____&quot;,21,536870928]],[logseq____&quot;^15logseq____&quot;,[178,logseq____&quot;^Ulogseq____&quot;,170,536870928]],[logseq____&quot;^15logseq____&quot;,[178,logseq____&quot;^Ulogseq____&quot;,171,536870928]],[logseq____&quot;^15logseq____&quot;,[178,logseq____&quot;^Hlogseq____&quot;,170,536870928]],[logseq____&quot;^15logseq____&quot;,[178,logseq____&quot;^Hlogseq____&quot;,171,536870928]],[logseq____&quot;^15logseq____&quot;,[178,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-d1a5-4e27-893c-492ad232d16blogseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[179,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;The way to modify the page\\nlogseq.order-list-type:: numberlogseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[179,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[179,logseq____&quot;^Flogseq____&quot;,182,536870928]],[logseq____&quot;^15logseq____&quot;,[179,logseq____&quot;^Xlogseq____&quot;,21,536870928]],[logseq____&quot;^15logseq____&quot;,[179,logseq____&quot;^Vlogseq____&quot;,174,536870928]],[logseq____&quot;^15logseq____&quot;,[179,logseq____&quot;^Ulogseq____&quot;,21,536870928]],[logseq____&quot;^15logseq____&quot;,[179,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;~:logseq.order-list-typelogseq____&quot;,logseq____&quot;numberlogseq____&quot;],536870928]],[logseq____&quot;^15logseq____&quot;,[179,logseq____&quot;^Jlogseq____&quot;,[logseq____&quot;^1logseq____&gt;logseq____&quot;],536870928]],[logseq____&quot;^15logseq____&quot;,[179,logseq____&quot;^4logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^1logseq____&gt;logseq____&quot;,logseq____&quot;numberlogseq____&quot;],536870928]],[logseq____&quot;^15logseq____&quot;,[179,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-4be1-4d17-bac3-7080c03d2eeelogseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[180,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;high level glance\\nid:: 65831e78-968c-418d-a401-f9a4afdd1587logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[180,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[180,logseq____&quot;^Flogseq____&quot;,175,536870928]],[logseq____&quot;^15logseq____&quot;,[180,logseq____&quot;^Xlogseq____&quot;,21,536870928]],[logseq____&quot;^15logseq____&quot;,[180,logseq____&quot;^Vlogseq____&quot;,175,536870928]],[logseq____&quot;^15logseq____&quot;,[180,logseq____&quot;^Ulogseq____&quot;,21,536870928]],[logseq____&quot;^15logseq____&quot;,[180,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^19logseq____&quot;,logseq____&quot;65831e78-968c-418d-a401-f9a4afdd1587logseq____&quot;],536870928]],[logseq____&quot;^15logseq____&quot;,[180,logseq____&quot;^Jlogseq____&quot;,[logseq____&quot;^19logseq____&quot;],536870928]],[logseq____&quot;^15logseq____&quot;,[180,logseq____&quot;^4logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^19logseq____&quot;,logseq____&quot;65831e78-968c-418d-a401-f9a4afdd1587logseq____&quot;],536870928]],[logseq____&quot;^15logseq____&quot;,[180,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65831e78-968c-418d-a401-f9a4afdd1587logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[181,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~`block number`: page offsetlogseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[181,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[181,logseq____&quot;^Flogseq____&quot;,176,536870928]],[logseq____&quot;^15logseq____&quot;,[181,logseq____&quot;^Xlogseq____&quot;,21,536870928]],[logseq____&quot;^15logseq____&quot;,[181,logseq____&quot;^Vlogseq____&quot;,183,536870928]],[logseq____&quot;^15logseq____&quot;,[181,logseq____&quot;^Ulogseq____&quot;,21,536870928]],[logseq____&quot;^15logseq____&quot;,[181,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-d923-4341-a3a1-7ec927dc6fb5logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[182,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;The kind of `WAL`. Different kinds of `WAL` have different modification methods\\nlogseq.order-list-type:: numberlogseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[182,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[182,logseq____&quot;^Flogseq____&quot;,185,536870928]],[logseq____&quot;^15logseq____&quot;,[182,logseq____&quot;^Xlogseq____&quot;,21,536870928]],[logseq____&quot;^15logseq____&quot;,[182,logseq____&quot;^Vlogseq____&quot;,174,536870928]],[logseq____&quot;^15logseq____&quot;,[182,logseq____&quot;^Ulogseq____&quot;,21,536870928]],[logseq____&quot;^15logseq____&quot;,[182,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^1logseq____&gt;logseq____&quot;,logseq____&quot;numberlogseq____&quot;],536870928]],[logseq____&quot;^15logseq____&quot;,[182,logseq____&quot;^Jlogseq____&quot;,[logseq____&quot;^1logseq____&gt;logseq____&quot;],536870928]],[logseq____&quot;^15logseq____&quot;,[182,logseq____&quot;^4logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^1logseq____&gt;logseq____&quot;,logseq____&quot;numberlogseq____&quot;],536870928]],[logseq____&quot;^15logseq____&quot;,[182,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-2c2d-4b55-8954-e2fe8991d145logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[183,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;Unique page IDlogseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[183,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[183,logseq____&quot;^Flogseq____&quot;,174,536870928]],[logseq____&quot;^15logseq____&quot;,[183,logseq____&quot;^Xlogseq____&quot;,21,536870928]],[logseq____&quot;^15logseq____&quot;,[183,logseq____&quot;^Vlogseq____&quot;,175,536870928]],[logseq____&quot;^15logseq____&quot;,[183,logseq____&quot;^Ulogseq____&quot;,21,536870928]],[logseq____&quot;^15logseq____&quot;,[183,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-1e09-46a8-a011-08b4136dcb94logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[184,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;See [[wal-insert]] for how the unique id is recordlogseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[184,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[184,logseq____&quot;^Flogseq____&quot;,183,536870928]],[logseq____&quot;^15logseq____&quot;,[184,logseq____&quot;^Xlogseq____&quot;,21,536870928]],[logseq____&quot;^15logseq____&quot;,[184,logseq____&quot;^Vlogseq____&quot;,175,536870928]],[logseq____&quot;^15logseq____&quot;,[184,logseq____&quot;^Ulogseq____&quot;,21,536870928]],[logseq____&quot;^15logseq____&quot;,[184,logseq____&quot;^Ulogseq____&quot;,25,536870928]],[logseq____&quot;^15logseq____&quot;,[184,logseq____&quot;^Hlogseq____&quot;,25,536870928]],[logseq____&quot;^15logseq____&quot;,[184,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-e727-4783-89bb-3aa7dc8e2ee3logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[185,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;Which page to modify.(An unique ID, See [[block]]  and [[relfilelocator]] )\\nlogseq.order-list-type:: numberlogseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[185,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[185,logseq____&quot;^Flogseq____&quot;,174,536870928]],[logseq____&quot;^15logseq____&quot;,[185,logseq____&quot;^Xlogseq____&quot;,21,536870928]],[logseq____&quot;^15logseq____&quot;,[185,logseq____&quot;^Vlogseq____&quot;,174,536870928]],[logseq____&quot;^15logseq____&quot;,[185,logseq____&quot;^Ulogseq____&quot;,21,536870928]],[logseq____&quot;^15logseq____&quot;,[185,logseq____&quot;^Ulogseq____&quot;,43,536870928]],[logseq____&quot;^15logseq____&quot;,[185,logseq____&quot;^Ulogseq____&quot;,77,536870928]],[logseq____&quot;^15logseq____&quot;,[185,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^1logseq____&gt;logseq____&quot;,logseq____&quot;numberlogseq____&quot;],536870928]],[logseq____&quot;^15logseq____&quot;,[185,logseq____&quot;^Jlogseq____&quot;,[logseq____&quot;^1logseq____&gt;logseq____&quot;],536870928]],[logseq____&quot;^15logseq____&quot;,[185,logseq____&quot;^4logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^1logseq____&gt;logseq____&quot;,logseq____&quot;numberlogseq____&quot;],536870928]],[logseq____&quot;^15logseq____&quot;,[185,logseq____&quot;^Hlogseq____&quot;,43,536870928]],[logseq____&quot;^15logseq____&quot;,[185,logseq____&quot;^Hlogseq____&quot;,77,536870928]],[logseq____&quot;^15logseq____&quot;,[185,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-efba-48cc-8051-1d11f9e0fe4clogseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[187,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;logseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[187,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^17logseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[187,logseq____&quot;^Flogseq____&quot;,24,536870929]],[logseq____&quot;^15logseq____&quot;,[187,logseq____&quot;^Xlogseq____&quot;,24,536870929]],[logseq____&quot;^15logseq____&quot;,[187,logseq____&quot;^Vlogseq____&quot;,24,536870929]],[logseq____&quot;^15logseq____&quot;,[187,logseq____&quot;^Ulogseq____&quot;,24,536870929]],[logseq____&quot;^15logseq____&quot;,[187,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658808a7-0f95-4c0e-90ba-47b429a2af88logseq____&quot;,536870929]]]]]]"</script>
 <script>window.logseq_state="{:ui/theme \"light\", :ui/radix-color :blue, :config {\"local\" {:feature/enable-whiteboards? false, :shortcuts {}, :default-templates {:journals \"\"}, :feature/enable-journals? false, :query/views {:pprint (fn [r] [:pre.code (pprint r)])}, :editor/preferred-pasting-file? false, :macros {}, :shortcut/doc-mode-enter-for-new-block? false, :favorites [\"Contents\" \"multixact\" \"wal-structure\"], :ui/show-empty-bullets? false, :file/name-format :triple-lowbar, :preferred-workflow :now, :publishing/all-pages-public? true, :ui/show-brackets? false, :ref/default-open-blocks-level 2, :feature/enable-block-timestamps? false, :start-of-week 6, :ref/linked-references-collapsed-threshold 50, :outliner/block-title-collapse-enabled? false, :commands [], :ui/show-full-blocks? false, :export/bullet-indentation :two-spaces, :meta/version 1, :hidden [], :default-queries {:journals [{:title \"🔨 NOW\", :query [:find (pull ?h [*]) :in $ ?start ?today :where [?h :block/marker ?marker] [(contains? #{\"NOW\" \"DOING\"} ?marker)] [?h :block/page ?p] [?p :block/journal? true] [?p :block/journal-day ?d] [(>= ?d ?start)] [(<= ?d ?today)]], :inputs [:14d :today], :result-transform (fn [result] (sort-by (fn [h] (get h :block/priority \"Z\")) result)), :group-by-page? false, :collapsed? false} {:title \"📅 NEXT\", :query [:find (pull ?h [*]) :in $ ?start ?next :where [?h :block/marker ?marker] [(contains? #{\"NOW\" \"LATER\" \"TODO\"} ?marker)] [?h :block/page ?p] [?p :block/journal? true] [?p :block/journal-day ?d] [(> ?d ?start)] [(< ?d ?next)]], :inputs [:today :7d-after], :group-by-page? false, :collapsed? false}]}, :ui/auto-expand-block-refs? false, :ui/enable-tooltip? true, :query/result-transforms {:sort-by-priority (fn [result] (sort-by (fn [h] (get h :block/priority \"Z\")) result))}, :property-pages/enabled? true, :block/content-max-length 10000, :ui/show-command-doc? true, :feature/enable-search-remove-accents? true, :default-home {:page \"Contents\"}}}}"</script>
 <script type="text/javascript">// Single Page Apps for GitHub Pages
      // https://github.com/rafgraph/spa-github-pages
      // Copyright (c) 2016 Rafael Pedicini, licensed under the MIT License
      // ----------------------------------------------------------------------
      // This script checks to see if a redirect is present in the query string
      // and converts it back into the correct url and adds it to the
      // browser's history using window.history.replaceState(...),
      // which won't cause the browser to attempt to load the new url.
      // When the single page app is loaded further down in this file,
      // the correct url will be waiting in the browser's history for
      // the single page app to route accordingly.
      (function(l) {
        if (l.search) {
          var q = {};
          l.search.slice(1).split('&').forEach(function(v) {
            var a = v.split('=');
            q[a[0]] = a.slice(1).join('=').replace(/~and~/g, '&');
          });
          if (q.p !== undefined) {
            window.history.replaceState(null, null,
              l.pathname.slice(0, -1) + (q.p || '') +
              (q.q ? ('?' + q.q) : '') +
              l.hash
            );
          }
        }
      }(window.location))</script>
 <script src="static/js/main.js"></script>
 <script src="static/js/interact.min.js"></script>
 <script src="static/js/highlight.min.js"></script>
 <script src="static/js/katex.min.js"></script>
 <script src="static/js/html2canvas.min.js"></script>
 <script src="static/js/code-editor.js"></script>
 <script src="static/js/custom.js"></script>
</body>
