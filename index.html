<!DOCTYPE html>
<head><meta charset="utf-8"></meta>
 <meta content="minimum-scale=1, initial-scale=1, width=device-width, shrink-to-fit=no" name="viewport"></meta>
 <link type="text/css" href="static/css/tabler-icons.min.css" rel="stylesheet"></link>
 <link type="text/css" href="static/css/style.css" rel="stylesheet"></link>
 <link type="text/css" href="static/css/custom.css" rel="stylesheet"></link>
 <link type="text/css" href="static/css/export.css" rel="stylesheet"></link>
 <link href="static/img/logo.png" type="image/png" rel="shortcut icon"></link>
 <link href="static/img/logo.png" sizes="192x192" rel="shortcut icon"></link>
 <link href="static/img/logo.png" rel="apple-touch-icon"></link>
 <meta name="apple-mobile-web-app-title"></meta>
 <meta name="apple-mobile-web-app-capable" content="yes"></meta>
 <meta name="apple-touch-fullscreen" content="yes"></meta>
 <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"></meta>
 <meta name="mobile-web-app-capable" content="yes"></meta>
 <meta property="og:title"></meta>
 <meta content="site" property="og:type"></meta>
  <meta content="static/img/logo.png" property="og:image"></meta>
 <meta property="og:description"></meta>
 <title></title>
 <meta property="og:site_name"></meta>
 <meta></meta>
</head>
 <body><div id="root"></div>
 <script>window.logseq_db="[logseq____&quot;~#datascript/DBlogseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;~:schemalogseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;~:ast/versionlogseq____&quot;,[logseq____&quot;^ logseq____&quot;],logseq____&quot;~:file/contentlogseq____&quot;,[logseq____&quot;^ logseq____&quot;],logseq____&quot;~:block/properties-text-valueslogseq____&quot;,[logseq____&quot;^ logseq____&quot;],logseq____&quot;~:block/aliaslogseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;~:db/valueTypelogseq____&quot;,logseq____&quot;~:db.type/reflogseq____&quot;,logseq____&quot;~:db/cardinalitylogseq____&quot;,logseq____&quot;~:db.cardinality/manylogseq____&quot;],logseq____&quot;~:block/pre-block?logseq____&quot;,[logseq____&quot;^ logseq____&quot;],logseq____&quot;~:block/uuidlogseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;~:db/uniquelogseq____&quot;,logseq____&quot;~:db.unique/identitylogseq____&quot;],logseq____&quot;~:block/prioritylogseq____&quot;,[logseq____&quot;^ logseq____&quot;],logseq____&quot;~:block/propertieslogseq____&quot;,[logseq____&quot;^ logseq____&quot;],logseq____&quot;~:block/journal?logseq____&quot;,[logseq____&quot;^ logseq____&quot;],logseq____&quot;~:block/namespacelogseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^6logseq____&quot;,logseq____&quot;^7logseq____&quot;],logseq____&quot;~:block/updated-atlogseq____&quot;,[logseq____&quot;^ logseq____&quot;],logseq____&quot;~:block/repeated?logseq____&quot;,[logseq____&quot;^ logseq____&quot;],logseq____&quot;~:db/typelogseq____&quot;,[logseq____&quot;^ logseq____&quot;],logseq____&quot;~:file/handlelogseq____&quot;,[logseq____&quot;^ logseq____&quot;],logseq____&quot;~:block/leftlogseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^6logseq____&quot;,logseq____&quot;^7logseq____&quot;,logseq____&quot;~:db/indexlogseq____&quot;,true],logseq____&quot;~:block/refslogseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^6logseq____&quot;,logseq____&quot;^7logseq____&quot;,logseq____&quot;^8logseq____&quot;,logseq____&quot;^9logseq____&quot;],logseq____&quot;~:block/scheduledlogseq____&quot;,[logseq____&quot;^ logseq____&quot;],logseq____&quot;~:block/properties-orderlogseq____&quot;,[logseq____&quot;^ logseq____&quot;],logseq____&quot;~:block/created-atlogseq____&quot;,[logseq____&quot;^ logseq____&quot;],logseq____&quot;~:block/deadlinelogseq____&quot;,[logseq____&quot;^ logseq____&quot;],logseq____&quot;~:block/collapsed?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^Glogseq____&quot;,true],logseq____&quot;~:block/journal-daylogseq____&quot;,[logseq____&quot;^ logseq____&quot;],logseq____&quot;~:block/formatlogseq____&quot;,[logseq____&quot;^ logseq____&quot;],logseq____&quot;~:block/tagslogseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^6logseq____&quot;,logseq____&quot;^7logseq____&quot;,logseq____&quot;^8logseq____&quot;,logseq____&quot;^9logseq____&quot;],logseq____&quot;~:block/contentlogseq____&quot;,[logseq____&quot;^ logseq____&quot;],logseq____&quot;~:recent/pageslogseq____&quot;,[logseq____&quot;^ logseq____&quot;],logseq____&quot;~:block/macroslogseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^6logseq____&quot;,logseq____&quot;^7logseq____&quot;,logseq____&quot;^8logseq____&quot;,logseq____&quot;^9logseq____&quot;],logseq____&quot;~:db/identlogseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^logseq____&lt;logseq____&quot;,logseq____&quot;^=logseq____&quot;],logseq____&quot;~:block/path-refslogseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^6logseq____&quot;,logseq____&quot;^7logseq____&quot;,logseq____&quot;^8logseq____&quot;,logseq____&quot;^9logseq____&quot;],logseq____&quot;~:block/parentlogseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^6logseq____&quot;,logseq____&quot;^7logseq____&quot;,logseq____&quot;^Glogseq____&quot;,true],logseq____&quot;~:block/typelogseq____&quot;,[logseq____&quot;^ logseq____&quot;],logseq____&quot;~:block/pagelogseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^6logseq____&quot;,logseq____&quot;^7logseq____&quot;,logseq____&quot;^Glogseq____&quot;,true],logseq____&quot;~:block/namelogseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^logseq____&lt;logseq____&quot;,logseq____&quot;^=logseq____&quot;],logseq____&quot;~:file/pathlogseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^logseq____&lt;logseq____&quot;,logseq____&quot;^=logseq____&quot;],logseq____&quot;~:block/filelogseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^6logseq____&quot;,logseq____&quot;^7logseq____&quot;],logseq____&quot;~:block/markerlogseq____&quot;,[logseq____&quot;^ logseq____&quot;],logseq____&quot;~:block/original-namelogseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^logseq____&lt;logseq____&quot;,logseq____&quot;^=logseq____&quot;],logseq____&quot;~:schema/versionlogseq____&quot;,[logseq____&quot;^ logseq____&quot;]],logseq____&quot;~:datomslogseq____&quot;,[logseq____&quot;~#listlogseq____&quot;,[[logseq____&quot;~#datascript/Datomlogseq____&quot;,[1,logseq____&quot;^12logseq____&quot;,2,536870913]],[logseq____&quot;^15logseq____&quot;,[2,logseq____&quot;^@logseq____&quot;,false,536870914]],[logseq____&quot;^15logseq____&quot;,[2,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;cardlogseq____&quot;,536870913]],[logseq____&quot;^15logseq____&quot;,[2,logseq____&quot;^11logseq____&quot;,logseq____&quot;cardlogseq____&quot;,536870913]],[logseq____&quot;^15logseq____&quot;,[2,logseq____&quot;^;logseq____&quot;,logseq____&quot;~ucc817d1d-54e1-4cc0-9f46-d3bcc5db9f26logseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[3,logseq____&quot;^@logseq____&quot;,false,536870914]],[logseq____&quot;^15logseq____&quot;,[3,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;canceledlogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[3,logseq____&quot;^11logseq____&quot;,logseq____&quot;CANCELEDlogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[3,logseq____&quot;^;logseq____&quot;,logseq____&quot;~ub5c9c149-3d22-49a1-b491-1f6151e18a29logseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[4,logseq____&quot;^@logseq____&quot;,false,536870914]],[logseq____&quot;^15logseq____&quot;,[4,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;todologseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[4,logseq____&quot;^11logseq____&quot;,logseq____&quot;TODOlogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[4,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-4c58-4dd2-9cf7-a37e869c084dlogseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[5,logseq____&quot;^@logseq____&quot;,false,536870914]],[logseq____&quot;^15logseq____&quot;,[5,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;nowlogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[5,logseq____&quot;^11logseq____&quot;,logseq____&quot;NOWlogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[5,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u2756bf29-63e2-486c-bdf2-b88665f0ec3dlogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[6,logseq____&quot;^@logseq____&quot;,false,536870914]],[logseq____&quot;^15logseq____&quot;,[6,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;laterlogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[6,logseq____&quot;^11logseq____&quot;,logseq____&quot;LATERlogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[6,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u9e211e36-6878-4885-ab40-7ee7a404ac89logseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[7,logseq____&quot;^@logseq____&quot;,false,536870914]],[logseq____&quot;^15logseq____&quot;,[7,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;donelogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[7,logseq____&quot;^11logseq____&quot;,logseq____&quot;DONElogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[7,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u0db02725-4d7a-4482-9baa-2c3a92406d2elogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[8,logseq____&quot;^@logseq____&quot;,false,536870914]],[logseq____&quot;^15logseq____&quot;,[8,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;doinglogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[8,logseq____&quot;^11logseq____&quot;,logseq____&quot;DOINGlogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[8,logseq____&quot;^;logseq____&quot;,logseq____&quot;~uef5f5018-dd10-45e7-85a9-d1e4d9399b92logseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[9,logseq____&quot;^@logseq____&quot;,false,536870914]],[logseq____&quot;^15logseq____&quot;,[9,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;in-progresslogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[9,logseq____&quot;^11logseq____&quot;,logseq____&quot;IN-PROGRESSlogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[9,logseq____&quot;^;logseq____&quot;,logseq____&quot;~ua01bf7fc-f977-42ea-95b1-d5a7bd30752elogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[10,logseq____&quot;^@logseq____&quot;,false,536870914]],[logseq____&quot;^15logseq____&quot;,[10,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;clogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[10,logseq____&quot;^11logseq____&quot;,logseq____&quot;Clogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[10,logseq____&quot;^;logseq____&quot;,logseq____&quot;~ub6d5c618-d5cc-4760-86af-dfabd1041b4clogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[11,logseq____&quot;^@logseq____&quot;,false,536870914]],[logseq____&quot;^15logseq____&quot;,[11,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;blogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[11,logseq____&quot;^11logseq____&quot;,logseq____&quot;Blogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[11,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u8f95282e-99e3-446c-b8e0-91c422bd7102logseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[12,logseq____&quot;^@logseq____&quot;,false,536870914]],[logseq____&quot;^15logseq____&quot;,[12,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;contentslogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[12,logseq____&quot;^11logseq____&quot;,logseq____&quot;contentslogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[12,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9d-a4a0-43b7-bd76-2c5fa6a92ca1logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[13,logseq____&quot;^@logseq____&quot;,false,536870914]],[logseq____&quot;^15logseq____&quot;,[13,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;waitinglogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[13,logseq____&quot;^11logseq____&quot;,logseq____&quot;WAITINGlogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[13,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u26bd52e6-9826-41d8-89ce-15d31129c9dalogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[14,logseq____&quot;^@logseq____&quot;,false,536870914]],[logseq____&quot;^15logseq____&quot;,[14,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;favoriteslogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[14,logseq____&quot;^11logseq____&quot;,logseq____&quot;Favoriteslogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[14,logseq____&quot;^;logseq____&quot;,logseq____&quot;~ucc8f73b5-9af7-4f3b-a45e-2980b1ecfc96logseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[15,logseq____&quot;^@logseq____&quot;,false,536870914]],[logseq____&quot;^15logseq____&quot;,[15,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;alogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[15,logseq____&quot;^11logseq____&quot;,logseq____&quot;Alogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[15,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u2f57cedd-d820-432c-8b58-184d4c5f98aalogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[16,logseq____&quot;^@logseq____&quot;,false,536870914]],[logseq____&quot;^15logseq____&quot;,[16,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;cancelledlogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[16,logseq____&quot;^11logseq____&quot;,logseq____&quot;CANCELLEDlogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[16,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u18c2c508-bd61-4310-ad32-d67e7eb4620dlogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[17,logseq____&quot;^@logseq____&quot;,false,536870914]],[logseq____&quot;^15logseq____&quot;,[17,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;waitlogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[17,logseq____&quot;^11logseq____&quot;,logseq____&quot;WAITlogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[17,logseq____&quot;^;logseq____&quot;,logseq____&quot;~uda271487-b519-4541-bfdb-496f5f8744e3logseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[21,logseq____&quot;^Klogseq____&quot;,1703517341933,536870917]],[logseq____&quot;^15logseq____&quot;,[21,logseq____&quot;^@logseq____&quot;,false,536870917]],[logseq____&quot;^15logseq____&quot;,[21,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;wal-structurelogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[21,logseq____&quot;^11logseq____&quot;,logseq____&quot;wal-structurelogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[21,logseq____&quot;^Blogseq____&quot;,1703517341933,536870917]],[logseq____&quot;^15logseq____&quot;,[21,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-0245-4d7a-9f02-b36687d038ddlogseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[22,logseq____&quot;^Klogseq____&quot;,1703517341929,536870917]],[logseq____&quot;^15logseq____&quot;,[22,logseq____&quot;^@logseq____&quot;,false,536870917]],[logseq____&quot;^15logseq____&quot;,[22,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;multixactlogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[22,logseq____&quot;^11logseq____&quot;,logseq____&quot;multixactlogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[22,logseq____&quot;^Blogseq____&quot;,1703517341929,536870917]],[logseq____&quot;^15logseq____&quot;,[22,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-36d5-433f-a557-678cbb971388logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[23,logseq____&quot;^Klogseq____&quot;,1703517341926,536870917]],[logseq____&quot;^15logseq____&quot;,[23,logseq____&quot;^@logseq____&quot;,false,536870917]],[logseq____&quot;^15logseq____&quot;,[23,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;slru_implementlogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[23,logseq____&quot;^11logseq____&quot;,logseq____&quot;SLRU_IMPLEMENTlogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[23,logseq____&quot;^Blogseq____&quot;,1703517341926,536870917]],[logseq____&quot;^15logseq____&quot;,[23,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-ceed-4359-8c48-b5ff7edfb7bblogseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[24,logseq____&quot;^Klogseq____&quot;,1703517341929,536870917]],[logseq____&quot;^15logseq____&quot;,[24,logseq____&quot;^@logseq____&quot;,false,536870917]],[logseq____&quot;^15logseq____&quot;,[24,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;transamlogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[24,logseq____&quot;^11logseq____&quot;,logseq____&quot;transamlogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[24,logseq____&quot;^Blogseq____&quot;,1703517341929,536870917]],[logseq____&quot;^15logseq____&quot;,[24,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-d410-4573-a724-9a663599707dlogseq____&quot;,536870925]],[logseq____&quot;^15logseq____&quot;,[25,logseq____&quot;^Klogseq____&quot;,1703517341930,536870917]],[logseq____&quot;^15logseq____&quot;,[25,logseq____&quot;^@logseq____&quot;,false,536870917]],[logseq____&quot;^15logseq____&quot;,[25,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;wallogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[25,logseq____&quot;^11logseq____&quot;,logseq____&quot;wallogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[25,logseq____&quot;^Blogseq____&quot;,1703517341930,536870917]],[logseq____&quot;^15logseq____&quot;,[25,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-e009-494d-b49c-671bbc15acbblogseq____&quot;,536870930]],[logseq____&quot;^15logseq____&quot;,[26,logseq____&quot;^Klogseq____&quot;,1703517341932,536870917]],[logseq____&quot;^15logseq____&quot;,[26,logseq____&quot;^@logseq____&quot;,false,536870917]],[logseq____&quot;^15logseq____&quot;,[26,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;wal-insertlogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[26,logseq____&quot;^11logseq____&quot;,logseq____&quot;wal-insertlogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[26,logseq____&quot;^Blogseq____&quot;,1703517341932,536870917]],[logseq____&quot;^15logseq____&quot;,[26,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-1dc1-4322-a478-40098e149d3alogseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[27,logseq____&quot;^Klogseq____&quot;,1703517341931,536870917]],[logseq____&quot;^15logseq____&quot;,[27,logseq____&quot;^@logseq____&quot;,false,536870917]],[logseq____&quot;^15logseq____&quot;,[27,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;wal-basiclogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[27,logseq____&quot;^11logseq____&quot;,logseq____&quot;wal-basiclogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[27,logseq____&quot;^Blogseq____&quot;,1703517341931,536870917]],[logseq____&quot;^15logseq____&quot;,[27,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-9303-4114-a594-b432c7a24feflogseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[28,logseq____&quot;^Klogseq____&quot;,1703517341927,536870917]],[logseq____&quot;^15logseq____&quot;,[28,logseq____&quot;^@logseq____&quot;,false,536870917]],[logseq____&quot;^15logseq____&quot;,[28,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;slrulogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[28,logseq____&quot;^11logseq____&quot;,logseq____&quot;slrulogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[28,logseq____&quot;^Blogseq____&quot;,1703517341927,536870917]],[logseq____&quot;^15logseq____&quot;,[28,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-ef2b-439d-a2ac-0eed1b19de50logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[29,logseq____&quot;^Klogseq____&quot;,1703517341928,536870917]],[logseq____&quot;^15logseq____&quot;,[29,logseq____&quot;^@logseq____&quot;,false,536870917]],[logseq____&quot;^15logseq____&quot;,[29,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;subtransactionlogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[29,logseq____&quot;^11logseq____&quot;,logseq____&quot;subtransactionlogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[29,logseq____&quot;^Blogseq____&quot;,1703517341928,536870917]],[logseq____&quot;^15logseq____&quot;,[29,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-21b1-4b46-be28-deb7dee5e1cflogseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[30,logseq____&quot;^Klogseq____&quot;,1703517341927,536870917]],[logseq____&quot;^15logseq____&quot;,[30,logseq____&quot;^@logseq____&quot;,false,536870917]],[logseq____&quot;^15logseq____&quot;,[30,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;cloglogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[30,logseq____&quot;^11logseq____&quot;,logseq____&quot;cloglogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[30,logseq____&quot;^Blogseq____&quot;,1703517341927,536870917]],[logseq____&quot;^15logseq____&quot;,[30,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-becf-4923-a7bb-06454a7e1ba6logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[31,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;TODO The remained [[clog]] setting flag partslogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[31,logseq____&quot;^Ologseq____&quot;,logseq____&quot;~:markdownlogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[31,logseq____&quot;^Flogseq____&quot;,34,536870917]],[logseq____&quot;^15logseq____&quot;,[31,logseq____&quot;^10logseq____&quot;,logseq____&quot;TODOlogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[31,logseq____&quot;^Xlogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[31,logseq____&quot;^Vlogseq____&quot;,46,536870917]],[logseq____&quot;^15logseq____&quot;,[31,logseq____&quot;^Ulogseq____&quot;,4,536870917]],[logseq____&quot;^15logseq____&quot;,[31,logseq____&quot;^Ulogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[31,logseq____&quot;^Ulogseq____&quot;,30,536870917]],[logseq____&quot;^15logseq____&quot;,[31,logseq____&quot;^Hlogseq____&quot;,4,536870917]],[logseq____&quot;^15logseq____&quot;,[31,logseq____&quot;^Hlogseq____&quot;,30,536870917]],[logseq____&quot;^15logseq____&quot;,[31,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9d-21fb-4576-a789-16abb6ca6585logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[32,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;⚡️ [[transam]]logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[32,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[32,logseq____&quot;^Flogseq____&quot;,49,536870917]],[logseq____&quot;^15logseq____&quot;,[32,logseq____&quot;^Xlogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[32,logseq____&quot;^Vlogseq____&quot;,40,536870917]],[logseq____&quot;^15logseq____&quot;,[32,logseq____&quot;^Ulogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[32,logseq____&quot;^Ulogseq____&quot;,23,536870917]],[logseq____&quot;^15logseq____&quot;,[32,logseq____&quot;^Ulogseq____&quot;,24,536870917]],[logseq____&quot;^15logseq____&quot;,[32,logseq____&quot;^Hlogseq____&quot;,24,536870917]],[logseq____&quot;^15logseq____&quot;,[32,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9d-fd6b-4621-a24a-43a7112d5e47logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[33,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;[[wal-basic]]logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[33,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[33,logseq____&quot;^Flogseq____&quot;,36,536870917]],[logseq____&quot;^15logseq____&quot;,[33,logseq____&quot;^Xlogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[33,logseq____&quot;^Vlogseq____&quot;,36,536870917]],[logseq____&quot;^15logseq____&quot;,[33,logseq____&quot;^Ulogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[33,logseq____&quot;^Ulogseq____&quot;,25,536870917]],[logseq____&quot;^15logseq____&quot;,[33,logseq____&quot;^Ulogseq____&quot;,27,536870917]],[logseq____&quot;^15logseq____&quot;,[33,logseq____&quot;^Hlogseq____&quot;,27,536870917]],[logseq____&quot;^15logseq____&quot;,[33,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9d-cf83-4024-9f23-fd2147f1b9f6logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[34,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;TODO The upper level to decide visibility. May be in [[transam]] ?\\n:LOGBOOK:\\nCLOCK: [2023-12-24 Sun 23:14:31]--[2023-12-24 Sun 23:14:31] =logseq____&gt;  00:00:00\\nCLOCK: [2023-12-24 Sun 23:14:32]--[2023-12-24 Sun 23:14:33] =logseq____&gt;  00:00:01\\nCLOCK: [2023-12-24 Sun 23:14:35]--[2023-12-24 Sun 23:14:35] =logseq____&gt;  00:00:00\\nCLOCK: [2023-12-24 Sun 23:14:36]--[2023-12-24 Sun 23:14:37] =logseq____&gt;  00:00:01\\nCLOCK: [2023-12-24 Sun 23:14:41]--[2023-12-24 Sun 23:14:42] =logseq____&gt;  00:00:01\\nCLOCK: [2023-12-24 Sun 23:14:43]--[2023-12-24 Sun 23:14:43] =logseq____&gt;  00:00:00\\nCLOCK: [2023-12-24 Sun 23:14:44]--[2023-12-24 Sun 23:14:45] =logseq____&gt;  00:00:01\\n:END:logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[34,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[34,logseq____&quot;^Flogseq____&quot;,46,536870917]],[logseq____&quot;^15logseq____&quot;,[34,logseq____&quot;^10logseq____&quot;,logseq____&quot;TODOlogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[34,logseq____&quot;^Xlogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[34,logseq____&quot;^Vlogseq____&quot;,46,536870917]],[logseq____&quot;^15logseq____&quot;,[34,logseq____&quot;^Ulogseq____&quot;,4,536870917]],[logseq____&quot;^15logseq____&quot;,[34,logseq____&quot;^Ulogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[34,logseq____&quot;^Ulogseq____&quot;,24,536870917]],[logseq____&quot;^15logseq____&quot;,[34,logseq____&quot;^Hlogseq____&quot;,4,536870917]],[logseq____&quot;^15logseq____&quot;,[34,logseq____&quot;^Hlogseq____&quot;,24,536870917]],[logseq____&quot;^15logseq____&quot;,[34,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9d-8bc0-44a8-a773-c3fc2c239b2blogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[35,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[35,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[35,logseq____&quot;^Flogseq____&quot;,39,536870917]],[logseq____&quot;^15logseq____&quot;,[35,logseq____&quot;^Xlogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[35,logseq____&quot;^Vlogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[35,logseq____&quot;^Ulogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[35,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9d-51ef-44c1-9576-bf934134511dlogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[36,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;⏳️ [[wal]]logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[36,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[36,logseq____&quot;^Flogseq____&quot;,40,536870917]],[logseq____&quot;^15logseq____&quot;,[36,logseq____&quot;^Xlogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[36,logseq____&quot;^Vlogseq____&quot;,39,536870917]],[logseq____&quot;^15logseq____&quot;,[36,logseq____&quot;^Ulogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[36,logseq____&quot;^Ulogseq____&quot;,25,536870917]],[logseq____&quot;^15logseq____&quot;,[36,logseq____&quot;^Hlogseq____&quot;,25,536870917]],[logseq____&quot;^15logseq____&quot;,[36,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9d-828a-4cff-9a9d-59ce88bbde00logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[37,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;TODO move `pgvector` into the blog logseq____&lt;img src=\\logseq____&quot;https://raw.githubusercontent.com/logseq/logseq/master/resources/icons/logseq.png\\logseq____&quot; alt=\\logseq____&quot;logseq\\logseq____&quot; style=\\logseq____&quot;max-height:1em;width:auto;height:auto;display:inline-block\\logseq____&quot; /logseq____&gt;logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[37,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[37,logseq____&quot;^Flogseq____&quot;,38,536870917]],[logseq____&quot;^15logseq____&quot;,[37,logseq____&quot;^10logseq____&quot;,logseq____&quot;TODOlogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[37,logseq____&quot;^Xlogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[37,logseq____&quot;^Vlogseq____&quot;,46,536870917]],[logseq____&quot;^15logseq____&quot;,[37,logseq____&quot;^Ulogseq____&quot;,4,536870917]],[logseq____&quot;^15logseq____&quot;,[37,logseq____&quot;^Ulogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[37,logseq____&quot;^Hlogseq____&quot;,4,536870917]],[logseq____&quot;^15logseq____&quot;,[37,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9d-52b1-4fb8-b924-2974ff7b799elogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[38,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;TODO move`hash join into` the blog logseq____&lt;img src=\\logseq____&quot;https://raw.githubusercontent.com/logseq/logseq/master/resources/icons/logseq.png\\logseq____&quot; alt=\\logseq____&quot;logseq\\logseq____&quot; style=\\logseq____&quot;max-height:1em;width:auto;height:auto;display:inline-block\\logseq____&quot; /logseq____&gt;logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[38,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[38,logseq____&quot;^Flogseq____&quot;,31,536870917]],[logseq____&quot;^15logseq____&quot;,[38,logseq____&quot;^10logseq____&quot;,logseq____&quot;TODOlogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[38,logseq____&quot;^Xlogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[38,logseq____&quot;^Vlogseq____&quot;,46,536870917]],[logseq____&quot;^15logseq____&quot;,[38,logseq____&quot;^Ulogseq____&quot;,4,536870917]],[logseq____&quot;^15logseq____&quot;,[38,logseq____&quot;^Ulogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[38,logseq____&quot;^Hlogseq____&quot;,4,536870917]],[logseq____&quot;^15logseq____&quot;,[38,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9d-5938-46d3-9eee-f7e184117477logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[39,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;🧬 transactionslogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[39,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[39,logseq____&quot;^Flogseq____&quot;,46,536870917]],[logseq____&quot;^15logseq____&quot;,[39,logseq____&quot;^Xlogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[39,logseq____&quot;^Vlogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[39,logseq____&quot;^Ulogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[39,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9d-f7cf-42cc-8f09-9594d74524bclogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[40,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;🔗 [[SLRU_IMPLEMENT]]logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[40,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[40,logseq____&quot;^Flogseq____&quot;,39,536870917]],[logseq____&quot;^15logseq____&quot;,[40,logseq____&quot;^Xlogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[40,logseq____&quot;^Vlogseq____&quot;,39,536870917]],[logseq____&quot;^15logseq____&quot;,[40,logseq____&quot;^Ulogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[40,logseq____&quot;^Ulogseq____&quot;,23,536870917]],[logseq____&quot;^15logseq____&quot;,[40,logseq____&quot;^Hlogseq____&quot;,23,536870917]],[logseq____&quot;^15logseq____&quot;,[40,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9d-e2e8-4496-ba36-5c4bde1c0ab0logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[41,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;[[slru]]logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[41,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[41,logseq____&quot;^Flogseq____&quot;,40,536870917]],[logseq____&quot;^15logseq____&quot;,[41,logseq____&quot;^Xlogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[41,logseq____&quot;^Vlogseq____&quot;,40,536870917]],[logseq____&quot;^15logseq____&quot;,[41,logseq____&quot;^Ulogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[41,logseq____&quot;^Ulogseq____&quot;,23,536870917]],[logseq____&quot;^15logseq____&quot;,[41,logseq____&quot;^Ulogseq____&quot;,28,536870917]],[logseq____&quot;^15logseq____&quot;,[41,logseq____&quot;^Hlogseq____&quot;,28,536870917]],[logseq____&quot;^15logseq____&quot;,[41,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9d-833c-4b18-beae-bb8fa44da68blogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[42,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[42,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[42,logseq____&quot;^Flogseq____&quot;,44,536870917]],[logseq____&quot;^15logseq____&quot;,[42,logseq____&quot;^Xlogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[42,logseq____&quot;^Vlogseq____&quot;,36,536870917]],[logseq____&quot;^15logseq____&quot;,[42,logseq____&quot;^Ulogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[42,logseq____&quot;^Ulogseq____&quot;,25,536870917]],[logseq____&quot;^15logseq____&quot;,[42,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9d-378b-4f7b-a8d3-2bda7e7ee528logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[43,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;[[wal-insert]]logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[43,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[43,logseq____&quot;^Flogseq____&quot;,33,536870917]],[logseq____&quot;^15logseq____&quot;,[43,logseq____&quot;^Xlogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[43,logseq____&quot;^Vlogseq____&quot;,36,536870917]],[logseq____&quot;^15logseq____&quot;,[43,logseq____&quot;^Ulogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[43,logseq____&quot;^Ulogseq____&quot;,25,536870917]],[logseq____&quot;^15logseq____&quot;,[43,logseq____&quot;^Ulogseq____&quot;,26,536870917]],[logseq____&quot;^15logseq____&quot;,[43,logseq____&quot;^Hlogseq____&quot;,26,536870917]],[logseq____&quot;^15logseq____&quot;,[43,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9d-53fe-403a-b186-5f0b90187c7alogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[44,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;[[wal-structure]]logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[44,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[44,logseq____&quot;^Flogseq____&quot;,43,536870917]],[logseq____&quot;^15logseq____&quot;,[44,logseq____&quot;^Xlogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[44,logseq____&quot;^Vlogseq____&quot;,36,536870917]],[logseq____&quot;^15logseq____&quot;,[44,logseq____&quot;^Ulogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[44,logseq____&quot;^Ulogseq____&quot;,21,536870917]],[logseq____&quot;^15logseq____&quot;,[44,logseq____&quot;^Ulogseq____&quot;,25,536870917]],[logseq____&quot;^15logseq____&quot;,[44,logseq____&quot;^Hlogseq____&quot;,21,536870917]],[logseq____&quot;^15logseq____&quot;,[44,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9d-916b-40be-a8f9-95ccc32998f4logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[45,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;📔 [[clog]]logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[45,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[45,logseq____&quot;^Flogseq____&quot;,41,536870917]],[logseq____&quot;^15logseq____&quot;,[45,logseq____&quot;^Xlogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[45,logseq____&quot;^Vlogseq____&quot;,40,536870917]],[logseq____&quot;^15logseq____&quot;,[45,logseq____&quot;^Ulogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[45,logseq____&quot;^Ulogseq____&quot;,23,536870917]],[logseq____&quot;^15logseq____&quot;,[45,logseq____&quot;^Ulogseq____&quot;,30,536870917]],[logseq____&quot;^15logseq____&quot;,[45,logseq____&quot;^Hlogseq____&quot;,30,536870917]],[logseq____&quot;^15logseq____&quot;,[45,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9d-935d-4513-8c5b-99de0bee11a0logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[46,logseq____&quot;^Mlogseq____&quot;,true,536870917]],[logseq____&quot;^15logseq____&quot;,[46,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;What to do next?\\ncollapsed:: truelogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[46,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[46,logseq____&quot;^Flogseq____&quot;,48,536870917]],[logseq____&quot;^15logseq____&quot;,[46,logseq____&quot;^Xlogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[46,logseq____&quot;^Vlogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[46,logseq____&quot;^Ulogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[46,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;],536870917]],[logseq____&quot;^15logseq____&quot;,[46,logseq____&quot;^Jlogseq____&quot;,[],536870917]],[logseq____&quot;^15logseq____&quot;,[46,logseq____&quot;^4logseq____&quot;,[logseq____&quot;^ logseq____&quot;],536870917]],[logseq____&quot;^15logseq____&quot;,[46,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9d-7336-4455-a36c-5355a1ad3ad1logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[47,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;👨‍👧‍👦 [[subtransaction]]logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[47,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[47,logseq____&quot;^Flogseq____&quot;,45,536870917]],[logseq____&quot;^15logseq____&quot;,[47,logseq____&quot;^Xlogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[47,logseq____&quot;^Vlogseq____&quot;,40,536870917]],[logseq____&quot;^15logseq____&quot;,[47,logseq____&quot;^Ulogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[47,logseq____&quot;^Ulogseq____&quot;,23,536870917]],[logseq____&quot;^15logseq____&quot;,[47,logseq____&quot;^Ulogseq____&quot;,29,536870917]],[logseq____&quot;^15logseq____&quot;,[47,logseq____&quot;^Hlogseq____&quot;,29,536870917]],[logseq____&quot;^15logseq____&quot;,[47,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9d-36c0-43f2-afcc-0b0a268159f2logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[48,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;See [[TODO]] for known problemslogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[48,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[48,logseq____&quot;^Flogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[48,logseq____&quot;^Xlogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[48,logseq____&quot;^Vlogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[48,logseq____&quot;^Ulogseq____&quot;,4,536870917]],[logseq____&quot;^15logseq____&quot;,[48,logseq____&quot;^Ulogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[48,logseq____&quot;^Hlogseq____&quot;,4,536870917]],[logseq____&quot;^15logseq____&quot;,[48,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9d-85af-4bf9-aa46-71bc95d2cdf8logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[49,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;🔓️ [[multixact]]logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[49,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[49,logseq____&quot;^Flogseq____&quot;,47,536870917]],[logseq____&quot;^15logseq____&quot;,[49,logseq____&quot;^Xlogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[49,logseq____&quot;^Vlogseq____&quot;,40,536870917]],[logseq____&quot;^15logseq____&quot;,[49,logseq____&quot;^Ulogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[49,logseq____&quot;^Ulogseq____&quot;,22,536870917]],[logseq____&quot;^15logseq____&quot;,[49,logseq____&quot;^Ulogseq____&quot;,23,536870917]],[logseq____&quot;^15logseq____&quot;,[49,logseq____&quot;^Hlogseq____&quot;,22,536870917]],[logseq____&quot;^15logseq____&quot;,[49,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9d-0c53-474d-aadf-df89b4160342logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[51,logseq____&quot;^Klogseq____&quot;,1703517341993,536870918]],[logseq____&quot;^15logseq____&quot;,[51,logseq____&quot;^@logseq____&quot;,false,536870918]],[logseq____&quot;^15logseq____&quot;,[51,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;blocklogseq____&quot;,536870918]],[logseq____&quot;^15logseq____&quot;,[51,logseq____&quot;^11logseq____&quot;,logseq____&quot;blocklogseq____&quot;,536870918]],[logseq____&quot;^15logseq____&quot;,[51,logseq____&quot;^Blogseq____&quot;,1703517341993,536870918]],[logseq____&quot;^15logseq____&quot;,[51,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-88f2-4d93-ba16-e3833f296165logseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[52,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;Each data file (heap or index) is divided into `postgres` disk blocks, the blocks are numbered sequentially, 0 to 0xFFFFFFFE.logseq____&quot;,536870918]],[logseq____&quot;^15logseq____&quot;,[52,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870918]],[logseq____&quot;^15logseq____&quot;,[52,logseq____&quot;^Flogseq____&quot;,51,536870918]],[logseq____&quot;^15logseq____&quot;,[52,logseq____&quot;^Xlogseq____&quot;,51,536870918]],[logseq____&quot;^15logseq____&quot;,[52,logseq____&quot;^Vlogseq____&quot;,51,536870918]],[logseq____&quot;^15logseq____&quot;,[52,logseq____&quot;^Ulogseq____&quot;,51,536870918]],[logseq____&quot;^15logseq____&quot;,[52,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9d-ed7a-4e7b-a294-4aa2ce214261logseq____&quot;,536870918]],[logseq____&quot;^15logseq____&quot;,[53,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~```C\\ntypedef uint32 BlockNumber;\\n#define InvalidBlockNumber\\t\\t((BlockNumber) 0xFFFFFFFF)\\n#define MaxBlockNumber\\t\\t\\t((BlockNumber) 0xFFFFFFFE)\\n```logseq____&quot;,536870918]],[logseq____&quot;^15logseq____&quot;,[53,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870918]],[logseq____&quot;^15logseq____&quot;,[53,logseq____&quot;^Flogseq____&quot;,52,536870918]],[logseq____&quot;^15logseq____&quot;,[53,logseq____&quot;^Xlogseq____&quot;,51,536870918]],[logseq____&quot;^15logseq____&quot;,[53,logseq____&quot;^Vlogseq____&quot;,51,536870918]],[logseq____&quot;^15logseq____&quot;,[53,logseq____&quot;^Ulogseq____&quot;,51,536870918]],[logseq____&quot;^15logseq____&quot;,[53,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9d-01f9-4ab0-9e0d-9e32b74c2f1elogseq____&quot;,536870918]],[logseq____&quot;^15logseq____&quot;,[54,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;So one relation can have $32T$ storage sizelogseq____&quot;,536870918]],[logseq____&quot;^15logseq____&quot;,[54,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870918]],[logseq____&quot;^15logseq____&quot;,[54,logseq____&quot;^Flogseq____&quot;,53,536870918]],[logseq____&quot;^15logseq____&quot;,[54,logseq____&quot;^Xlogseq____&quot;,51,536870918]],[logseq____&quot;^15logseq____&quot;,[54,logseq____&quot;^Vlogseq____&quot;,51,536870918]],[logseq____&quot;^15logseq____&quot;,[54,logseq____&quot;^Ulogseq____&quot;,51,536870918]],[logseq____&quot;^15logseq____&quot;,[54,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9d-8541-44a2-b8bd-5065b9edb088logseq____&quot;,536870918]],[logseq____&quot;^15logseq____&quot;,[55,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;$$4294967294( blocks) * 8(one block is 8K) / 1024 / 1024/ 1024 = 32T$$logseq____&quot;,536870918]],[logseq____&quot;^15logseq____&quot;,[55,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870918]],[logseq____&quot;^15logseq____&quot;,[55,logseq____&quot;^Flogseq____&quot;,54,536870918]],[logseq____&quot;^15logseq____&quot;,[55,logseq____&quot;^Xlogseq____&quot;,51,536870918]],[logseq____&quot;^15logseq____&quot;,[55,logseq____&quot;^Vlogseq____&quot;,54,536870918]],[logseq____&quot;^15logseq____&quot;,[55,logseq____&quot;^Ulogseq____&quot;,51,536870918]],[logseq____&quot;^15logseq____&quot;,[55,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9d-8198-4057-98c5-538a0d05959flogseq____&quot;,536870918]],[logseq____&quot;^15logseq____&quot;,[56,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;logseq____&quot;,536870918]],[logseq____&quot;^15logseq____&quot;,[56,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870918]],[logseq____&quot;^15logseq____&quot;,[56,logseq____&quot;^Flogseq____&quot;,54,536870918]],[logseq____&quot;^15logseq____&quot;,[56,logseq____&quot;^Xlogseq____&quot;,51,536870918]],[logseq____&quot;^15logseq____&quot;,[56,logseq____&quot;^Vlogseq____&quot;,51,536870918]],[logseq____&quot;^15logseq____&quot;,[56,logseq____&quot;^Ulogseq____&quot;,51,536870918]],[logseq____&quot;^15logseq____&quot;,[56,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9d-6020-4f41-bf5d-4e556c91d3f7logseq____&quot;,536870918]],[logseq____&quot;^15logseq____&quot;,[58,logseq____&quot;^Klogseq____&quot;,1703517342153,536870919]],[logseq____&quot;^15logseq____&quot;,[58,logseq____&quot;^@logseq____&quot;,false,536870919]],[logseq____&quot;^15logseq____&quot;,[58,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;+end_importantlogseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[58,logseq____&quot;^11logseq____&quot;,logseq____&quot;+END_IMPORTANTlogseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[58,logseq____&quot;^Blogseq____&quot;,1703517342153,536870919]],[logseq____&quot;^15logseq____&quot;,[58,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-3763-444b-aaab-f2a4d8a1dd49logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[59,logseq____&quot;^Klogseq____&quot;,1703517342154,536870919]],[logseq____&quot;^15logseq____&quot;,[59,logseq____&quot;^@logseq____&quot;,false,536870919]],[logseq____&quot;^15logseq____&quot;,[59,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;+begin_importantlogseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[59,logseq____&quot;^11logseq____&quot;,logseq____&quot;+BEGIN_IMPORTANTlogseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[59,logseq____&quot;^Blogseq____&quot;,1703517342154,536870919]],[logseq____&quot;^15logseq____&quot;,[59,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-103b-4fef-b4f5-20861fe9c439logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[60,logseq____&quot;^Klogseq____&quot;,1703517342158,536870919]],[logseq____&quot;^15logseq____&quot;,[60,logseq____&quot;^@logseq____&quot;,false,536870919]],[logseq____&quot;^15logseq____&quot;,[60,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;6589991b-a89e-4b6f-991a-3e75cbc6538blogseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[60,logseq____&quot;^11logseq____&quot;,logseq____&quot;6589991b-a89e-4b6f-991a-3e75cbc6538blogseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[60,logseq____&quot;^Blogseq____&quot;,1703517342158,536870919]],[logseq____&quot;^15logseq____&quot;,[60,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-35f2-40f1-9895-fb1f3b03ecbblogseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[61,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;Clog also supports group lsn to enhance the efficiency\\nid:: 658994e9-09a2-4b11-a960-f08770e30d01logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[61,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[61,logseq____&quot;^Flogseq____&quot;,84,536870919]],[logseq____&quot;^15logseq____&quot;,[61,logseq____&quot;^Xlogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[61,logseq____&quot;^Vlogseq____&quot;,75,536870919]],[logseq____&quot;^15logseq____&quot;,[61,logseq____&quot;^Ulogseq____&quot;,25,536870919]],[logseq____&quot;^15logseq____&quot;,[61,logseq____&quot;^Ulogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[61,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;~:idlogseq____&quot;,logseq____&quot;658994e9-09a2-4b11-a960-f08770e30d01logseq____&quot;],536870919]],[logseq____&quot;^15logseq____&quot;,[61,logseq____&quot;^Jlogseq____&quot;,[logseq____&quot;^17logseq____&quot;],536870919]],[logseq____&quot;^15logseq____&quot;,[61,logseq____&quot;^4logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^17logseq____&quot;,logseq____&quot;658994e9-09a2-4b11-a960-f08770e30d01logseq____&quot;],536870919]],[logseq____&quot;^15logseq____&quot;,[61,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u658994e9-09a2-4b11-a960-f08770e30d01logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[62,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;Itlogseq____&apos;s a matter of course to generate a WAL record., since we must guarantee the clog to be recovery-safe. But some details deserve a glance:logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[62,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[62,logseq____&quot;^Flogseq____&quot;,85,536870919]],[logseq____&quot;^15logseq____&quot;,[62,logseq____&quot;^Xlogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[62,logseq____&quot;^Vlogseq____&quot;,83,536870919]],[logseq____&quot;^15logseq____&quot;,[62,logseq____&quot;^Ulogseq____&quot;,25,536870919]],[logseq____&quot;^15logseq____&quot;,[62,logseq____&quot;^Ulogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[62,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-066e-4762-a9e6-60749c9c0848logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[63,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;The key point is that the whole operation must be atomic.logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[63,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[63,logseq____&quot;^Flogseq____&quot;,88,536870919]],[logseq____&quot;^15logseq____&quot;,[63,logseq____&quot;^Xlogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[63,logseq____&quot;^Vlogseq____&quot;,88,536870919]],[logseq____&quot;^15logseq____&quot;,[63,logseq____&quot;^Ulogseq____&quot;,29,536870919]],[logseq____&quot;^15logseq____&quot;,[63,logseq____&quot;^Ulogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[63,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-ee27-4452-8c3f-b84db3866d98logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[64,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;#+BEGIN_QUOTE\\nRecord the final state of transaction entries in the commit log for all entries on a single page.  **Atomic only on this page**.\\n#+END_QUOTElogseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[64,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[64,logseq____&quot;^Flogseq____&quot;,70,536870919]],[logseq____&quot;^15logseq____&quot;,[64,logseq____&quot;^Xlogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[64,logseq____&quot;^Vlogseq____&quot;,70,536870919]],[logseq____&quot;^15logseq____&quot;,[64,logseq____&quot;^Ulogseq____&quot;,29,536870919]],[logseq____&quot;^15logseq____&quot;,[64,logseq____&quot;^Ulogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[64,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-2021-48ee-9fd1-15863fa8bc6blogseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[65,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;For now, if you are not interested in the details, the following two points are enough\\n1. The pair of operations wouldnlogseq____&apos;t generate any WAL record\\n2. They are done during the commit or abort procedure.logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[65,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[65,logseq____&quot;^Flogseq____&quot;,93,536870919]],[logseq____&quot;^15logseq____&quot;,[65,logseq____&quot;^Xlogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[65,logseq____&quot;^Vlogseq____&quot;,93,536870919]],[logseq____&quot;^15logseq____&quot;,[65,logseq____&quot;^Ulogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[65,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-262a-4d93-b74c-1e102a9b163dlogseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[66,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;For deleting a clog segment, we have no chance to remedy the lost of clogs, and the disaster means a lot of tuple can be accessed at all. So regardless of the synchronous commit level, we must ensure the WAL record has flushed into disk before really delete the segments.\\nlogseq.order-list-type:: numberlogseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[66,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[66,logseq____&quot;^Flogseq____&quot;,72,536870919]],[logseq____&quot;^15logseq____&quot;,[66,logseq____&quot;^Xlogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[66,logseq____&quot;^Vlogseq____&quot;,83,536870919]],[logseq____&quot;^15logseq____&quot;,[66,logseq____&quot;^Ulogseq____&quot;,25,536870919]],[logseq____&quot;^15logseq____&quot;,[66,logseq____&quot;^Ulogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[66,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;~:logseq.order-list-typelogseq____&quot;,logseq____&quot;numberlogseq____&quot;],536870919]],[logseq____&quot;^15logseq____&quot;,[66,logseq____&quot;^Jlogseq____&quot;,[logseq____&quot;^18logseq____&quot;],536870919]],[logseq____&quot;^15logseq____&quot;,[66,logseq____&quot;^4logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^18logseq____&quot;,logseq____&quot;numberlogseq____&quot;],536870919]],[logseq____&quot;^15logseq____&quot;,[66,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-202c-4ac5-a1a4-4ffda422df9blogseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[67,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;utils:logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[67,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[67,logseq____&quot;^Flogseq____&quot;,92,536870919]],[logseq____&quot;^15logseq____&quot;,[67,logseq____&quot;^Xlogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[67,logseq____&quot;^Vlogseq____&quot;,88,536870919]],[logseq____&quot;^15logseq____&quot;,[67,logseq____&quot;^Ulogseq____&quot;,29,536870919]],[logseq____&quot;^15logseq____&quot;,[67,logseq____&quot;^Ulogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[67,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-82cf-49fb-b197-269adaa8b889logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[68,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[68,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[68,logseq____&quot;^Flogseq____&quot;,66,536870919]],[logseq____&quot;^15logseq____&quot;,[68,logseq____&quot;^Xlogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[68,logseq____&quot;^Vlogseq____&quot;,83,536870919]],[logseq____&quot;^15logseq____&quot;,[68,logseq____&quot;^Ulogseq____&quot;,25,536870919]],[logseq____&quot;^15logseq____&quot;,[68,logseq____&quot;^Ulogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[68,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-1408-460a-9d58-e7a43bdf0784logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[69,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;tag::WALlogseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[69,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[69,logseq____&quot;^Flogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[69,logseq____&quot;^Xlogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[69,logseq____&quot;^Vlogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[69,logseq____&quot;^Ulogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[69,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-bf71-45cf-840c-d1af3f666245logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[70,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~`TransactionIdSetPageStatus`logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[70,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[70,logseq____&quot;^Flogseq____&quot;,78,536870919]],[logseq____&quot;^15logseq____&quot;,[70,logseq____&quot;^Xlogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[70,logseq____&quot;^Vlogseq____&quot;,67,536870919]],[logseq____&quot;^15logseq____&quot;,[70,logseq____&quot;^Ulogseq____&quot;,29,536870919]],[logseq____&quot;^15logseq____&quot;,[70,logseq____&quot;^Ulogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[70,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-36d0-4c25-baa5-531937e0603flogseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[71,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;{{embed ((6589991b-a89e-4b6f-991a-3e75cbc6538b))}}logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[71,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[71,logseq____&quot;^Flogseq____&quot;,61,536870919]],[logseq____&quot;^15logseq____&quot;,[71,logseq____&quot;^Slogseq____&quot;,96,536870919]],[logseq____&quot;^15logseq____&quot;,[71,logseq____&quot;^Xlogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[71,logseq____&quot;^Vlogseq____&quot;,61,536870919]],[logseq____&quot;^15logseq____&quot;,[71,logseq____&quot;^Ulogseq____&quot;,25,536870919]],[logseq____&quot;^15logseq____&quot;,[71,logseq____&quot;^Ulogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[71,logseq____&quot;^Ulogseq____&quot;,60,536870919]],[logseq____&quot;^15logseq____&quot;,[71,logseq____&quot;^Hlogseq____&quot;,60,536870919]],[logseq____&quot;^15logseq____&quot;,[71,logseq____&quot;^Hlogseq____&quot;,82,536870919]],[logseq____&quot;^15logseq____&quot;,[71,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-dc1c-483a-929b-badd250f62f4logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[72,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;For extending a new page, it makes no difference that we flush the WAL record now or later. Since once we want to set status in a non-existent page during recovery, we can padding a new empty page. This trick doesnlogseq____&apos;t affect the page usage.\\nlogseq.order-list-type:: numberlogseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[72,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[72,logseq____&quot;^Flogseq____&quot;,62,536870919]],[logseq____&quot;^15logseq____&quot;,[72,logseq____&quot;^Xlogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[72,logseq____&quot;^Vlogseq____&quot;,83,536870919]],[logseq____&quot;^15logseq____&quot;,[72,logseq____&quot;^Ulogseq____&quot;,25,536870919]],[logseq____&quot;^15logseq____&quot;,[72,logseq____&quot;^Ulogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[72,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^18logseq____&quot;,logseq____&quot;numberlogseq____&quot;],536870919]],[logseq____&quot;^15logseq____&quot;,[72,logseq____&quot;^Jlogseq____&quot;,[logseq____&quot;^18logseq____&quot;],536870919]],[logseq____&quot;^15logseq____&quot;,[72,logseq____&quot;^4logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^18logseq____&quot;,logseq____&quot;numberlogseq____&quot;],536870919]],[logseq____&quot;^15logseq____&quot;,[72,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-ae23-4625-ae28-2a9d1ade85eclogseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[73,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;## In-Disk Representation\\nThinking that the commit status of each transaction composites an array `clog[]` and `clog[xid]` records the status, we can easily store the array to disk by the `slru`.\\n\\nThe status of one transaction needs two bits to represent:\\n```C\\n#define CLOG_BITS_PER_XACT\\t2\\n#define CLOG_XACTS_PER_BYTE 4\\n#define CLOG_XACTS_PER_PAGE (BLCKSZ * CLOG_XACTS_PER_BYTE)\\n#define CLOG_XACT_BITMASK\\t((1 logseq____&lt;logseq____&lt; CLOG_BITS_PER_XACT) - 1)\\n```\\n\\nSo we can get the xidlogseq____&apos;s index and offset in page and byte.\\n```C\\n#define TransactionIdToPage(xid)\\t((xid) / (TransactionId) CLOG_XACTS_PER_PAGE)\\n#define TransactionIdToPgIndex(xid) ((xid) % (TransactionId) CLOG_XACTS_PER_PAGE)\\n#define TransactionIdToByte(xid)\\t(TransactionIdToPgIndex(xid) / CLOG_XACTS_PER_BYTE)\\n#define TransactionIdToBIndex(xid)\\t((xid) % (TransactionId) CLOG_XACTS_PER_BYTE)\\n```\\n\\nThinking of that one slru segment contains 32 pages, so we name the clog file as `0000`(contains xid in [0, 32 * CLOG_XACTS_PER_PAGE - 1]), `0001`(contains xid in [32 * CLOG_XACTS_PER_PAGE, 32 * CLOG_XACTS_PER_PAGE * 2 - 1]) and so on. Because four hex numbers can represent $16^4=2^{12}$ files with $2^{12} \\\\times 32 \\\\times 8192 \\\\times 4 = 2^{32}$ transactionslogseq____&apos; status(a int32 size)\\n\\nAttension, such simple mapping means that the pages in clog file donlogseq____&apos;t have page headers. So we canlogseq____&apos;t record `LSN`, `checksum` in each page. The lack of `LSN` means the changes of clog page wouldnlogseq____&apos;t be recorded in `WAL` but clog doesnlogseq____&apos;t need it indeed.logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[73,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[73,logseq____&quot;^Flogseq____&quot;,89,536870919]],[logseq____&quot;^15logseq____&quot;,[73,logseq____&quot;^Xlogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[73,logseq____&quot;^Vlogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[73,logseq____&quot;^Ulogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[73,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;~:headinglogseq____&quot;,2],536870919]],[logseq____&quot;^15logseq____&quot;,[73,logseq____&quot;^Jlogseq____&quot;,[],536870919]],[logseq____&quot;^15logseq____&quot;,[73,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-6dee-413c-bafd-4bf4b85aa3a3logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[74,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;## Set And Getlogseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[74,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[74,logseq____&quot;^Flogseq____&quot;,90,536870919]],[logseq____&quot;^15logseq____&quot;,[74,logseq____&quot;^Xlogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[74,logseq____&quot;^Vlogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[74,logseq____&quot;^Ulogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[74,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^19logseq____&quot;,2],536870919]],[logseq____&quot;^15logseq____&quot;,[74,logseq____&quot;^Jlogseq____&quot;,[],536870919]],[logseq____&quot;^15logseq____&quot;,[74,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-31d0-475b-8f1e-f99c5e069ca3logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[75,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;### WAL level details #wallogseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[75,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[75,logseq____&quot;^Flogseq____&quot;,93,536870919]],[logseq____&quot;^15logseq____&quot;,[75,logseq____&quot;^Xlogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[75,logseq____&quot;^Vlogseq____&quot;,74,536870919]],[logseq____&quot;^15logseq____&quot;,[75,logseq____&quot;^Ulogseq____&quot;,25,536870919]],[logseq____&quot;^15logseq____&quot;,[75,logseq____&quot;^Ulogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[75,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^19logseq____&quot;,3],536870919]],[logseq____&quot;^15logseq____&quot;,[75,logseq____&quot;^Jlogseq____&quot;,[],536870919]],[logseq____&quot;^15logseq____&quot;,[75,logseq____&quot;^Hlogseq____&quot;,25,536870919]],[logseq____&quot;^15logseq____&quot;,[75,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-1bc5-4583-b6df-50d3f5d39fcclogseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[76,logseq____&quot;^Mlogseq____&quot;,true,536870919]],[logseq____&quot;^15logseq____&quot;,[76,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~`TransactionIdGetStatus`\\ncollapsed:: truelogseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[76,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[76,logseq____&quot;^Flogseq____&quot;,88,536870919]],[logseq____&quot;^15logseq____&quot;,[76,logseq____&quot;^Xlogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[76,logseq____&quot;^Vlogseq____&quot;,93,536870919]],[logseq____&quot;^15logseq____&quot;,[76,logseq____&quot;^Ulogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[76,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;],536870919]],[logseq____&quot;^15logseq____&quot;,[76,logseq____&quot;^Jlogseq____&quot;,[],536870919]],[logseq____&quot;^15logseq____&quot;,[76,logseq____&quot;^4logseq____&quot;,[logseq____&quot;^ logseq____&quot;],536870919]],[logseq____&quot;^15logseq____&quot;,[76,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-4374-4aec-8937-0df38257f70elogseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[77,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[77,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[77,logseq____&quot;^Flogseq____&quot;,68,536870919]],[logseq____&quot;^15logseq____&quot;,[77,logseq____&quot;^Xlogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[77,logseq____&quot;^Vlogseq____&quot;,83,536870919]],[logseq____&quot;^15logseq____&quot;,[77,logseq____&quot;^Ulogseq____&quot;,25,536870919]],[logseq____&quot;^15logseq____&quot;,[77,logseq____&quot;^Ulogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[77,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-6477-4de4-896c-6cfd4967be4dlogseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[78,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~`set_status_by_pages`logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[78,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[78,logseq____&quot;^Flogseq____&quot;,67,536870919]],[logseq____&quot;^15logseq____&quot;,[78,logseq____&quot;^Xlogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[78,logseq____&quot;^Vlogseq____&quot;,67,536870919]],[logseq____&quot;^15logseq____&quot;,[78,logseq____&quot;^Ulogseq____&quot;,29,536870919]],[logseq____&quot;^15logseq____&quot;,[78,logseq____&quot;^Ulogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[78,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-334c-4762-b0ad-b31daa7ae0d9logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[79,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;#+BEGIN_QUOTE\\nset the status for a bunch of transactions, chunking in the separate CLOG pages involved\\n#+END_QUOTElogseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[79,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[79,logseq____&quot;^Flogseq____&quot;,78,536870919]],[logseq____&quot;^15logseq____&quot;,[79,logseq____&quot;^Xlogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[79,logseq____&quot;^Vlogseq____&quot;,78,536870919]],[logseq____&quot;^15logseq____&quot;,[79,logseq____&quot;^Ulogseq____&quot;,29,536870919]],[logseq____&quot;^15logseq____&quot;,[79,logseq____&quot;^Ulogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[79,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-674c-4f70-a3de-9bd1fa116a2blogseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[80,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;Note that the exclusive lock will be hold only in this function.logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[80,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[80,logseq____&quot;^Flogseq____&quot;,64,536870919]],[logseq____&quot;^15logseq____&quot;,[80,logseq____&quot;^Xlogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[80,logseq____&quot;^Vlogseq____&quot;,70,536870919]],[logseq____&quot;^15logseq____&quot;,[80,logseq____&quot;^Ulogseq____&quot;,29,536870919]],[logseq____&quot;^15logseq____&quot;,[80,logseq____&quot;^Ulogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[80,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-e2fe-4c96-b9d6-b02db3d3c767logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[81,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;In the commit case,  atomicity is limited by whether all the `subxids` are in the same CLOG page as xid.  \\n* If they all are, then the lock will be grabbed only once, and the status will be set to committed directly.  \\n* Otherwise, we must:\\n#+BEGIN_IMPORTANT\\n  1. set sub-committed all subxids that are not on the same page as the main xid\\n  2. atomically set committed the main xid and the subxids on the same page\\n  3. go over the first bunch again and set them committed\\n#+END_IMPORTANT\\nNote that itlogseq____&apos;s only the `commit` situation. For `abort`  situation, just setting the top xid seems enough\\n#+BEGIN_NOTE\\nWhen a top-level transaction with an xid commits, all of its subcommitted child subtransactions are also persistently recorded as committed in the pg_xact subdirectory. If the top-level transaction aborts, all its subtransactions are also aborted, even if they were subcommitted.\\n#+END_NOTElogseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[81,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[81,logseq____&quot;^Flogseq____&quot;,86,536870919]],[logseq____&quot;^15logseq____&quot;,[81,logseq____&quot;^Xlogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[81,logseq____&quot;^Vlogseq____&quot;,63,536870919]],[logseq____&quot;^15logseq____&quot;,[81,logseq____&quot;^Ulogseq____&quot;,29,536870919]],[logseq____&quot;^15logseq____&quot;,[81,logseq____&quot;^Ulogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[81,logseq____&quot;^Ulogseq____&quot;,58,536870919]],[logseq____&quot;^15logseq____&quot;,[81,logseq____&quot;^Ulogseq____&quot;,59,536870919]],[logseq____&quot;^15logseq____&quot;,[81,logseq____&quot;^Hlogseq____&quot;,58,536870919]],[logseq____&quot;^15logseq____&quot;,[81,logseq____&quot;^Hlogseq____&quot;,59,536870919]],[logseq____&quot;^15logseq____&quot;,[81,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-a4b4-4ea4-b2e4-bffe3630dcf4logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[82,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;group-lsn:\\nid:: 6589991b-a89e-4b6f-991a-3e75cbc6538blogseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[82,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[82,logseq____&quot;^Flogseq____&quot;,158,536870923]],[logseq____&quot;^15logseq____&quot;,[82,logseq____&quot;^Xlogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[82,logseq____&quot;^Vlogseq____&quot;,143,536870923]],[logseq____&quot;^15logseq____&quot;,[82,logseq____&quot;^Ulogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[82,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^17logseq____&quot;,logseq____&quot;6589991b-a89e-4b6f-991a-3e75cbc6538blogseq____&quot;],536870923]],[logseq____&quot;^15logseq____&quot;,[82,logseq____&quot;^Jlogseq____&quot;,[logseq____&quot;^17logseq____&quot;],536870923]],[logseq____&quot;^15logseq____&quot;,[82,logseq____&quot;^4logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^17logseq____&quot;,logseq____&quot;6589991b-a89e-4b6f-991a-3e75cbc6538blogseq____&quot;],536870923]],[logseq____&quot;^15logseq____&quot;,[82,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u6589991b-a89e-4b6f-991a-3e75cbc6538blogseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[83,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;### WAL level details #wallogseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[83,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[83,logseq____&quot;^Flogseq____&quot;,95,536870919]],[logseq____&quot;^15logseq____&quot;,[83,logseq____&quot;^Xlogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[83,logseq____&quot;^Vlogseq____&quot;,90,536870919]],[logseq____&quot;^15logseq____&quot;,[83,logseq____&quot;^Ulogseq____&quot;,25,536870919]],[logseq____&quot;^15logseq____&quot;,[83,logseq____&quot;^Ulogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[83,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^19logseq____&quot;,3],536870919]],[logseq____&quot;^15logseq____&quot;,[83,logseq____&quot;^Jlogseq____&quot;,[],536870919]],[logseq____&quot;^15logseq____&quot;,[83,logseq____&quot;^Hlogseq____&quot;,25,536870919]],[logseq____&quot;^15logseq____&quot;,[83,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-8762-4049-9b15-ef37c2d7f47clogseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[84,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;Itlogseq____&apos;s unbelievable but tricky that ((6589833b-83a9-47e9-b307-cbffb3a5b40b)) wouldnlogseq____&apos;t generate a WAL record. But since only the transactions that changes the content data(some hint flags are exception, such as tuple infomask, but thatlogseq____&apos;s unimportant) will have a xid(and then record on clog segment). During the replay of such transactionslogseq____&apos; commit(or abort? (#TODO will aborted transactions be replay in recovery?)) WAL record, we can redo the clog by the way.logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[84,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[84,logseq____&quot;^Flogseq____&quot;,75,536870919]],[logseq____&quot;^15logseq____&quot;,[84,logseq____&quot;^Xlogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[84,logseq____&quot;^Vlogseq____&quot;,75,536870919]],[logseq____&quot;^15logseq____&quot;,[84,logseq____&quot;^Ulogseq____&quot;,4,536870919]],[logseq____&quot;^15logseq____&quot;,[84,logseq____&quot;^Ulogseq____&quot;,25,536870919]],[logseq____&quot;^15logseq____&quot;,[84,logseq____&quot;^Ulogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[84,logseq____&quot;^Hlogseq____&quot;,4,536870919]],[logseq____&quot;^15logseq____&quot;,[84,logseq____&quot;^Hlogseq____&quot;,88,536870919]],[logseq____&quot;^15logseq____&quot;,[84,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-5282-4506-8376-514327183768logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[85,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;For the latter one,logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[85,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[85,logseq____&quot;^Flogseq____&quot;,83,536870919]],[logseq____&quot;^15logseq____&quot;,[85,logseq____&quot;^Xlogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[85,logseq____&quot;^Vlogseq____&quot;,83,536870919]],[logseq____&quot;^15logseq____&quot;,[85,logseq____&quot;^Ulogseq____&quot;,25,536870919]],[logseq____&quot;^15logseq____&quot;,[85,logseq____&quot;^Ulogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[85,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-36c4-4ac9-ba8e-d92cf596de23logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[86,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;The reason is that, this function doesnlogseq____&apos;t acquire the exclusive lock in the beginning, so despite crash-recovery, we must still ensure that other running `xacts` can get the right state of the transaction.logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[86,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[86,logseq____&quot;^Flogseq____&quot;,63,536870919]],[logseq____&quot;^15logseq____&quot;,[86,logseq____&quot;^Xlogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[86,logseq____&quot;^Vlogseq____&quot;,63,536870919]],[logseq____&quot;^15logseq____&quot;,[86,logseq____&quot;^Ulogseq____&quot;,29,536870919]],[logseq____&quot;^15logseq____&quot;,[86,logseq____&quot;^Ulogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[86,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-4500-42f5-b902-8cb8adbd555elogseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[87,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;During the process of generating a new `xid`, we make sure that the slru page exists.\\n* If itlogseq____&apos;s the first xid of the page, we allocate a new page in clog buffer.\\n* Also generate a WAL to record the birth of the page.\\n* If not, the page must exist in memory or flushed into disk. So itlogseq____&apos;s for slru\\nlayer to manage such situation.  Keep in mind that the general self-increment xid doeslogseq____&apos;t begin at zero:\\n```C\\n#define FirstNormalTransactionId\\t((TransactionId) 3)\\n```\\nso:\\n* During bootstrap, initialize the first clog page\\n* During extend new pages, be careful about the `FirstNormalTransactionId`,\\nsince it is not the first xid in page representation but the first general one.\\n\\nThe above behaviors indicate that although a clog segment at most occupies 256K space, it doesnlogseq____&apos;t have such size just after initialization. We extend 8K pages one by one during the xid increment.\\n\\nSince at most half of `uint32` xids can be in use, itlogseq____&apos;s natural to clean up out of date clog files. Different from extending a page, we always delete a whole page. So once we promote the `frozenxid`, we try to find some clog files to delete:\\n1. The judgement whether there is a file can be deleted is completed in slru layer(a loop to scan the directory), but clog layer supports a hook to judge one file.\\n2. Advance the oldest clog xid in shared memory\\n3. Generate a clog truncate WAL record\\n4. Real truncate. Complemented in slru layer.\\n\\nDetails of the two kind WAL record will be shown later.logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[87,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[87,logseq____&quot;^Flogseq____&quot;,95,536870919]],[logseq____&quot;^15logseq____&quot;,[87,logseq____&quot;^Xlogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[87,logseq____&quot;^Vlogseq____&quot;,95,536870919]],[logseq____&quot;^15logseq____&quot;,[87,logseq____&quot;^Ulogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[87,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-19da-458e-9958-47796f14b927logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[88,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~`TransactionIdSetTreeStatus`\\nid:: 6589833b-83a9-47e9-b307-cbffb3a5b40b\\n#+BEGIN_QUOTE\\nRecord the final state of transaction entries in the commit log for a transaction and its subtransaction tree.\\n#+END_QUOTE\\n(See [[subtransaction]] for backgrounds)logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[88,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[88,logseq____&quot;^Flogseq____&quot;,65,536870919]],[logseq____&quot;^15logseq____&quot;,[88,logseq____&quot;^Xlogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[88,logseq____&quot;^Vlogseq____&quot;,93,536870919]],[logseq____&quot;^15logseq____&quot;,[88,logseq____&quot;^Ulogseq____&quot;,29,536870919]],[logseq____&quot;^15logseq____&quot;,[88,logseq____&quot;^Ulogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[88,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^17logseq____&quot;,logseq____&quot;6589833b-83a9-47e9-b307-cbffb3a5b40blogseq____&quot;],536870919]],[logseq____&quot;^15logseq____&quot;,[88,logseq____&quot;^Jlogseq____&quot;,[logseq____&quot;^17logseq____&quot;],536870919]],[logseq____&quot;^15logseq____&quot;,[88,logseq____&quot;^4logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^17logseq____&quot;,logseq____&quot;6589833b-83a9-47e9-b307-cbffb3a5b40blogseq____&quot;],536870919]],[logseq____&quot;^15logseq____&quot;,[88,logseq____&quot;^Hlogseq____&quot;,29,536870919]],[logseq____&quot;^15logseq____&quot;,[88,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u6589833b-83a9-47e9-b307-cbffb3a5b40blogseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[89,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;## Overview\\nThis chapter explains the content of `clog` #SLRU_IMPLEMENT\\n\\n`clog`(commit log), records the commit status of each transaction. The log exists both in memory mannaged by `slru` buffer and disk for durability. The commit status can be the four kinds below:\\n```C\\n#define TRANSACTION_STATUS_IN_PROGRESS\\t\\t0x00\\n#define TRANSACTION_STATUS_COMMITTED\\t\\t0x01\\n#define TRANSACTION_STATUS_ABORTED\\t\\t\\t0x02\\n#define TRANSACTION_STATUS_SUB_COMMITTED\\t0x03\\n```logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[89,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[89,logseq____&quot;^Flogseq____&quot;,69,536870919]],[logseq____&quot;^15logseq____&quot;,[89,logseq____&quot;^Xlogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[89,logseq____&quot;^Vlogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[89,logseq____&quot;^Ulogseq____&quot;,23,536870919]],[logseq____&quot;^15logseq____&quot;,[89,logseq____&quot;^Ulogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[89,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^19logseq____&quot;,2],536870919]],[logseq____&quot;^15logseq____&quot;,[89,logseq____&quot;^Jlogseq____&quot;,[],536870919]],[logseq____&quot;^15logseq____&quot;,[89,logseq____&quot;^Hlogseq____&quot;,23,536870919]],[logseq____&quot;^15logseq____&quot;,[89,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-13e1-4dcf-afdc-21a1b08b2635logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[90,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;## Extend And Truncatelogseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[90,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[90,logseq____&quot;^Flogseq____&quot;,73,536870919]],[logseq____&quot;^15logseq____&quot;,[90,logseq____&quot;^Xlogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[90,logseq____&quot;^Vlogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[90,logseq____&quot;^Ulogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[90,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^19logseq____&quot;,2],536870919]],[logseq____&quot;^15logseq____&quot;,[90,logseq____&quot;^Jlogseq____&quot;,[],536870919]],[logseq____&quot;^15logseq____&quot;,[90,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-440c-4176-b9eb-19b8cf422ac6logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[91,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;For **example**\\nTransactionId t commits and has subxids t1, t2, t3, t4. t is on page p1, t1 is also on p1, t2 and t3 are on p2, t4 is on p3\\n* update pages2-3: \\n  * page2: set t2,t3 as sub-committed\\n* update page1: \\n  * page1: set t,t1 as committed\\n* update pages2-3: \\n  * page2: set t2,t3 as committed\\n  * page3: set t4 as committedlogseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[91,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[91,logseq____&quot;^Flogseq____&quot;,81,536870919]],[logseq____&quot;^15logseq____&quot;,[91,logseq____&quot;^Xlogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[91,logseq____&quot;^Vlogseq____&quot;,63,536870919]],[logseq____&quot;^15logseq____&quot;,[91,logseq____&quot;^Ulogseq____&quot;,29,536870919]],[logseq____&quot;^15logseq____&quot;,[91,logseq____&quot;^Ulogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[91,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-ef11-4ab3-b048-1494f841a70dlogseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[92,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;Another notable point is that this function supports both sync and async commit, where the later one uses the group commit technique.logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[92,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[92,logseq____&quot;^Flogseq____&quot;,63,536870919]],[logseq____&quot;^15logseq____&quot;,[92,logseq____&quot;^Xlogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[92,logseq____&quot;^Vlogseq____&quot;,88,536870919]],[logseq____&quot;^15logseq____&quot;,[92,logseq____&quot;^Ulogseq____&quot;,29,536870919]],[logseq____&quot;^15logseq____&quot;,[92,logseq____&quot;^Ulogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[92,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-7796-4329-8b92-cbd834d1cb5flogseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[93,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;### high level designlogseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[93,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[93,logseq____&quot;^Flogseq____&quot;,74,536870919]],[logseq____&quot;^15logseq____&quot;,[93,logseq____&quot;^Xlogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[93,logseq____&quot;^Vlogseq____&quot;,74,536870919]],[logseq____&quot;^15logseq____&quot;,[93,logseq____&quot;^Ulogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[93,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^19logseq____&quot;,3],536870919]],[logseq____&quot;^15logseq____&quot;,[93,logseq____&quot;^Jlogseq____&quot;,[],536870919]],[logseq____&quot;^15logseq____&quot;,[93,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-8415-444e-820a-ab766fa8c0d9logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[94,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;#+BEGIN_QUOTE\\nAside from the actual commit status, this function returns  an LSN that is late enough to be able to guarantee that if we flush up to that LSN then we will have flushed the transactionlogseq____&apos;s commit record to disk.\\n#+END_QUOTE\\nSee ((658994e9-09a2-4b11-a960-f08770e30d01)) for detaillogseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[94,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[94,logseq____&quot;^Flogseq____&quot;,76,536870919]],[logseq____&quot;^15logseq____&quot;,[94,logseq____&quot;^Xlogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[94,logseq____&quot;^Vlogseq____&quot;,76,536870919]],[logseq____&quot;^15logseq____&quot;,[94,logseq____&quot;^Ulogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[94,logseq____&quot;^Hlogseq____&quot;,61,536870919]],[logseq____&quot;^15logseq____&quot;,[94,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-7e74-40af-87f5-07977e1b8eb1logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[95,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;### high level designlogseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[95,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[95,logseq____&quot;^Flogseq____&quot;,90,536870919]],[logseq____&quot;^15logseq____&quot;,[95,logseq____&quot;^Xlogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[95,logseq____&quot;^Vlogseq____&quot;,90,536870919]],[logseq____&quot;^15logseq____&quot;,[95,logseq____&quot;^Ulogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[95,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^19logseq____&quot;,3],536870919]],[logseq____&quot;^15logseq____&quot;,[95,logseq____&quot;^Jlogseq____&quot;,[],536870919]],[logseq____&quot;^15logseq____&quot;,[95,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-2cba-4fde-811d-92310deac3c5logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[96,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;~:logseq.macro-namelogseq____&quot;,logseq____&quot;embedlogseq____&quot;,logseq____&quot;~:logseq.macro-argumentslogseq____&quot;,[logseq____&quot;((6589991b-a89e-4b6f-991a-3e75cbc6538b))logseq____&quot;]],536870919]],[logseq____&quot;^15logseq____&quot;,[96,logseq____&quot;^Wlogseq____&quot;,logseq____&quot;macrologseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[96,logseq____&quot;^Tlogseq____&quot;,logseq____&quot;embed ((6589991b-a89e-4b6f-991a-3e75cbc6538b))logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[98,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;![🖼 mxact-page.png](../assets/mxact-page.png)logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[98,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[98,logseq____&quot;^Flogseq____&quot;,99,536870920]],[logseq____&quot;^15logseq____&quot;,[98,logseq____&quot;^Xlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[98,logseq____&quot;^Vlogseq____&quot;,116,536870920]],[logseq____&quot;^15logseq____&quot;,[98,logseq____&quot;^Ulogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[98,logseq____&quot;^Ulogseq____&quot;,28,536870920]],[logseq____&quot;^15logseq____&quot;,[98,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-1e10-441c-be5c-e54ce9039d89logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[99,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;As mentioned above, we need to maintain every `MXactM` lists for each `MXact`, The logical implement is below:logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[99,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[99,logseq____&quot;^Flogseq____&quot;,116,536870920]],[logseq____&quot;^15logseq____&quot;,[99,logseq____&quot;^Xlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[99,logseq____&quot;^Vlogseq____&quot;,116,536870920]],[logseq____&quot;^15logseq____&quot;,[99,logseq____&quot;^Ulogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[99,logseq____&quot;^Ulogseq____&quot;,28,536870920]],[logseq____&quot;^15logseq____&quot;,[99,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-6cfe-4e2b-8a0f-58b783bf4fe8logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[100,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;### backendlogseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[100,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[100,logseq____&quot;^Flogseq____&quot;,103,536870920]],[logseq____&quot;^15logseq____&quot;,[100,logseq____&quot;^Xlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[100,logseq____&quot;^Vlogseq____&quot;,103,536870920]],[logseq____&quot;^15logseq____&quot;,[100,logseq____&quot;^Ulogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[100,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^19logseq____&quot;,3],536870920]],[logseq____&quot;^15logseq____&quot;,[100,logseq____&quot;^Jlogseq____&quot;,[],536870920]],[logseq____&quot;^15logseq____&quot;,[100,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-048d-4d65-b185-5015812bd615logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[101,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;## otherslogseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[101,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[101,logseq____&quot;^Flogseq____&quot;,103,536870920]],[logseq____&quot;^15logseq____&quot;,[101,logseq____&quot;^Xlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[101,logseq____&quot;^Vlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[101,logseq____&quot;^Ulogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[101,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^19logseq____&quot;,2],536870920]],[logseq____&quot;^15logseq____&quot;,[101,logseq____&quot;^Jlogseq____&quot;,[],536870920]],[logseq____&quot;^15logseq____&quot;,[101,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-faf4-43e3-87a1-5430ae8a6b50logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[102,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~```C\\ntypedef struct MultiXactMember\\n{\\n\\tTransactionId xid;\\n\\tMultiXactStatus status;\\n} MultiXactMember;\\n```logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[102,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[102,logseq____&quot;^Flogseq____&quot;,111,536870920]],[logseq____&quot;^15logseq____&quot;,[102,logseq____&quot;^Xlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[102,logseq____&quot;^Vlogseq____&quot;,111,536870920]],[logseq____&quot;^15logseq____&quot;,[102,logseq____&quot;^Ulogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[102,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-b617-4c2c-b12d-4de1efcdf8b0logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[103,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;## Low level Designlogseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[103,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[103,logseq____&quot;^Flogseq____&quot;,109,536870920]],[logseq____&quot;^15logseq____&quot;,[103,logseq____&quot;^Xlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[103,logseq____&quot;^Vlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[103,logseq____&quot;^Ulogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[103,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^19logseq____&quot;,2],536870920]],[logseq____&quot;^15logseq____&quot;,[103,logseq____&quot;^Jlogseq____&quot;,[],536870920]],[logseq____&quot;^15logseq____&quot;,[103,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-097f-4402-b0d0-1bfc9fd8a8b6logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[104,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;### Control dat: `MultiXactStateData`logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[104,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[104,logseq____&quot;^Flogseq____&quot;,116,536870920]],[logseq____&quot;^15logseq____&quot;,[104,logseq____&quot;^Xlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[104,logseq____&quot;^Vlogseq____&quot;,103,536870920]],[logseq____&quot;^15logseq____&quot;,[104,logseq____&quot;^Ulogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[104,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^19logseq____&quot;,3],536870920]],[logseq____&quot;^15logseq____&quot;,[104,logseq____&quot;^Jlogseq____&quot;,[],536870920]],[logseq____&quot;^15logseq____&quot;,[104,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-ae1f-446b-ba18-aeaf9d28d9d9logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[105,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;Whatlogseq____&apos;s `MXact`:\\nDifferent from `xid` as a transaction level concept,  `multi-transaction-id(MXact)` is a `tuple` level concepts.  When there may be a conflict at tuple, that is deciding the `xmax` value , a `MXact` is generated with tuple. The `Mxact` relates to an array of `xid`s which are accessing the tuple an their lock types.logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[105,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[105,logseq____&quot;^Flogseq____&quot;,100,536870920]],[logseq____&quot;^15logseq____&quot;,[105,logseq____&quot;^Xlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[105,logseq____&quot;^Vlogseq____&quot;,100,536870920]],[logseq____&quot;^15logseq____&quot;,[105,logseq____&quot;^Ulogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[105,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-4661-48ae-82a0-adf0854b0265logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[106,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;## Backgroundlogseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[106,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[106,logseq____&quot;^Flogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[106,logseq____&quot;^Xlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[106,logseq____&quot;^Vlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[106,logseq____&quot;^Ulogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[106,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^19logseq____&quot;,2],536870920]],[logseq____&quot;^15logseq____&quot;,[106,logseq____&quot;^Jlogseq____&quot;,[],536870920]],[logseq____&quot;^15logseq____&quot;,[106,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-7e64-4b6f-9fc0-32056802d8d6logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[107,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~`Mxact` Page:\\nSimilar to clog, one `mxact` occupy 32 bits, so `mxact` can fill the page perfectlylogseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[107,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[107,logseq____&quot;^Flogseq____&quot;,98,536870920]],[logseq____&quot;^15logseq____&quot;,[107,logseq____&quot;^Xlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[107,logseq____&quot;^Vlogseq____&quot;,116,536870920]],[logseq____&quot;^15logseq____&quot;,[107,logseq____&quot;^Ulogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[107,logseq____&quot;^Ulogseq____&quot;,28,536870920]],[logseq____&quot;^15logseq____&quot;,[107,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-dbf6-4db7-8864-715a28c7042clogseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[108,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~`MxactM` Page:\\nIt is a bit more complex, since we need a external byte for each `xid` attribute. To avoid alignment issues, we bind four `MxactM` as a group(20 bytes). Thus, with 8kB BLCKSZ, we keep 409 groups er page.  This wastes 12 bytes per page, but thatlogseq____&apos;s OK.logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[108,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[108,logseq____&quot;^Flogseq____&quot;,107,536870920]],[logseq____&quot;^15logseq____&quot;,[108,logseq____&quot;^Xlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[108,logseq____&quot;^Vlogseq____&quot;,116,536870920]],[logseq____&quot;^15logseq____&quot;,[108,logseq____&quot;^Ulogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[108,logseq____&quot;^Ulogseq____&quot;,28,536870920]],[logseq____&quot;^15logseq____&quot;,[108,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-9bbc-4ad8-9fd8-e28dfdd3a8f8logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[109,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;Four kind of locks:\\nid:: 65844328-bef2-44af-8583-d61849a30ab1\\n* From [Official Docs](https://www.postgresql.org/docs/current/explicit-locking.html#LOCKING-ROWS) , PG has four kinds of tuple-level locks.\\n* ![image.png](../assets/tuple-level-lock-table.png)\\n* `FOR UPDATE` : acquired by `delete` or `UPDATE` that modifies the values of certain columns\\n* have a **unique index** on them that can be used in a foreign key\\n* `FOR NO KEY UPDATE`: acquired by or `UPDATE` that expect the situation above\\n* `FOR SHARE` : #TODO\\n* `FOR KEY SHARE` : #TODO \\n\\n#TODO  letlogseq____&apos;s see `heapam` first before studying the `multixact`logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[109,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[109,logseq____&quot;^Flogseq____&quot;,112,536870920]],[logseq____&quot;^15logseq____&quot;,[109,logseq____&quot;^Xlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[109,logseq____&quot;^Vlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[109,logseq____&quot;^Ulogseq____&quot;,4,536870920]],[logseq____&quot;^15logseq____&quot;,[109,logseq____&quot;^Ulogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[109,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^17logseq____&quot;,logseq____&quot;65844328-bef2-44af-8583-d61849a30ab1logseq____&quot;],536870920]],[logseq____&quot;^15logseq____&quot;,[109,logseq____&quot;^Jlogseq____&quot;,[logseq____&quot;^17logseq____&quot;],536870920]],[logseq____&quot;^15logseq____&quot;,[109,logseq____&quot;^4logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^17logseq____&quot;,logseq____&quot;65844328-bef2-44af-8583-d61849a30ab1logseq____&quot;],536870920]],[logseq____&quot;^15logseq____&quot;,[109,logseq____&quot;^Hlogseq____&quot;,4,536870920]],[logseq____&quot;^15logseq____&quot;,[109,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65844328-bef2-44af-8583-d61849a30ab1logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[110,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[110,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[110,logseq____&quot;^Flogseq____&quot;,104,536870920]],[logseq____&quot;^15logseq____&quot;,[110,logseq____&quot;^Xlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[110,logseq____&quot;^Vlogseq____&quot;,104,536870920]],[logseq____&quot;^15logseq____&quot;,[110,logseq____&quot;^Ulogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[110,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-d346-4a3f-95a7-da9f29b7ca34logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[111,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;So we call the the transaction with its lock type as `multi transaction member(MXactM)`logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[111,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[111,logseq____&quot;^Flogseq____&quot;,105,536870920]],[logseq____&quot;^15logseq____&quot;,[111,logseq____&quot;^Xlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[111,logseq____&quot;^Vlogseq____&quot;,100,536870920]],[logseq____&quot;^15logseq____&quot;,[111,logseq____&quot;^Ulogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[111,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-2c6a-4080-8b00-f5daa87877adlogseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[112,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;Why is `multi-transaction-log` #SLRU_IMPLEMENT\\n* Since many transactions can have the shared lock on a same tuple simultaneously but there is no space to record these transactions in the tuple header, welogseq____&apos;d better to manage a specific **shared space** to recording the transactions that holding the tuple-level locks.\\n* A shared memory space doesnlogseq____&apos;t seem OK since one transaction can access tons of tuple which is unadvisable to store them in memory. So the only solution is recording in disk\\n* So locking a row might cause a disk writelogseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[112,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[112,logseq____&quot;^Flogseq____&quot;,106,536870920]],[logseq____&quot;^15logseq____&quot;,[112,logseq____&quot;^Xlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[112,logseq____&quot;^Vlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[112,logseq____&quot;^Ulogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[112,logseq____&quot;^Ulogseq____&quot;,23,536870920]],[logseq____&quot;^15logseq____&quot;,[112,logseq____&quot;^Hlogseq____&quot;,23,536870920]],[logseq____&quot;^15logseq____&quot;,[112,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-ce32-4b93-bbf1-6e19f750eb25logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[113,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~```\\nheapam_tuple_delete\\n.   heapam_tuple_lock_internal\\n.       heap_lock_tuple\\n.           if (infomask logseq____&amp; HEAP_XMAX_IS_MULTI)\\n            GetMultiXactIdMembers\\n```logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[113,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[113,logseq____&quot;^Flogseq____&quot;,101,536870920]],[logseq____&quot;^15logseq____&quot;,[113,logseq____&quot;^Xlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[113,logseq____&quot;^Vlogseq____&quot;,101,536870920]],[logseq____&quot;^15logseq____&quot;,[113,logseq____&quot;^Ulogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[113,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-53a0-455f-930f-3a322b474755logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[114,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~```C\\ntypedef enum\\n{\\n\\tMultiXactStatusForKeyShare = 0x00,\\n\\tMultiXactStatusForShare = 0x01,\\n\\tMultiXactStatusForNoKeyUpdate = 0x02,\\n\\tMultiXactStatusForUpdate = 0x03,\\n\\t/* an update that doesnlogseq____&apos;t touch \\logseq____&quot;key\\logseq____&quot; columns */\\n\\tMultiXactStatusNoKeyUpdate = 0x04,\\n\\t/* other updates, and delete */\\n\\tMultiXactStatusUpdate = 0x05\\n} MultiXactStatus;\\n```logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[114,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[114,logseq____&quot;^Flogseq____&quot;,115,536870920]],[logseq____&quot;^15logseq____&quot;,[114,logseq____&quot;^Xlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[114,logseq____&quot;^Vlogseq____&quot;,115,536870920]],[logseq____&quot;^15logseq____&quot;,[114,logseq____&quot;^Ulogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[114,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-b14a-42c8-833c-34323ee2a4d5logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[115,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;The `MultiXactStatus` is the lock type ((65844328-bef2-44af-8583-d61849a30ab1))logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[115,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[115,logseq____&quot;^Flogseq____&quot;,111,536870920]],[logseq____&quot;^15logseq____&quot;,[115,logseq____&quot;^Xlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[115,logseq____&quot;^Vlogseq____&quot;,100,536870920]],[logseq____&quot;^15logseq____&quot;,[115,logseq____&quot;^Ulogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[115,logseq____&quot;^Hlogseq____&quot;,109,536870920]],[logseq____&quot;^15logseq____&quot;,[115,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-6e33-44fa-922e-2af87f87653flogseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[116,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;### Two [[slru]] structure:logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[116,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[116,logseq____&quot;^Flogseq____&quot;,100,536870920]],[logseq____&quot;^15logseq____&quot;,[116,logseq____&quot;^Xlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[116,logseq____&quot;^Vlogseq____&quot;,103,536870920]],[logseq____&quot;^15logseq____&quot;,[116,logseq____&quot;^Ulogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[116,logseq____&quot;^Ulogseq____&quot;,28,536870920]],[logseq____&quot;^15logseq____&quot;,[116,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^19logseq____&quot;,3],536870920]],[logseq____&quot;^15logseq____&quot;,[116,logseq____&quot;^Jlogseq____&quot;,[],536870920]],[logseq____&quot;^15logseq____&quot;,[116,logseq____&quot;^Hlogseq____&quot;,28,536870920]],[logseq____&quot;^15logseq____&quot;,[116,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-def6-4a32-8298-7eb285489c62logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[118,logseq____&quot;^Klogseq____&quot;,1703517342282,536870921]],[logseq____&quot;^15logseq____&quot;,[118,logseq____&quot;^@logseq____&quot;,false,536870921]],[logseq____&quot;^15logseq____&quot;,[118,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;relfilelocatorlogseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[118,logseq____&quot;^11logseq____&quot;,logseq____&quot;relfilelocatorlogseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[118,logseq____&quot;^Blogseq____&quot;,1703517342282,536870921]],[logseq____&quot;^15logseq____&quot;,[118,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-9764-4dd2-8c17-92042adff4f6logseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[119,logseq____&quot;^Klogseq____&quot;,1703517342283,536870921]],[logseq____&quot;^15logseq____&quot;,[119,logseq____&quot;^@logseq____&quot;,false,536870921]],[logseq____&quot;^15logseq____&quot;,[119,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;shared-bufferslogseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[119,logseq____&quot;^11logseq____&quot;,logseq____&quot;shared-bufferslogseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[119,logseq____&quot;^Blogseq____&quot;,1703517342283,536870921]],[logseq____&quot;^15logseq____&quot;,[119,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-f5db-4678-bb9f-f3c4758810b0logseq____&quot;,536870922]],[logseq____&quot;^15logseq____&quot;,[120,logseq____&quot;^Klogseq____&quot;,1703517342284,536870921]],[logseq____&quot;^15logseq____&quot;,[120,logseq____&quot;^@logseq____&quot;,false,536870921]],[logseq____&quot;^15logseq____&quot;,[120,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;unlogged-tablelogseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[120,logseq____&quot;^11logseq____&quot;,logseq____&quot;unlogged-tablelogseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[120,logseq____&quot;^Blogseq____&quot;,1703517342284,536870921]],[logseq____&quot;^15logseq____&quot;,[120,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-435e-450c-84e9-a04fcff4f47dlogseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[121,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;Oid of a relation is logically existent.logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[121,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[121,logseq____&quot;^Flogseq____&quot;,131,536870921]],[logseq____&quot;^15logseq____&quot;,[121,logseq____&quot;^Xlogseq____&quot;,118,536870921]],[logseq____&quot;^15logseq____&quot;,[121,logseq____&quot;^Vlogseq____&quot;,131,536870921]],[logseq____&quot;^15logseq____&quot;,[121,logseq____&quot;^Ulogseq____&quot;,118,536870921]],[logseq____&quot;^15logseq____&quot;,[121,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-3ec0-4fa0-9e8a-17713c398cf4logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[122,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~```C\\ntypedef struct RelFileLocator\\n{\\n\\tOid\\t\\t\\tspcOid;\\t\\t\\t/* tablespace */\\n\\tOid\\t\\t\\tdbOid;\\t\\t\\t/* database */\\n\\tRelFileNumber relNumber;\\t/* relation */\\n} RelFileLocator;\\n```logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[122,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[122,logseq____&quot;^Flogseq____&quot;,118,536870921]],[logseq____&quot;^15logseq____&quot;,[122,logseq____&quot;^Xlogseq____&quot;,118,536870921]],[logseq____&quot;^15logseq____&quot;,[122,logseq____&quot;^Vlogseq____&quot;,118,536870921]],[logseq____&quot;^15logseq____&quot;,[122,logseq____&quot;^Ulogseq____&quot;,118,536870921]],[logseq____&quot;^15logseq____&quot;,[122,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-b37f-49db-9eb8-663e9d72b914logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[123,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;RelFileNumber is physically existent, since operations like `vacuum full` and `truncate` will create new files with different file namelogseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[123,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[123,logseq____&quot;^Flogseq____&quot;,121,536870921]],[logseq____&quot;^15logseq____&quot;,[123,logseq____&quot;^Xlogseq____&quot;,118,536870921]],[logseq____&quot;^15logseq____&quot;,[123,logseq____&quot;^Vlogseq____&quot;,131,536870921]],[logseq____&quot;^15logseq____&quot;,[123,logseq____&quot;^Ulogseq____&quot;,118,536870921]],[logseq____&quot;^15logseq____&quot;,[123,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-5a10-4feb-8827-b411f65bb40dlogseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[124,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;## buffer tag\\nid:: 6581a94f-7372-4aef-9531-962f2170ffeclogseq____&quot;,536870922]],[logseq____&quot;^15logseq____&quot;,[124,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870922]],[logseq____&quot;^15logseq____&quot;,[124,logseq____&quot;^Flogseq____&quot;,119,536870922]],[logseq____&quot;^15logseq____&quot;,[124,logseq____&quot;^Xlogseq____&quot;,119,536870922]],[logseq____&quot;^15logseq____&quot;,[124,logseq____&quot;^Vlogseq____&quot;,119,536870922]],[logseq____&quot;^15logseq____&quot;,[124,logseq____&quot;^Ulogseq____&quot;,119,536870922]],[logseq____&quot;^15logseq____&quot;,[124,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^17logseq____&quot;,logseq____&quot;6581a94f-7372-4aef-9531-962f2170ffeclogseq____&quot;,logseq____&quot;^19logseq____&quot;,2],536870922]],[logseq____&quot;^15logseq____&quot;,[124,logseq____&quot;^Jlogseq____&quot;,[logseq____&quot;^17logseq____&quot;],536870922]],[logseq____&quot;^15logseq____&quot;,[124,logseq____&quot;^4logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^17logseq____&quot;,logseq____&quot;6581a94f-7372-4aef-9531-962f2170ffeclogseq____&quot;],536870922]],[logseq____&quot;^15logseq____&quot;,[124,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u6581a94f-7372-4aef-9531-962f2170ffeclogseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[125,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~`INIT_FORKNUM` : for  [unlogged table](https://www.postgresql.org/docs/current/sql-createtable.html#SQL-CREATETABLE-UNLOGGED)logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[125,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[125,logseq____&quot;^Flogseq____&quot;,128,536870921]],[logseq____&quot;^15logseq____&quot;,[125,logseq____&quot;^Xlogseq____&quot;,118,536870921]],[logseq____&quot;^15logseq____&quot;,[125,logseq____&quot;^Vlogseq____&quot;,126,536870921]],[logseq____&quot;^15logseq____&quot;,[125,logseq____&quot;^Ulogseq____&quot;,118,536870921]],[logseq____&quot;^15logseq____&quot;,[125,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-0a05-45c3-a3ae-0005713b835elogseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[126,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~`ForkNumber`\\nid:: 65805626-a222-4aa2-88e3-8a3dcfda498flogseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[126,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[126,logseq____&quot;^Flogseq____&quot;,131,536870921]],[logseq____&quot;^15logseq____&quot;,[126,logseq____&quot;^Xlogseq____&quot;,118,536870921]],[logseq____&quot;^15logseq____&quot;,[126,logseq____&quot;^Vlogseq____&quot;,118,536870921]],[logseq____&quot;^15logseq____&quot;,[126,logseq____&quot;^Ulogseq____&quot;,118,536870921]],[logseq____&quot;^15logseq____&quot;,[126,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^17logseq____&quot;,logseq____&quot;65805626-a222-4aa2-88e3-8a3dcfda498flogseq____&quot;],536870921]],[logseq____&quot;^15logseq____&quot;,[126,logseq____&quot;^Jlogseq____&quot;,[logseq____&quot;^17logseq____&quot;],536870921]],[logseq____&quot;^15logseq____&quot;,[126,logseq____&quot;^4logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^17logseq____&quot;,logseq____&quot;65805626-a222-4aa2-88e3-8a3dcfda498flogseq____&quot;],536870921]],[logseq____&quot;^15logseq____&quot;,[126,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65805626-a222-4aa2-88e3-8a3dcfda498flogseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[127,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;See ((6581a94f-7372-4aef-9531-962f2170ffec)) for detaillogseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[127,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[127,logseq____&quot;^Flogseq____&quot;,132,536870921]],[logseq____&quot;^15logseq____&quot;,[127,logseq____&quot;^Xlogseq____&quot;,118,536870921]],[logseq____&quot;^15logseq____&quot;,[127,logseq____&quot;^Vlogseq____&quot;,136,536870921]],[logseq____&quot;^15logseq____&quot;,[127,logseq____&quot;^Ulogseq____&quot;,118,536870921]],[logseq____&quot;^15logseq____&quot;,[127,logseq____&quot;^Hlogseq____&quot;,124,536870921]],[logseq____&quot;^15logseq____&quot;,[127,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-f4c3-4959-ab6d-410643e88ebflogseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[128,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~`VISIBILITYMAP_FORKNUM` : VISIBILITYMAP filelogseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[128,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[128,logseq____&quot;^Flogseq____&quot;,135,536870921]],[logseq____&quot;^15logseq____&quot;,[128,logseq____&quot;^Xlogseq____&quot;,118,536870921]],[logseq____&quot;^15logseq____&quot;,[128,logseq____&quot;^Vlogseq____&quot;,126,536870921]],[logseq____&quot;^15logseq____&quot;,[128,logseq____&quot;^Ulogseq____&quot;,118,536870921]],[logseq____&quot;^15logseq____&quot;,[128,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-ace7-47f0-9020-9d4e34662f5dlogseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[129,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[129,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[129,logseq____&quot;^Flogseq____&quot;,125,536870921]],[logseq____&quot;^15logseq____&quot;,[129,logseq____&quot;^Xlogseq____&quot;,118,536870921]],[logseq____&quot;^15logseq____&quot;,[129,logseq____&quot;^Vlogseq____&quot;,126,536870921]],[logseq____&quot;^15logseq____&quot;,[129,logseq____&quot;^Ulogseq____&quot;,118,536870921]],[logseq____&quot;^15logseq____&quot;,[129,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-e3ad-4a2b-9006-763469a39fe2logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[130,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[130,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[130,logseq____&quot;^Flogseq____&quot;,126,536870921]],[logseq____&quot;^15logseq____&quot;,[130,logseq____&quot;^Xlogseq____&quot;,118,536870921]],[logseq____&quot;^15logseq____&quot;,[130,logseq____&quot;^Vlogseq____&quot;,118,536870921]],[logseq____&quot;^15logseq____&quot;,[130,logseq____&quot;^Ulogseq____&quot;,118,536870921]],[logseq____&quot;^15logseq____&quot;,[130,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-a99c-40f8-b50a-fc5b6e84d05alogseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[131,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~`RelFileNumber` is the file name of the relationlogseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[131,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[131,logseq____&quot;^Flogseq____&quot;,122,536870921]],[logseq____&quot;^15logseq____&quot;,[131,logseq____&quot;^Xlogseq____&quot;,118,536870921]],[logseq____&quot;^15logseq____&quot;,[131,logseq____&quot;^Vlogseq____&quot;,118,536870921]],[logseq____&quot;^15logseq____&quot;,[131,logseq____&quot;^Ulogseq____&quot;,118,536870921]],[logseq____&quot;^15logseq____&quot;,[131,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-50fe-44e8-b98b-1ec4d82d0de9logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[132,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;The main data, fsm and vm are all buffered by the [[shared-buffers]] .logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[132,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[132,logseq____&quot;^Flogseq____&quot;,136,536870921]],[logseq____&quot;^15logseq____&quot;,[132,logseq____&quot;^Xlogseq____&quot;,118,536870921]],[logseq____&quot;^15logseq____&quot;,[132,logseq____&quot;^Vlogseq____&quot;,136,536870921]],[logseq____&quot;^15logseq____&quot;,[132,logseq____&quot;^Ulogseq____&quot;,118,536870921]],[logseq____&quot;^15logseq____&quot;,[132,logseq____&quot;^Ulogseq____&quot;,119,536870921]],[logseq____&quot;^15logseq____&quot;,[132,logseq____&quot;^Hlogseq____&quot;,119,536870921]],[logseq____&quot;^15logseq____&quot;,[132,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-442d-46f4-b4b6-fe5cb0613938logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[133,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;{{embed [[unlogged-table]]}}logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[133,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[133,logseq____&quot;^Flogseq____&quot;,125,536870921]],[logseq____&quot;^15logseq____&quot;,[133,logseq____&quot;^Slogseq____&quot;,137,536870921]],[logseq____&quot;^15logseq____&quot;,[133,logseq____&quot;^Xlogseq____&quot;,118,536870921]],[logseq____&quot;^15logseq____&quot;,[133,logseq____&quot;^Vlogseq____&quot;,125,536870921]],[logseq____&quot;^15logseq____&quot;,[133,logseq____&quot;^Ulogseq____&quot;,118,536870921]],[logseq____&quot;^15logseq____&quot;,[133,logseq____&quot;^Ulogseq____&quot;,120,536870921]],[logseq____&quot;^15logseq____&quot;,[133,logseq____&quot;^Hlogseq____&quot;,120,536870921]],[logseq____&quot;^15logseq____&quot;,[133,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-94f1-4715-8e4e-6b18ace73dcflogseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[134,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~`MAIN_FORKNUM` : heap filelogseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[134,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[134,logseq____&quot;^Flogseq____&quot;,136,536870921]],[logseq____&quot;^15logseq____&quot;,[134,logseq____&quot;^Xlogseq____&quot;,118,536870921]],[logseq____&quot;^15logseq____&quot;,[134,logseq____&quot;^Vlogseq____&quot;,126,536870921]],[logseq____&quot;^15logseq____&quot;,[134,logseq____&quot;^Ulogseq____&quot;,118,536870921]],[logseq____&quot;^15logseq____&quot;,[134,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-103f-4112-9207-c1f0aa90e0a9logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[135,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~`FSM_FORKNUM` : free space manager filelogseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[135,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[135,logseq____&quot;^Flogseq____&quot;,134,536870921]],[logseq____&quot;^15logseq____&quot;,[135,logseq____&quot;^Xlogseq____&quot;,118,536870921]],[logseq____&quot;^15logseq____&quot;,[135,logseq____&quot;^Vlogseq____&quot;,126,536870921]],[logseq____&quot;^15logseq____&quot;,[135,logseq____&quot;^Ulogseq____&quot;,118,536870921]],[logseq____&quot;^15logseq____&quot;,[135,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-775d-4f91-b341-76f3b23a5bcdlogseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[136,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;It is the file \\logseq____&quot;type\\logseq____&quot; of a relationlogseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[136,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[136,logseq____&quot;^Flogseq____&quot;,126,536870921]],[logseq____&quot;^15logseq____&quot;,[136,logseq____&quot;^Xlogseq____&quot;,118,536870921]],[logseq____&quot;^15logseq____&quot;,[136,logseq____&quot;^Vlogseq____&quot;,126,536870921]],[logseq____&quot;^15logseq____&quot;,[136,logseq____&quot;^Ulogseq____&quot;,118,536870921]],[logseq____&quot;^15logseq____&quot;,[136,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-ae83-411d-a6be-229e8d852563logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[137,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^1:logseq____&quot;,logseq____&quot;embedlogseq____&quot;,logseq____&quot;^1;logseq____&quot;,[logseq____&quot;[[unlogged-table]]logseq____&quot;]],536870921]],[logseq____&quot;^15logseq____&quot;,[137,logseq____&quot;^Wlogseq____&quot;,logseq____&quot;macrologseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[137,logseq____&quot;^Tlogseq____&quot;,logseq____&quot;embed [[unlogged-table]]logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[139,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~```\\nBufferGetTag(Buffer buffer, RelFileLocator *rlocator, ForkNumber *forknum,\\n\\t\\t\\t BlockNumber *blknum)\\n{\\n\\tbufHdr = GetLocalBufferDescriptor/GetBufferDescriptor\\n    *rlocator = BufTagGetRelFileLocator(logseq____&amp;bufHdr-logseq____&gt;tag);\\n    *forknum = BufTagGetForkNum(logseq____&amp;bufHdr-logseq____&gt;tag);\\n    *blknum = bufHdr-logseq____&gt;tag.blockNum;\\n}\\n```logseq____&quot;,536870922]],[logseq____&quot;^15logseq____&quot;,[139,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870922]],[logseq____&quot;^15logseq____&quot;,[139,logseq____&quot;^Flogseq____&quot;,124,536870922]],[logseq____&quot;^15logseq____&quot;,[139,logseq____&quot;^Xlogseq____&quot;,119,536870922]],[logseq____&quot;^15logseq____&quot;,[139,logseq____&quot;^Vlogseq____&quot;,124,536870922]],[logseq____&quot;^15logseq____&quot;,[139,logseq____&quot;^Ulogseq____&quot;,119,536870922]],[logseq____&quot;^15logseq____&quot;,[139,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-0312-4824-a555-b46f4104e1f4logseq____&quot;,536870922]],[logseq____&quot;^15logseq____&quot;,[140,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;logseq____&quot;,536870922]],[logseq____&quot;^15logseq____&quot;,[140,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870922]],[logseq____&quot;^15logseq____&quot;,[140,logseq____&quot;^Flogseq____&quot;,124,536870922]],[logseq____&quot;^15logseq____&quot;,[140,logseq____&quot;^Xlogseq____&quot;,119,536870922]],[logseq____&quot;^15logseq____&quot;,[140,logseq____&quot;^Vlogseq____&quot;,119,536870922]],[logseq____&quot;^15logseq____&quot;,[140,logseq____&quot;^Ulogseq____&quot;,119,536870922]],[logseq____&quot;^15logseq____&quot;,[140,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-3379-4198-9d81-2e50ac29b7a8logseq____&quot;,536870922]],[logseq____&quot;^15logseq____&quot;,[142,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[142,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[142,logseq____&quot;^Flogseq____&quot;,82,536870923]],[logseq____&quot;^15logseq____&quot;,[142,logseq____&quot;^Xlogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[142,logseq____&quot;^Vlogseq____&quot;,143,536870923]],[logseq____&quot;^15logseq____&quot;,[142,logseq____&quot;^Ulogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[142,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-647d-4324-9187-3507f9dc928blogseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[143,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;##  内存slrulogseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[143,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[143,logseq____&quot;^Flogseq____&quot;,155,536870923]],[logseq____&quot;^15logseq____&quot;,[143,logseq____&quot;^Xlogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[143,logseq____&quot;^Vlogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[143,logseq____&quot;^Ulogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[143,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^19logseq____&quot;,2],536870923]],[logseq____&quot;^15logseq____&quot;,[143,logseq____&quot;^Jlogseq____&quot;,[],536870923]],[logseq____&quot;^15logseq____&quot;,[143,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-ac20-46e2-bf2c-1d856b52cd97logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[144,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;与bpm不同，通过slru管理的page，其文件大小固定，一个文件有32个page，一个page有8KB，故一个文件最大为256K。logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[144,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[144,logseq____&quot;^Flogseq____&quot;,155,536870923]],[logseq____&quot;^15logseq____&quot;,[144,logseq____&quot;^Xlogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[144,logseq____&quot;^Vlogseq____&quot;,155,536870923]],[logseq____&quot;^15logseq____&quot;,[144,logseq____&quot;^Ulogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[144,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-6dd5-4b3f-95aa-9812fcf0b60flogseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[145,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;slru用来干什么？logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[145,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[145,logseq____&quot;^Flogseq____&quot;,159,536870923]],[logseq____&quot;^15logseq____&quot;,[145,logseq____&quot;^Xlogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[145,logseq____&quot;^Vlogseq____&quot;,159,536870923]],[logseq____&quot;^15logseq____&quot;,[145,logseq____&quot;^Ulogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[145,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-9c96-43d2-a120-d091310e304clogseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[146,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;有了buffer pool manager，为什么还要slru？logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[146,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[146,logseq____&quot;^Flogseq____&quot;,145,536870923]],[logseq____&quot;^15logseq____&quot;,[146,logseq____&quot;^Xlogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[146,logseq____&quot;^Vlogseq____&quot;,159,536870923]],[logseq____&quot;^15logseq____&quot;,[146,logseq____&quot;^Ulogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[146,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-d59d-4ac1-9d86-9e29ad2e73f0logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[147,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[147,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[147,logseq____&quot;^Flogseq____&quot;,142,536870923]],[logseq____&quot;^15logseq____&quot;,[147,logseq____&quot;^Xlogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[147,logseq____&quot;^Vlogseq____&quot;,143,536870923]],[logseq____&quot;^15logseq____&quot;,[147,logseq____&quot;^Ulogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[147,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-1d79-4d82-8f3a-627dd2bfc40elogseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[148,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~```C\\npage_lru_count[slotno] = ++cur_lru_count;\\n```logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[148,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[148,logseq____&quot;^Flogseq____&quot;,153,536870923]],[logseq____&quot;^15logseq____&quot;,[148,logseq____&quot;^Xlogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[148,logseq____&quot;^Vlogseq____&quot;,153,536870923]],[logseq____&quot;^15logseq____&quot;,[148,logseq____&quot;^Ulogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[148,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-dddd-470d-9e33-0539d9245d0dlogseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[149,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;### 核心功能\\n\\n1. `SimpleLruZeroPage`：新增一个page\\n2. `SimpleLruReadPage` ：读一个page\\n3. `SimpleLruWritePage` ：写一个pagelogseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[149,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[149,logseq____&quot;^Flogseq____&quot;,157,536870923]],[logseq____&quot;^15logseq____&quot;,[149,logseq____&quot;^Xlogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[149,logseq____&quot;^Vlogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[149,logseq____&quot;^Ulogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[149,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^19logseq____&quot;,3],536870923]],[logseq____&quot;^15logseq____&quot;,[149,logseq____&quot;^Jlogseq____&quot;,[],536870923]],[logseq____&quot;^15logseq____&quot;,[149,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-e980-4d14-82f1-1efcf5ae65eclogseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[150,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;bpm管理通用的page，比如heap，vm等logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[150,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[150,logseq____&quot;^Flogseq____&quot;,146,536870923]],[logseq____&quot;^15logseq____&quot;,[150,logseq____&quot;^Xlogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[150,logseq____&quot;^Vlogseq____&quot;,146,536870923]],[logseq____&quot;^15logseq____&quot;,[150,logseq____&quot;^Ulogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[150,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-8939-44d8-9c5e-9ff85e2f82a5logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[151,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~```C\\n#define SLRU_PAGES_PER_SEGMENT\\t32\\n```logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[151,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[151,logseq____&quot;^Flogseq____&quot;,161,536870923]],[logseq____&quot;^15logseq____&quot;,[151,logseq____&quot;^Xlogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[151,logseq____&quot;^Vlogseq____&quot;,155,536870923]],[logseq____&quot;^15logseq____&quot;,[151,logseq____&quot;^Ulogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[151,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-136e-4e0f-98a9-11c3a753d97blogseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[152,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;关于为什么需要记录LSN信息 `group_lsn`：这与 `WAL` 设计有关。对于 `WAL` 而言，无论是同步提交或是异步提交，都需要在对应的 `buffer page` 落盘前落盘,所以 `slru` 也需要满足这样的规则。同时，可能是为了节约内存（节约的内存实在有限），或是减少`WAL flush`的调用次数以增加 `IO` 效率，`slru`的实现中并不记录每个`buffer page`的 `LSN`，而是记录一组 `page` 的 `LSN`，在刷下一个 `page` 前，需要把一组 `page` 中最大的 `LSN` 前的 `WAL` 落盘。而这样的“一组”的长度，就为`lsn_groups_per_page`logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[152,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[152,logseq____&quot;^Flogseq____&quot;,82,536870923]],[logseq____&quot;^15logseq____&quot;,[152,logseq____&quot;^Xlogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[152,logseq____&quot;^Vlogseq____&quot;,82,536870923]],[logseq____&quot;^15logseq____&quot;,[152,logseq____&quot;^Ulogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[152,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-4bb0-4358-ae81-046d0230330elogseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[153,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;从内存结构上看，是一个数组，每个元素代表一个page。同时，记录这些page的使用次数。logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[153,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[153,logseq____&quot;^Flogseq____&quot;,162,536870923]],[logseq____&quot;^15logseq____&quot;,[153,logseq____&quot;^Xlogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[153,logseq____&quot;^Vlogseq____&quot;,143,536870923]],[logseq____&quot;^15logseq____&quot;,[153,logseq____&quot;^Ulogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[153,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-c8c8-4cf3-be8a-0c96e70d0595logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[154,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;全局 buffer 数组\\n```C\\ntypedef struct SlruSharedData\\n{\\nLWLock\\t   *ControlLock;\\n\\n/* Number of buffers managed by this SLRU structure */\\nint\\t\\t\\tnum_slots;\\n\\n/*\\n* Arrays holding info for each buffer slot.  Page number is undefined\\n* when status is EMPTY, as is page_lru_count.\\n*/\\nchar\\t  **page_buffer;\\nSlruPageStatus *page_status;\\nbool\\t   *page_dirty;\\nint\\t\\t   *page_number;\\nint\\t\\t   *page_lru_count;\\nLWLockPadded *buffer_locks;\\n\\n  XLogRecPtr *group_lsn;\\nint\\t\\t\\tlsn_groups_per_page;\\n\\n/*----------\\n* We mark a page \\logseq____&quot;most recently used\\logseq____&quot; by setting\\n*\\t\\tpage_lru_count[slotno] = ++cur_lru_count;\\n* The oldest page is therefore the one with the highest value of\\n*\\t\\tcur_lru_count - page_lru_count[slotno]\\n* The counts will eventually wrap around, but this calculation still\\n* works as long as no pagelogseq____&apos;s age exceeds INT_MAX counts.\\n*----------\\n*/\\nint\\t\\t\\tcur_lru_count;\\n} SlruSharedData;\\n```logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[154,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[154,logseq____&quot;^Flogseq____&quot;,143,536870923]],[logseq____&quot;^15logseq____&quot;,[154,logseq____&quot;^Xlogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[154,logseq____&quot;^Vlogseq____&quot;,143,536870923]],[logseq____&quot;^15logseq____&quot;,[154,logseq____&quot;^Ulogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[154,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-f588-4cf4-bbbc-bdeb857b303elogseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[155,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;## 存储结构logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[155,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[155,logseq____&quot;^Flogseq____&quot;,159,536870923]],[logseq____&quot;^15logseq____&quot;,[155,logseq____&quot;^Xlogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[155,logseq____&quot;^Vlogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[155,logseq____&quot;^Ulogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[155,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^19logseq____&quot;,2],536870923]],[logseq____&quot;^15logseq____&quot;,[155,logseq____&quot;^Jlogseq____&quot;,[],536870923]],[logseq____&quot;^15logseq____&quot;,[155,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-d596-455e-a73f-b2df3da7b878logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[156,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;slru最大的特点就是lru，非常适合处理xid这样，递增的信息。logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[156,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[156,logseq____&quot;^Flogseq____&quot;,146,536870923]],[logseq____&quot;^15logseq____&quot;,[156,logseq____&quot;^Xlogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[156,logseq____&quot;^Vlogseq____&quot;,159,536870923]],[logseq____&quot;^15logseq____&quot;,[156,logseq____&quot;^Ulogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[156,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-557a-4d00-bb68-85ec0fde419flogseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[157,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;##### 各个进程私有的pointer\\n\\n```C\\n\\n/*\\n* SlruCtlData is an unshared structure that points to the active information\\n* in shared memory.\\n*/\\ntypedef struct SlruCtlData\\n{\\nSlruShared\\tshared;\\n\\n/*\\n* Decide whether a page is \\logseq____&quot;older\\logseq____&quot; for truncation and as a hint for\\n* evicting pages in LRU order.  \\n*/\\nbool\\t\\t(*PagePrecedes) (int, int);\\n\\n/*\\n* Dir is set during SimpleLruInit and does not change thereafter. Since\\n* itlogseq____&apos;s always the same, it doesnlogseq____&apos;t need to be in shared memory.\\n*/\\nchar\\t\\tDir[64];\\n} SlruCtlData;\\n```\\n\\n初始化时，即返回一个`SlruCtlData`。`Dir` 是初始化时的标记，不同模块会填充对应的名称。logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[157,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[157,logseq____&quot;^Flogseq____&quot;,143,536870923]],[logseq____&quot;^15logseq____&quot;,[157,logseq____&quot;^Xlogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[157,logseq____&quot;^Vlogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[157,logseq____&quot;^Ulogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[157,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^19logseq____&quot;,5],536870923]],[logseq____&quot;^15logseq____&quot;,[157,logseq____&quot;^Jlogseq____&quot;,[],536870923]],[logseq____&quot;^15logseq____&quot;,[157,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-514b-43b0-a9f7-820063199877logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[158,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;同时每个page，都有状态标识，以在刷脏时，确定脏页。实际上这里没有脏页这个选项，因为只有 `valid` 状态的页才有可能是脏页，有包含关系。故在`SlruSharedData` 中使用 `page_dirty` 进行单独标识。logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[158,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[158,logseq____&quot;^Flogseq____&quot;,153,536870923]],[logseq____&quot;^15logseq____&quot;,[158,logseq____&quot;^Xlogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[158,logseq____&quot;^Vlogseq____&quot;,143,536870923]],[logseq____&quot;^15logseq____&quot;,[158,logseq____&quot;^Ulogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[158,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-82d7-4aa1-afc7-afc838717f55logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[159,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;## 简述logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[159,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[159,logseq____&quot;^Flogseq____&quot;,165,536870923]],[logseq____&quot;^15logseq____&quot;,[159,logseq____&quot;^Xlogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[159,logseq____&quot;^Vlogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[159,logseq____&quot;^Ulogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[159,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^19logseq____&quot;,2],536870923]],[logseq____&quot;^15logseq____&quot;,[159,logseq____&quot;^Jlogseq____&quot;,[],536870923]],[logseq____&quot;^15logseq____&quot;,[159,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-ac49-4fc0-b710-4c3cbdfef045logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[160,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;下面的代码分析基于pg15logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[160,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[160,logseq____&quot;^Flogseq____&quot;,156,536870923]],[logseq____&quot;^15logseq____&quot;,[160,logseq____&quot;^Xlogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[160,logseq____&quot;^Vlogseq____&quot;,159,536870923]],[logseq____&quot;^15logseq____&quot;,[160,logseq____&quot;^Ulogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[160,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-9c96-4be4-af12-e3355e5e7b8flogseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[161,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;与WAL不同，WAL文件的大小在创建时就已经确定为16M，与WAL文件重用保持一致，而slru的文件，先在内存中产生相应的page，再会去落盘。logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[161,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[161,logseq____&quot;^Flogseq____&quot;,144,536870923]],[logseq____&quot;^15logseq____&quot;,[161,logseq____&quot;^Xlogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[161,logseq____&quot;^Vlogseq____&quot;,155,536870923]],[logseq____&quot;^15logseq____&quot;,[161,logseq____&quot;^Ulogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[161,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-c0c9-4ee2-9abd-44f15006a5d0logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[162,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[162,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[162,logseq____&quot;^Flogseq____&quot;,154,536870923]],[logseq____&quot;^15logseq____&quot;,[162,logseq____&quot;^Xlogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[162,logseq____&quot;^Vlogseq____&quot;,143,536870923]],[logseq____&quot;^15logseq____&quot;,[162,logseq____&quot;^Ulogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[162,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-c703-485f-bef4-3f5955c8b0fflogseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[163,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;#### interface\\n\\n* 新增一个 `page` 到buffer。\\n```C\\n/* Initialize (or reinitialize) a page to zeroes. */\\nint\\nSimpleLruZeroPage(SlruCtl ctl, int pageno)\\n{\\nslotno = SlruSelectLRUPage(ctl, pageno);\\nSlruRecentlyUsed(shared, slotno);\\n\\n# SlruSelectLRUPage may return a in-use page, we must clear it\\nMemSet(shared-logseq____&gt;page_buffer[slotno], 0, BLCKSZ);\\n\\nSimpleLruZeroLSNs(ctl, slotno);\\n}\\n```\\n\\n* 从 `disk` 中读取一个 `page`\\n```C\\n/* Control lock must be held at entry, and will be held at exit. */\\nSimpleLruReadPage\\n{\\n  #infinite loop\\n      slotno = SlruSelectLRUPage(ctl, pageno);\\n      # for in IO slots, just wait\\n      /* update in-memory status */\\n      shared-logseq____&gt;page_number[slotno] = pageno;\\n      shared-logseq____&gt;page_status[slotno] = SLRU_PAGE_READ_IN_PROGRESS;\\n      shared-logseq____&gt;page_dirty[slotno] = false;\\n\\n      /* Acquire per-buffer lock and release control lock */\\n      LWLockAcquire(logseq____&amp;shared-logseq____&gt;buffer_locks[slotno].lock, LW_EXCLUSIVE);\\n      LWLockRelease(shared-logseq____&gt;ControlLock);\\n\\n      ok = SlruPhysicalReadPage(ctl, pageno, slotno);\\n\\n      /* re-acquire control lock */\\n      LWLockAcquire(shared-logseq____&gt;ControlLock, LW_EXCLUSIVE);\\n      # others\\n}\\n```\\n这里的锁设计很特别：\\n1. 在 `SlruSelectLRUPage` 需要获取全局锁\\n2. 在 `SimpleLruReadPage` 中，先初始化内存，再获取 `per-buffer` 锁，同时释放 `ControlLock`\\n\\n在看函数 `SimpleLruZeroPage`\\n```C\\n/* Control lock must be held at entry, and will be held at exit. */\\nSimpleLruZeroPage\\n{\\n  slotno = SlruSelectLRUPage(ctl, pageno);\\n  shared-logseq____&gt;page_number[slotno] = pageno;\\n  shared-logseq____&gt;page_status[slotno] = SLRU_PAGE_VALID;\\n  shared-logseq____&gt;page_dirty[slotno] = true;\\n}\\n```\\n难道，一旦获取 `ControlLock`，即可对任意 `slot` 进行修改？\\n\\n实际上，`SimpleLruReadPage` 读取的 `page`，必须已存在于磁盘（或者经由 `WAL` 来保证）。\\n而 `SimpleLruZeroPage` 所初始化的 `page` 必须不存在。从使用逻辑上保证二者不产生冲突。\\n\\n* SimpleLruWritePage(SlruInternalWritePage)\\n\\n```C\\n/* Control lock must be held at entry, and will be held at exit. */\\nSlruInternalWritePage\\n{\\n  /* If a write is in progress, wait for it to finish */\\n  /* Do nothing if page is not dirty */\\n\\n  /* update in-memory status */\\n  shared-logseq____&gt;page_status[slotno] = SLRU_PAGE_WRITE_IN_PROGRESS;\\n  shared-logseq____&gt;page_dirty[slotno] = false;\\n\\n  /* Acquire per-buffer lock and release control lock */\\n  LWLockAcquire(logseq____&amp;shared-logseq____&gt;buffer_locks[slotno].lock, LW_EXCLUSIVE);\\n  LWLockRelease(shared-logseq____&gt;ControlLock);\\n\\n  SlruPhysicalWritePage(ctl, pageno, slotno, fdata);\\n\\n  /* re-acquire control lock */\\n  LWLockAcquire(shared-logseq____&gt;ControlLock, LW_EXCLUSIVE);\\n\\n  shared-logseq____&gt;page_status[slotno] = SLRU_PAGE_VALID;\\n}\\n```logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[163,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[163,logseq____&quot;^Flogseq____&quot;,164,536870923]],[logseq____&quot;^15logseq____&quot;,[163,logseq____&quot;^Xlogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[163,logseq____&quot;^Vlogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[163,logseq____&quot;^Ulogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[163,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^19logseq____&quot;,4],536870923]],[logseq____&quot;^15logseq____&quot;,[163,logseq____&quot;^Jlogseq____&quot;,[],536870923]],[logseq____&quot;^15logseq____&quot;,[163,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-dd4f-4fcb-aefa-702da350c46clogseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[164,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;#### 基础函数\\n\\n* 选择一个空slot\\n\\n```C\\n/* Select the slot to re-use when we need a free slot. */\\n/* Control lock must be held at entry, and will be held at exit. */\\nstatic int\\nSlruSelectLRUPage(SlruCtl ctl, int pageno)\\n{\\nfor (;;)\\n# return if we have such a slot\\n# return if we have an empty slot \\logseq____&quot;SLRU_PAGE_EMPTY\\logseq____&quot;\\n# select a lru slot\\n\\t# return it if itlogseq____&apos;s clean. Or\\n\\t# victim it if dirty\\n# loop end -- Itlogseq____&apos;s a very clever design to dealing with corner cases\\n#             such as the victim page being re-dirtied while we wrote it.\\n}\\n```\\n\\n* 记录一个\\logseq____&quot;most recently used\\logseq____&quot;的page，`cur_lru_count++` 并用其赋值 \\n\\n```C\\n#define SlruRecentlyUsed(shared, slotno)\\t\\\\\\ndo { \\\\\\nint\\t\\tnew_lru_count = (shared)-logseq____&gt;cur_lru_count; \\\\\\nif (new_lru_count != (shared)-logseq____&gt;page_lru_count[slotno]) { \\\\\\n\\t(shared)-logseq____&gt;cur_lru_count = ++new_lru_count; \\\\\\n\\t(shared)-logseq____&gt;page_lru_count[slotno] = new_lru_count; \\\\\\n} \\\\\\n} while (0)\\n```\\n\\n* 从磁盘中读取一个 `page`\\n\\n```C\\nSlruPhysicalReadPage\\n{\\n  int\\tsegno = pageno / SLRU_PAGES_PER_SEGMENT;\\n  SlruFileName(ctl, path, segno);\\n\\n  /*\\n   * In a crash-and-restart situation, itlogseq____&apos;s possible for us to receive\\n   * commands to set the commit status of transactions whose bits are in\\n   * already-truncated segments of the commit log\\n   */\\n  fd = OpenTransientFile(path, O_RDONLY | PG_BINARY);\\n  if (fd logseq____&lt; 0 logseq____&amp;logseq____&amp; !InRecovery) ereport()\\n\\n  pg_pread(fd, shared-logseq____&gt;page_buffer[slotno], BLCKSZ, offset)\\n}\\n```\\n\\n* 向磁盘中写入一个 `page`\\n\\n```C\\nSlruPhysicalWritePage\\n{\\n  /* We must flush WAL before flush slru pages */\\n  if (shared-logseq____&gt;group_lsn != NULL)\\n  {\\n      max_lsn = shared-logseq____&gt;group_lsn[lsnindex++];\\n      XLogFlush(max_lsn);\\n  }\\n\\n  SlruFileName(ctl, path, segno);\\n  fd = OpenTransientFile(path, O_RDWR | O_CREAT | PG_BINARY);\\n  pg_pwrite(fd, shared-logseq____&gt;page_buffer[slotno], BLCKSZ, offset)\\n  /* Queue up a sync request for the checkpointer. */\\n  ...\\n}\\n```logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[164,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[164,logseq____&quot;^Flogseq____&quot;,149,536870923]],[logseq____&quot;^15logseq____&quot;,[164,logseq____&quot;^Xlogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[164,logseq____&quot;^Vlogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[164,logseq____&quot;^Ulogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[164,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^19logseq____&quot;,4],536870923]],[logseq____&quot;^15logseq____&quot;,[164,logseq____&quot;^Jlogseq____&quot;,[],536870923]],[logseq____&quot;^15logseq____&quot;,[164,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-6c00-40b6-b627-e5e2d76856a0logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[165,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;本文主要为`SLRU`本身的结构解读。 #SLRU_IMPLEMENTlogseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[165,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[165,logseq____&quot;^Flogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[165,logseq____&quot;^Xlogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[165,logseq____&quot;^Vlogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[165,logseq____&quot;^Ulogseq____&quot;,23,536870923]],[logseq____&quot;^15logseq____&quot;,[165,logseq____&quot;^Ulogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[165,logseq____&quot;^Hlogseq____&quot;,23,536870923]],[logseq____&quot;^15logseq____&quot;,[165,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-958e-40ed-a5e2-9db7f8366228logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[166,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;slru是一个简单的buffer管理模块，simple slrulogseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[166,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[166,logseq____&quot;^Flogseq____&quot;,145,536870923]],[logseq____&quot;^15logseq____&quot;,[166,logseq____&quot;^Xlogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[166,logseq____&quot;^Vlogseq____&quot;,145,536870923]],[logseq____&quot;^15logseq____&quot;,[166,logseq____&quot;^Ulogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[166,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-68a1-4ce6-a197-ebe78908228clogseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[167,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~```C\\ntypedef enum\\n{\\nSLRU_PAGE_EMPTY,\\t\\t\\t/* buffer is not in use */\\nSLRU_PAGE_READ_IN_PROGRESS, /* page is being read in */\\nSLRU_PAGE_VALID,\\t\\t\\t/* page is valid and not being written */\\nSLRU_PAGE_WRITE_IN_PROGRESS /* page is being written out */\\n} SlruPageStatus;\\n```logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[167,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[167,logseq____&quot;^Flogseq____&quot;,158,536870923]],[logseq____&quot;^15logseq____&quot;,[167,logseq____&quot;^Xlogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[167,logseq____&quot;^Vlogseq____&quot;,158,536870923]],[logseq____&quot;^15logseq____&quot;,[167,logseq____&quot;^Ulogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[167,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-0fd1-4a54-9cb9-a6783a355ff9logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[169,logseq____&quot;^Klogseq____&quot;,1703517342425,536870924]],[logseq____&quot;^15logseq____&quot;,[169,logseq____&quot;^@logseq____&quot;,false,536870924]],[logseq____&quot;^15logseq____&quot;,[169,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;65884437-33ff-48c0-b62f-88248615c4cclogseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[169,logseq____&quot;^11logseq____&quot;,logseq____&quot;65884437-33ff-48c0-b62f-88248615c4cclogseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[169,logseq____&quot;^Blogseq____&quot;,1703517342425,536870924]],[logseq____&quot;^15logseq____&quot;,[169,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-835d-4249-8b98-6a9e6f5a8b89logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[170,logseq____&quot;^Klogseq____&quot;,1703517342426,536870924]],[logseq____&quot;^15logseq____&quot;,[170,logseq____&quot;^@logseq____&quot;,false,536870924]],[logseq____&quot;^15logseq____&quot;,[170,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;6588436e-0c99-4cd1-b1a7-fbddbfb25eealogseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[170,logseq____&quot;^11logseq____&quot;,logseq____&quot;6588436e-0c99-4cd1-b1a7-fbddbfb25eealogseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[170,logseq____&quot;^Blogseq____&quot;,1703517342426,536870924]],[logseq____&quot;^15logseq____&quot;,[170,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-62e8-4bd1-a918-3b828e463012logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[171,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;A notable optimal point is:\\n```C\\nif (*ptr != parent)\\n{\\n\\tAssert(*ptr == InvalidTransactionId);\\n\\t*ptr = parent;\\n\\tSubTransCtl-logseq____&gt;shared-logseq____&gt;page_dirty[slotno] = true;\\n}\\n```\\nIf there is no need to set the parent xid, we can avoid dirtying the buffer.logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[171,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[171,logseq____&quot;^Flogseq____&quot;,185,536870924]],[logseq____&quot;^15logseq____&quot;,[171,logseq____&quot;^Xlogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[171,logseq____&quot;^Vlogseq____&quot;,185,536870924]],[logseq____&quot;^15logseq____&quot;,[171,logseq____&quot;^Ulogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[171,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-6836-45fc-a838-82e45e9b33e7logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[172,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;A notable point is that not all meaningful `xid` are in current manger\\n```\\n/* Bootstrap and frozen XIDs have no parent */\\nif (!TransactionIdIsNormal(xid))\\n\\treturn InvalidTransactionId;\\n```logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[172,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[172,logseq____&quot;^Flogseq____&quot;,175,536870924]],[logseq____&quot;^15logseq____&quot;,[172,logseq____&quot;^Xlogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[172,logseq____&quot;^Vlogseq____&quot;,175,536870924]],[logseq____&quot;^15logseq____&quot;,[172,logseq____&quot;^Ulogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[172,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-c33b-46d3-81f2-2903486f4f7flogseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[173,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~`SubTransGetTopmostTransaction`\\nid:: 6587fa8a-d02f-4b70-9995-66f1a0394080logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[173,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[173,logseq____&quot;^Flogseq____&quot;,175,536870924]],[logseq____&quot;^15logseq____&quot;,[173,logseq____&quot;^Xlogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[173,logseq____&quot;^Vlogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[173,logseq____&quot;^Ulogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[173,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^17logseq____&quot;,logseq____&quot;6587fa8a-d02f-4b70-9995-66f1a0394080logseq____&quot;],536870924]],[logseq____&quot;^15logseq____&quot;,[173,logseq____&quot;^Jlogseq____&quot;,[logseq____&quot;^17logseq____&quot;],536870924]],[logseq____&quot;^15logseq____&quot;,[173,logseq____&quot;^4logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^17logseq____&quot;,logseq____&quot;6587fa8a-d02f-4b70-9995-66f1a0394080logseq____&quot;],536870924]],[logseq____&quot;^15logseq____&quot;,[173,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u6587fa8a-d02f-4b70-9995-66f1a0394080logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[174,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;## high level viewlogseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[174,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[174,logseq____&quot;^Flogseq____&quot;,181,536870924]],[logseq____&quot;^15logseq____&quot;,[174,logseq____&quot;^Xlogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[174,logseq____&quot;^Vlogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[174,logseq____&quot;^Ulogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[174,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^19logseq____&quot;,2],536870924]],[logseq____&quot;^15logseq____&quot;,[174,logseq____&quot;^Jlogseq____&quot;,[],536870924]],[logseq____&quot;^15logseq____&quot;,[174,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-c5fe-4826-96a9-9b3250c9b956logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[175,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~`SubTransGetParent`\\nid:: 6587fc49-7103-4bea-80a6-dcdf6d913ecblogseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[175,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[175,logseq____&quot;^Flogseq____&quot;,185,536870924]],[logseq____&quot;^15logseq____&quot;,[175,logseq____&quot;^Xlogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[175,logseq____&quot;^Vlogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[175,logseq____&quot;^Ulogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[175,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^17logseq____&quot;,logseq____&quot;6587fc49-7103-4bea-80a6-dcdf6d913ecblogseq____&quot;],536870924]],[logseq____&quot;^15logseq____&quot;,[175,logseq____&quot;^Jlogseq____&quot;,[logseq____&quot;^17logseq____&quot;],536870924]],[logseq____&quot;^15logseq____&quot;,[175,logseq____&quot;^4logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^17logseq____&quot;,logseq____&quot;6587fc49-7103-4bea-80a6-dcdf6d913ecblogseq____&quot;],536870924]],[logseq____&quot;^15logseq____&quot;,[175,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u6587fc49-7103-4bea-80a6-dcdf6d913ecblogseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[176,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;Clear all the pages from `oldestActiveXID` to `nextXid`\\n#+BEGIN_QUOTE\\n`oldestActiveXID` is the oldest XID of any prepared transaction, or nextXid if there are none.\\n#+END_QUOTE `oldestActiveXID` islogseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[176,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[176,logseq____&quot;^Flogseq____&quot;,179,536870924]],[logseq____&quot;^15logseq____&quot;,[176,logseq____&quot;^Xlogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[176,logseq____&quot;^Vlogseq____&quot;,179,536870924]],[logseq____&quot;^15logseq____&quot;,[176,logseq____&quot;^Ulogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[176,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-a431-4930-95d4-45a7d41763balogseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[177,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[177,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[177,logseq____&quot;^Flogseq____&quot;,180,536870924]],[logseq____&quot;^15logseq____&quot;,[177,logseq____&quot;^Xlogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[177,logseq____&quot;^Vlogseq____&quot;,182,536870924]],[logseq____&quot;^15logseq____&quot;,[177,logseq____&quot;^Ulogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[177,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-2748-4615-aed6-a662f8597997logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[178,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;Another point is that is the assert.\\n```C\\nAssert(TransactionIdFollowsOrEquals(xid, TransactionXmin));\\n```\\n`TransactionXmin` is:\\n#+BEGIN_QUOTE\\nthe oldest xmin of any snapshot in use in the current transaction (this is the same as MyProc-logseq____&gt;xmin).\\n#+END_QUOTE\\nSince the parent `xid` of a visible `xid`(from `xmin` or `xmax` of a tuple) is not always record in `subtrans` manager, we must forbid everyone from visiting a `subtrans` record that may not exist.logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[178,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[178,logseq____&quot;^Flogseq____&quot;,172,536870924]],[logseq____&quot;^15logseq____&quot;,[178,logseq____&quot;^Xlogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[178,logseq____&quot;^Vlogseq____&quot;,175,536870924]],[logseq____&quot;^15logseq____&quot;,[178,logseq____&quot;^Ulogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[178,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-357e-4651-bb00-303107ad6f3alogseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[179,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~`StartupSUBTRANS`logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[179,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[179,logseq____&quot;^Flogseq____&quot;,173,536870924]],[logseq____&quot;^15logseq____&quot;,[179,logseq____&quot;^Xlogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[179,logseq____&quot;^Vlogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[179,logseq____&quot;^Ulogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[179,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-7153-4a6d-bb27-002eb17ebbfclogseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[180,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;From from `backend/access/transam/subtrans.c`\\n* Tree like structure\\n\\n#+BEGIN_QUOTE\\nThe pg_subtrans manager is a pg_xact-like manager that stores the parent transaction Id for each transaction\\nA main transaction has a parent of InvalidTransactionId, and each subtransaction has its immediate parent. **The tree can easily be walked from child to parent, but not in the opposite direction.**\\n#+END_QUOTE\\n\\n* No restart or crash recovery restore. But this doesnlogseq____&apos;t mean no disk storage, since we still consider that the `slru` buffer may be full.\\n\\n#+BEGIN_QUOTE\\nwe only need to remember pg_subtrans information for currently-open transactions. Thus, there is no need to preserve data over a crash and restart. During database startup, we simply force the currently-active page of SUBTRANS to zeroes.\\n#+END_QUOTElogseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[180,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[180,logseq____&quot;^Flogseq____&quot;,182,536870924]],[logseq____&quot;^15logseq____&quot;,[180,logseq____&quot;^Xlogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[180,logseq____&quot;^Vlogseq____&quot;,182,536870924]],[logseq____&quot;^15logseq____&quot;,[180,logseq____&quot;^Ulogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[180,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-1a57-41f7-a8c9-837162262d98logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[181,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;From [Official introduction ot Subtransactions](https://www.postgresql.org/docs/current/subxacts.html)\\n#+BEGIN_QUOTE\\nSubtransactions are started inside transactions, allowing large transactions to be broken into smaller units. Subtransactions can commit or abort without affecting their parent transactions, allowing parent transactions to continue. This allows errors to be handled more easily, which is a common application development pattern. The word subtransaction is often abbreviated as **subxact**.\\n#+END_QUOTElogseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[181,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[181,logseq____&quot;^Flogseq____&quot;,188,536870924]],[logseq____&quot;^15logseq____&quot;,[181,logseq____&quot;^Xlogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[181,logseq____&quot;^Vlogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[181,logseq____&quot;^Ulogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[181,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-4348-4efe-a38f-60f968037466logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[182,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;The main function:logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[182,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[182,logseq____&quot;^Flogseq____&quot;,174,536870924]],[logseq____&quot;^15logseq____&quot;,[182,logseq____&quot;^Xlogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[182,logseq____&quot;^Vlogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[182,logseq____&quot;^Ulogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[182,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-68c2-48d4-9e37-3cc051ca40f4logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[183,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~`TransactionIdDidCommit`\\nid:: 6588436e-0c99-4cd1-b1a7-fbddbfb25eealogseq____&quot;,536870925]],[logseq____&quot;^15logseq____&quot;,[183,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870925]],[logseq____&quot;^15logseq____&quot;,[183,logseq____&quot;^Flogseq____&quot;,197,536870925]],[logseq____&quot;^15logseq____&quot;,[183,logseq____&quot;^Xlogseq____&quot;,24,536870925]],[logseq____&quot;^15logseq____&quot;,[183,logseq____&quot;^Vlogseq____&quot;,197,536870925]],[logseq____&quot;^15logseq____&quot;,[183,logseq____&quot;^Ulogseq____&quot;,24,536870925]],[logseq____&quot;^15logseq____&quot;,[183,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^17logseq____&quot;,logseq____&quot;6588436e-0c99-4cd1-b1a7-fbddbfb25eealogseq____&quot;],536870925]],[logseq____&quot;^15logseq____&quot;,[183,logseq____&quot;^Jlogseq____&quot;,[logseq____&quot;^17logseq____&quot;],536870925]],[logseq____&quot;^15logseq____&quot;,[183,logseq____&quot;^4logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^17logseq____&quot;,logseq____&quot;6588436e-0c99-4cd1-b1a7-fbddbfb25eealogseq____&quot;],536870925]],[logseq____&quot;^15logseq____&quot;,[183,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u6588436e-0c99-4cd1-b1a7-fbddbfb25eealogseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[184,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;A notable point is that we may encounter page wraparound here\\n```C\\nwhile (startPage != endPage)\\n{\\n\\t(void) ZeroSUBTRANSPage(startPage);\\n\\tstartPage++;\\n\\t/* must account for wraparound */\\n\\tif (startPage logseq____&gt; TransactionIdToPage(MaxTransactionId))\\n\\t\\tstartPage = 0;\\n}\\n```logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[184,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[184,logseq____&quot;^Flogseq____&quot;,176,536870924]],[logseq____&quot;^15logseq____&quot;,[184,logseq____&quot;^Xlogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[184,logseq____&quot;^Vlogseq____&quot;,179,536870924]],[logseq____&quot;^15logseq____&quot;,[184,logseq____&quot;^Ulogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[184,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-2894-4aa1-b7bf-04f9d7f1cbe3logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[185,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~`SubTransSetParent`logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[185,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[185,logseq____&quot;^Flogseq____&quot;,191,536870924]],[logseq____&quot;^15logseq____&quot;,[185,logseq____&quot;^Xlogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[185,logseq____&quot;^Vlogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[185,logseq____&quot;^Ulogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[185,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-0b3e-4640-9e7a-78a3d8253baflogseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[186,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~`TransactionIdDidAbort`\\nid:: 65884437-33ff-48c0-b62f-88248615c4cclogseq____&quot;,536870925]],[logseq____&quot;^15logseq____&quot;,[186,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870925]],[logseq____&quot;^15logseq____&quot;,[186,logseq____&quot;^Flogseq____&quot;,183,536870925]],[logseq____&quot;^15logseq____&quot;,[186,logseq____&quot;^Xlogseq____&quot;,24,536870925]],[logseq____&quot;^15logseq____&quot;,[186,logseq____&quot;^Vlogseq____&quot;,197,536870925]],[logseq____&quot;^15logseq____&quot;,[186,logseq____&quot;^Ulogseq____&quot;,24,536870925]],[logseq____&quot;^15logseq____&quot;,[186,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^17logseq____&quot;,logseq____&quot;65884437-33ff-48c0-b62f-88248615c4cclogseq____&quot;],536870925]],[logseq____&quot;^15logseq____&quot;,[186,logseq____&quot;^Jlogseq____&quot;,[logseq____&quot;^17logseq____&quot;],536870925]],[logseq____&quot;^15logseq____&quot;,[186,logseq____&quot;^4logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^17logseq____&quot;,logseq____&quot;65884437-33ff-48c0-b62f-88248615c4cclogseq____&quot;],536870925]],[logseq____&quot;^15logseq____&quot;,[186,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884437-33ff-48c0-b62f-88248615c4cclogseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[187,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;Same as ((6587fc49-7103-4bea-80a6-dcdf6d913ecb))\\n#+BEGIN_QUOTE\\nBecause we cannot look back further than TransactionXmin, it is possible that this function will lie and return an intermediate subtransaction ID. This is OK, because in practice we only care about detecting whether the topmost parent is still running or is part of a current snapshotlogseq____&apos;s list of still-running transactions.\\n#+END_QUOTElogseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[187,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[187,logseq____&quot;^Flogseq____&quot;,173,536870924]],[logseq____&quot;^15logseq____&quot;,[187,logseq____&quot;^Xlogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[187,logseq____&quot;^Vlogseq____&quot;,173,536870924]],[logseq____&quot;^15logseq____&quot;,[187,logseq____&quot;^Ulogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[187,logseq____&quot;^Hlogseq____&quot;,175,536870924]],[logseq____&quot;^15logseq____&quot;,[187,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-a07b-4ff8-8037-c456161f6906logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[188,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;## backgroundlogseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[188,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[188,logseq____&quot;^Flogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[188,logseq____&quot;^Xlogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[188,logseq____&quot;^Vlogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[188,logseq____&quot;^Ulogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[188,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^19logseq____&quot;,2],536870924]],[logseq____&quot;^15logseq____&quot;,[188,logseq____&quot;^Jlogseq____&quot;,[],536870924]],[logseq____&quot;^15logseq____&quot;,[188,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-4331-4715-8b6e-44e474bf91a8logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[189,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;So all the three callers of this function always verify the input value:\\n\\n1. {{embed ((6588436e-0c99-4cd1-b1a7-fbddbfb25eea))}}\\n2. {{embed ((65884437-33ff-48c0-b62f-88248615c4cc))}}\\n3. ((6587fa8a-d02f-4b70-9995-66f1a0394080)) Just belowlogseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[189,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[189,logseq____&quot;^Flogseq____&quot;,178,536870924]],[logseq____&quot;^15logseq____&quot;,[189,logseq____&quot;^Slogseq____&quot;,193,536870924]],[logseq____&quot;^15logseq____&quot;,[189,logseq____&quot;^Slogseq____&quot;,194,536870924]],[logseq____&quot;^15logseq____&quot;,[189,logseq____&quot;^Xlogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[189,logseq____&quot;^Vlogseq____&quot;,178,536870924]],[logseq____&quot;^15logseq____&quot;,[189,logseq____&quot;^Ulogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[189,logseq____&quot;^Ulogseq____&quot;,169,536870924]],[logseq____&quot;^15logseq____&quot;,[189,logseq____&quot;^Ulogseq____&quot;,170,536870924]],[logseq____&quot;^15logseq____&quot;,[189,logseq____&quot;^Hlogseq____&quot;,169,536870924]],[logseq____&quot;^15logseq____&quot;,[189,logseq____&quot;^Hlogseq____&quot;,170,536870924]],[logseq____&quot;^15logseq____&quot;,[189,logseq____&quot;^Hlogseq____&quot;,173,536870924]],[logseq____&quot;^15logseq____&quot;,[189,logseq____&quot;^Hlogseq____&quot;,183,536870924]],[logseq____&quot;^15logseq____&quot;,[189,logseq____&quot;^Hlogseq____&quot;,186,536870924]],[logseq____&quot;^15logseq____&quot;,[189,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-1aef-4a2c-83cf-898b38f61280logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[190,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;Thinking of [[clog]] , to tell the parent `Xid` of each `Xact`, just store a very large array like:\\n```\\nxid parent_xid[XID_UPPER_LIMIT]\\n```\\nIn clog, two bits are needed to represent the the commit status of a `xid`. Similarly, `sizeof(xid)`(That is 32 bits) is need to represent its parent.logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[190,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[190,logseq____&quot;^Flogseq____&quot;,192,536870924]],[logseq____&quot;^15logseq____&quot;,[190,logseq____&quot;^Xlogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[190,logseq____&quot;^Vlogseq____&quot;,192,536870924]],[logseq____&quot;^15logseq____&quot;,[190,logseq____&quot;^Ulogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[190,logseq____&quot;^Ulogseq____&quot;,30,536870924]],[logseq____&quot;^15logseq____&quot;,[190,logseq____&quot;^Hlogseq____&quot;,30,536870924]],[logseq____&quot;^15logseq____&quot;,[190,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-03ed-4390-a9a4-8895d6e48456logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[191,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;## lower level designlogseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[191,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[191,logseq____&quot;^Flogseq____&quot;,192,536870924]],[logseq____&quot;^15logseq____&quot;,[191,logseq____&quot;^Xlogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[191,logseq____&quot;^Vlogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[191,logseq____&quot;^Ulogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[191,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^19logseq____&quot;,2],536870924]],[logseq____&quot;^15logseq____&quot;,[191,logseq____&quot;^Jlogseq____&quot;,[],536870924]],[logseq____&quot;^15logseq____&quot;,[191,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-e15b-4302-89a0-fab156c4764flogseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[192,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;page organizationlogseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[192,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[192,logseq____&quot;^Flogseq____&quot;,182,536870924]],[logseq____&quot;^15logseq____&quot;,[192,logseq____&quot;^Xlogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[192,logseq____&quot;^Vlogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[192,logseq____&quot;^Ulogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[192,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-c109-457f-8340-3ceddd799e96logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[193,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^1:logseq____&quot;,logseq____&quot;embedlogseq____&quot;,logseq____&quot;^1;logseq____&quot;,[logseq____&quot;((6588436e-0c99-4cd1-b1a7-fbddbfb25eea))logseq____&quot;]],536870924]],[logseq____&quot;^15logseq____&quot;,[193,logseq____&quot;^Wlogseq____&quot;,logseq____&quot;macrologseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[193,logseq____&quot;^Tlogseq____&quot;,logseq____&quot;embed ((6588436e-0c99-4cd1-b1a7-fbddbfb25eea))logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[194,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^1:logseq____&quot;,logseq____&quot;embedlogseq____&quot;,logseq____&quot;^1;logseq____&quot;,[logseq____&quot;((65884437-33ff-48c0-b62f-88248615c4cc))logseq____&quot;]],536870924]],[logseq____&quot;^15logseq____&quot;,[194,logseq____&quot;^Wlogseq____&quot;,logseq____&quot;macrologseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[194,logseq____&quot;^Tlogseq____&quot;,logseq____&quot;embed ((65884437-33ff-48c0-b62f-88248615c4cc))logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[196,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;This is the commit log interface routines.logseq____&quot;,536870925]],[logseq____&quot;^15logseq____&quot;,[196,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870925]],[logseq____&quot;^15logseq____&quot;,[196,logseq____&quot;^Flogseq____&quot;,24,536870925]],[logseq____&quot;^15logseq____&quot;,[196,logseq____&quot;^Xlogseq____&quot;,24,536870925]],[logseq____&quot;^15logseq____&quot;,[196,logseq____&quot;^Vlogseq____&quot;,24,536870925]],[logseq____&quot;^15logseq____&quot;,[196,logseq____&quot;^Ulogseq____&quot;,24,536870925]],[logseq____&quot;^15logseq____&quot;,[196,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-d5e0-4ae5-8389-7fdb90c8cafflogseq____&quot;,536870925]],[logseq____&quot;^15logseq____&quot;,[197,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;## low level designlogseq____&quot;,536870925]],[logseq____&quot;^15logseq____&quot;,[197,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870925]],[logseq____&quot;^15logseq____&quot;,[197,logseq____&quot;^Flogseq____&quot;,196,536870925]],[logseq____&quot;^15logseq____&quot;,[197,logseq____&quot;^Xlogseq____&quot;,24,536870925]],[logseq____&quot;^15logseq____&quot;,[197,logseq____&quot;^Vlogseq____&quot;,24,536870925]],[logseq____&quot;^15logseq____&quot;,[197,logseq____&quot;^Ulogseq____&quot;,24,536870925]],[logseq____&quot;^15logseq____&quot;,[197,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^19logseq____&quot;,2],536870925]],[logseq____&quot;^15logseq____&quot;,[197,logseq____&quot;^Jlogseq____&quot;,[],536870925]],[logseq____&quot;^15logseq____&quot;,[197,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-a10b-4c2b-a5a8-ab0dd7c45258logseq____&quot;,536870925]],[logseq____&quot;^15logseq____&quot;,[198,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;A notable point is to call ((6587fc49-7103-4bea-80a6-dcdf6d913ecb))\\nid:: 65884378-6b98-44b0-bd8f-e695abb68ca3\\n```C\\nif (TransactionIdPrecedes(transactionId, TransactionXmin))\\n\\treturn false;\\nparentXid = SubTransGetParent(transactionId);\\n```\\nMust verify that `transactionId` logically is less than `TransactionXmin` first.logseq____&quot;,536870925]],[logseq____&quot;^15logseq____&quot;,[198,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870925]],[logseq____&quot;^15logseq____&quot;,[198,logseq____&quot;^Flogseq____&quot;,183,536870925]],[logseq____&quot;^15logseq____&quot;,[198,logseq____&quot;^Xlogseq____&quot;,24,536870925]],[logseq____&quot;^15logseq____&quot;,[198,logseq____&quot;^Vlogseq____&quot;,183,536870925]],[logseq____&quot;^15logseq____&quot;,[198,logseq____&quot;^Ulogseq____&quot;,24,536870925]],[logseq____&quot;^15logseq____&quot;,[198,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^17logseq____&quot;,logseq____&quot;65884378-6b98-44b0-bd8f-e695abb68ca3logseq____&quot;],536870925]],[logseq____&quot;^15logseq____&quot;,[198,logseq____&quot;^Jlogseq____&quot;,[logseq____&quot;^17logseq____&quot;],536870925]],[logseq____&quot;^15logseq____&quot;,[198,logseq____&quot;^4logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^17logseq____&quot;,logseq____&quot;65884378-6b98-44b0-bd8f-e695abb68ca3logseq____&quot;],536870925]],[logseq____&quot;^15logseq____&quot;,[198,logseq____&quot;^Hlogseq____&quot;,175,536870925]],[logseq____&quot;^15logseq____&quot;,[198,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884378-6b98-44b0-bd8f-e695abb68ca3logseq____&quot;,536870925]],[logseq____&quot;^15logseq____&quot;,[199,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;A notable point is to call ((6587fc49-7103-4bea-80a6-dcdf6d913ecb))\\n```C\\nif (TransactionIdPrecedes(transactionId, TransactionXmin))\\n\\treturn true;\\nparentXid = SubTransGetParent(transactionId);\\n```\\nMust verify that `transactionId` logically is less than `TransactionXmin` first.logseq____&quot;,536870925]],[logseq____&quot;^15logseq____&quot;,[199,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870925]],[logseq____&quot;^15logseq____&quot;,[199,logseq____&quot;^Flogseq____&quot;,186,536870925]],[logseq____&quot;^15logseq____&quot;,[199,logseq____&quot;^Xlogseq____&quot;,24,536870925]],[logseq____&quot;^15logseq____&quot;,[199,logseq____&quot;^Vlogseq____&quot;,186,536870925]],[logseq____&quot;^15logseq____&quot;,[199,logseq____&quot;^Ulogseq____&quot;,24,536870925]],[logseq____&quot;^15logseq____&quot;,[199,logseq____&quot;^Hlogseq____&quot;,175,536870925]],[logseq____&quot;^15logseq____&quot;,[199,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-cd35-46ff-8cdb-f6af209a4b51logseq____&quot;,536870925]],[logseq____&quot;^15logseq____&quot;,[201,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;Data written to unlogged tables is **not written to the write-ahead log** which makes them considerably **faster** than ordinary tables. However, they are **not crash-safe**: an unlogged **table is automatically truncated** after a crash or unclean shutdown. The contents of an unlogged table are also **not replicated to standby servers**. Any indexes created on an unlogged table are automatically unlogged as well.logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[201,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[201,logseq____&quot;^Flogseq____&quot;,120,536870926]],[logseq____&quot;^15logseq____&quot;,[201,logseq____&quot;^Xlogseq____&quot;,120,536870926]],[logseq____&quot;^15logseq____&quot;,[201,logseq____&quot;^Vlogseq____&quot;,120,536870926]],[logseq____&quot;^15logseq____&quot;,[201,logseq____&quot;^Ulogseq____&quot;,120,536870926]],[logseq____&quot;^15logseq____&quot;,[201,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-41c4-4149-93f1-1eceea340e3flogseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[202,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;If this is specified, any sequences created together with the unlogged table (for identity or serial columns) are also created as unlogged.logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[202,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[202,logseq____&quot;^Flogseq____&quot;,201,536870926]],[logseq____&quot;^15logseq____&quot;,[202,logseq____&quot;^Xlogseq____&quot;,120,536870926]],[logseq____&quot;^15logseq____&quot;,[202,logseq____&quot;^Vlogseq____&quot;,120,536870926]],[logseq____&quot;^15logseq____&quot;,[202,logseq____&quot;^Ulogseq____&quot;,120,536870926]],[logseq____&quot;^15logseq____&quot;,[202,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-9a01-4fa7-a639-df0945a4ae04logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[203,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;Data written to unlogged tables is not written to the write-ahead log (see [Chapter 30](https://www.postgresql.org/docs/current/wal.html)), which makes them considerably faster than ordinary tables. However, they are not crash-safe: an unlogged table is automatically truncated after a crash or unclean shutdown. The contents of an unlogged table are also not replicated to standby servers. Any indexes created on an unlogged table are automatically unlogged as well.logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[203,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[203,logseq____&quot;^Flogseq____&quot;,202,536870926]],[logseq____&quot;^15logseq____&quot;,[203,logseq____&quot;^Xlogseq____&quot;,120,536870926]],[logseq____&quot;^15logseq____&quot;,[203,logseq____&quot;^Vlogseq____&quot;,120,536870926]],[logseq____&quot;^15logseq____&quot;,[203,logseq____&quot;^Ulogseq____&quot;,120,536870926]],[logseq____&quot;^15logseq____&quot;,[203,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-a7f0-4303-86fe-6658347ecd3dlogseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[204,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;If this is specified, any sequences created together with the unlogged table (for identity or serial columns) are also created as unlogged.logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[204,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[204,logseq____&quot;^Flogseq____&quot;,203,536870926]],[logseq____&quot;^15logseq____&quot;,[204,logseq____&quot;^Xlogseq____&quot;,120,536870926]],[logseq____&quot;^15logseq____&quot;,[204,logseq____&quot;^Vlogseq____&quot;,120,536870926]],[logseq____&quot;^15logseq____&quot;,[204,logseq____&quot;^Ulogseq____&quot;,120,536870926]],[logseq____&quot;^15logseq____&quot;,[204,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-9347-4e17-8ac8-184dfa8e17a9logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[206,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;但是因为锁，这会形成两个独立的WAL日志。在回放WAL日志时：logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[206,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[206,logseq____&quot;^Flogseq____&quot;,208,536870927]],[logseq____&quot;^15logseq____&quot;,[206,logseq____&quot;^Xlogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[206,logseq____&quot;^Vlogseq____&quot;,208,536870927]],[logseq____&quot;^15logseq____&quot;,[206,logseq____&quot;^Ulogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[206,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-a09b-4df6-84ba-2c17a5e7e252logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[207,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;WAL 包含一个（或一小组）页的**增量更新**的重做信息。\\n  1. 依赖文件系统和硬件的原子写，不可靠！\\n  2. checkpoint，checkpointer后的第一次写全页。通过 checkpoint 留下的 `LSN ` 来判断是否为第一次写logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[207,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[207,logseq____&quot;^Flogseq____&quot;,221,536870927]],[logseq____&quot;^15logseq____&quot;,[207,logseq____&quot;^Xlogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[207,logseq____&quot;^Vlogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[207,logseq____&quot;^Ulogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[207,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-d9ef-4c81-8a97-3773914b2303logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[208,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;在btree索引中，页的分裂分为两步（1）分配一个新页（2）在上一层的页(parent page)中新插入一条数据。logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[208,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[208,logseq____&quot;^Flogseq____&quot;,212,536870927]],[logseq____&quot;^15logseq____&quot;,[208,logseq____&quot;^Xlogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[208,logseq____&quot;^Vlogseq____&quot;,220,536870927]],[logseq____&quot;^15logseq____&quot;,[208,logseq____&quot;^Ulogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[208,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-bc08-4a8c-96c1-a1b96f16ee0dlogseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[209,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;回放第（1）个日志：\\n* 分配一个新页，将元组移动进去\\n* 设置标记位，表示上一层的页没有更新logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[209,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[209,logseq____&quot;^Flogseq____&quot;,206,536870927]],[logseq____&quot;^15logseq____&quot;,[209,logseq____&quot;^Xlogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[209,logseq____&quot;^Vlogseq____&quot;,208,536870927]],[logseq____&quot;^15logseq____&quot;,[209,logseq____&quot;^Ulogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[209,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-6c65-45c4-a970-e6f2487a65eelogseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[210,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;基本思想:logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[210,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[210,logseq____&quot;^Flogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[210,logseq____&quot;^Xlogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[210,logseq____&quot;^Vlogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[210,logseq____&quot;^Ulogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[210,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-52ec-43a0-af19-c94e65702858logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[211,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;1. pin and exclusive-lock the shared bufferlogseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[211,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[211,logseq____&quot;^Flogseq____&quot;,213,536870927]],[logseq____&quot;^15logseq____&quot;,[211,logseq____&quot;^Xlogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[211,logseq____&quot;^Vlogseq____&quot;,213,536870927]],[logseq____&quot;^15logseq____&quot;,[211,logseq____&quot;^Ulogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[211,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-8931-429d-9158-e94fc339be2dlogseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[212,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;一些复杂的操作，需要原子地写下一串WAL记录，但中间状态必须自洽(self-consistent)。这样在回放wal日志时，如果中断，系统还能够正常运行。注意：此时相当于事务回滚，但是其部分更改已经落盘。举例：logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[212,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[212,logseq____&quot;^Flogseq____&quot;,220,536870927]],[logseq____&quot;^15logseq____&quot;,[212,logseq____&quot;^Xlogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[212,logseq____&quot;^Vlogseq____&quot;,220,536870927]],[logseq____&quot;^15logseq____&quot;,[212,logseq____&quot;^Ulogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[212,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-7c4d-4b04-bb68-feca0ce8ec30logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[213,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;3. 写下WAL日志的逻辑为logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[213,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[213,logseq____&quot;^Flogseq____&quot;,207,536870927]],[logseq____&quot;^15logseq____&quot;,[213,logseq____&quot;^Xlogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[213,logseq____&quot;^Vlogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[213,logseq____&quot;^Ulogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[213,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-c94f-4d3e-aab6-921886eec6f4logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[214,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;日志在数据页前落盘 #wallogseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[214,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[214,logseq____&quot;^Flogseq____&quot;,210,536870927]],[logseq____&quot;^15logseq____&quot;,[214,logseq____&quot;^Xlogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[214,logseq____&quot;^Vlogseq____&quot;,210,536870927]],[logseq____&quot;^15logseq____&quot;,[214,logseq____&quot;^Ulogseq____&quot;,25,536870927]],[logseq____&quot;^15logseq____&quot;,[214,logseq____&quot;^Ulogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[214,logseq____&quot;^Hlogseq____&quot;,25,536870927]],[logseq____&quot;^15logseq____&quot;,[214,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-15b9-4584-b2ee-14e032cdb442logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[215,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;2. 只有在要写WAL时，才能标记脏页（TODO，为什么？）logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[215,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[215,logseq____&quot;^Flogseq____&quot;,219,536870927]],[logseq____&quot;^15logseq____&quot;,[215,logseq____&quot;^Xlogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[215,logseq____&quot;^Vlogseq____&quot;,218,536870927]],[logseq____&quot;^15logseq____&quot;,[215,logseq____&quot;^Ulogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[215,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-7f45-46c9-96f0-7bccd08cac6elogseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[216,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;回放第（2）个日志：\\n* 在上一层的页中新插入一条数据\\n* 清除第（1）个日志中的标记位logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[216,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[216,logseq____&quot;^Flogseq____&quot;,209,536870927]],[logseq____&quot;^15logseq____&quot;,[216,logseq____&quot;^Xlogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[216,logseq____&quot;^Vlogseq____&quot;,208,536870927]],[logseq____&quot;^15logseq____&quot;,[216,logseq____&quot;^Ulogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[216,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-76bd-4eff-a227-91767af28469logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[217,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;5. 使用`XLogBeginInsert` 和 `XLogRegister*` 函数构建WAL，使用返回的`LSN`来更新`page`logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[217,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[217,logseq____&quot;^Flogseq____&quot;,218,536870927]],[logseq____&quot;^15logseq____&quot;,[217,logseq____&quot;^Xlogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[217,logseq____&quot;^Vlogseq____&quot;,213,536870927]],[logseq____&quot;^15logseq____&quot;,[217,logseq____&quot;^Ulogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[217,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-4f56-495b-82ed-92ee0ac41616logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[218,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;4. 标记为脏页，logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[218,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[218,logseq____&quot;^Flogseq____&quot;,226,536870927]],[logseq____&quot;^15logseq____&quot;,[218,logseq____&quot;^Xlogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[218,logseq____&quot;^Vlogseq____&quot;,213,536870927]],[logseq____&quot;^15logseq____&quot;,[218,logseq____&quot;^Ulogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[218,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-dd2b-4ae4-936e-33f2d32b83e5logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[219,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;1. 必须在WAL日志写入前完成（TODO，为什么？`SyncOneBuffer`）logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[219,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[219,logseq____&quot;^Flogseq____&quot;,218,536870927]],[logseq____&quot;^15logseq____&quot;,[219,logseq____&quot;^Xlogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[219,logseq____&quot;^Vlogseq____&quot;,218,536870927]],[logseq____&quot;^15logseq____&quot;,[219,logseq____&quot;^Ulogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[219,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-c35a-41fb-80e6-3255dc5f91c7logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[220,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;自洽(self-consistent)logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[220,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[220,logseq____&quot;^Flogseq____&quot;,213,536870927]],[logseq____&quot;^15logseq____&quot;,[220,logseq____&quot;^Xlogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[220,logseq____&quot;^Vlogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[220,logseq____&quot;^Ulogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[220,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-033f-4c98-8a92-e0061f21d204logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[221,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~`LSN`：刷脏前检查`LSN`对应的日志已经落盘。\\n优势\\n  1. 仅在必要的时候等待`XLOG`的`IO`。（异步`IO`）\\n  2. `LSN`的检查模块只用在 buffer manager 中实现\\n  3. 在WAL回放时，避免相同的日志被重复回放（可重入）。（TODO：full page write是否在另一个层面上保证了可重入）logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[221,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[221,logseq____&quot;^Flogseq____&quot;,210,536870927]],[logseq____&quot;^15logseq____&quot;,[221,logseq____&quot;^Xlogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[221,logseq____&quot;^Vlogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[221,logseq____&quot;^Ulogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[221,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-4429-4c06-a1ea-2e00a0244372logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[222,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;标志位通常情况下不可见，因为对 child page 的修改时持有的锁，在两个操作完成后才会释放。logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[222,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[222,logseq____&quot;^Flogseq____&quot;,216,536870927]],[logseq____&quot;^15logseq____&quot;,[222,logseq____&quot;^Xlogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[222,logseq____&quot;^Vlogseq____&quot;,208,536870927]],[logseq____&quot;^15logseq____&quot;,[222,logseq____&quot;^Ulogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[222,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-ba91-4536-9d6a-c7e854d2b742logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[223,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;7. 解锁和unpin （注意顺序）logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[223,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[223,logseq____&quot;^Flogseq____&quot;,224,536870927]],[logseq____&quot;^15logseq____&quot;,[223,logseq____&quot;^Xlogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[223,logseq____&quot;^Vlogseq____&quot;,213,536870927]],[logseq____&quot;^15logseq____&quot;,[223,logseq____&quot;^Ulogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[223,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-0408-4c13-a7df-e690a46efb3flogseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[224,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;6. END_CRIT_SECTION，退出logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[224,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[224,logseq____&quot;^Flogseq____&quot;,217,536870927]],[logseq____&quot;^15logseq____&quot;,[224,logseq____&quot;^Xlogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[224,logseq____&quot;^Vlogseq____&quot;,213,536870927]],[logseq____&quot;^15logseq____&quot;,[224,logseq____&quot;^Ulogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[224,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-78a4-43db-ba57-531aa52f407flogseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[225,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;2. START_CRIT_SECTION，发生错误时确保整个数据库能立即重启logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[225,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[225,logseq____&quot;^Flogseq____&quot;,211,536870927]],[logseq____&quot;^15logseq____&quot;,[225,logseq____&quot;^Xlogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[225,logseq____&quot;^Vlogseq____&quot;,213,536870927]],[logseq____&quot;^15logseq____&quot;,[225,logseq____&quot;^Ulogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[225,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-8e89-4bb0-906f-4600a583fc1alogseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[226,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;3. 在shared buffer上，进行对应的修改logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[226,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[226,logseq____&quot;^Flogseq____&quot;,225,536870927]],[logseq____&quot;^15logseq____&quot;,[226,logseq____&quot;^Xlogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[226,logseq____&quot;^Vlogseq____&quot;,213,536870927]],[logseq____&quot;^15logseq____&quot;,[226,logseq____&quot;^Ulogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[226,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-e9e5-49ab-9b88-746cda90b1fdlogseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[227,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;仅在写下第（2）个日志前，数据库恰好崩溃，标志位才会被感知。\\n* (该标志位应该没有MVCC，否则会在事务层屏蔽）#TODO\\n* 搜索时，不管这个中间状态\\n* 插入时，如果发现这个中间状态，先在上一层的页插入对应key，以修复这个“崩溃”状态，再继续插入logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[227,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[227,logseq____&quot;^Flogseq____&quot;,222,536870927]],[logseq____&quot;^15logseq____&quot;,[227,logseq____&quot;^Xlogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[227,logseq____&quot;^Vlogseq____&quot;,208,536870927]],[logseq____&quot;^15logseq____&quot;,[227,logseq____&quot;^Ulogseq____&quot;,4,536870927]],[logseq____&quot;^15logseq____&quot;,[227,logseq____&quot;^Ulogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[227,logseq____&quot;^Hlogseq____&quot;,4,536870927]],[logseq____&quot;^15logseq____&quot;,[227,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-3bda-42a1-a30a-c98ac28760felogseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[229,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;like `XLogRegisterData` but register with thespecific bufferlogseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[229,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[229,logseq____&quot;^Flogseq____&quot;,240,536870928]],[logseq____&quot;^15logseq____&quot;,[229,logseq____&quot;^Xlogseq____&quot;,26,536870928]],[logseq____&quot;^15logseq____&quot;,[229,logseq____&quot;^Vlogseq____&quot;,240,536870928]],[logseq____&quot;^15logseq____&quot;,[229,logseq____&quot;^Ulogseq____&quot;,26,536870928]],[logseq____&quot;^15logseq____&quot;,[229,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-2267-402f-993c-0299dee6388dlogseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[230,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~```\\nvoid\\nXLogRegisterBlock(uint8 block_id, RelFileLocator *rlocator, ForkNumberforknum,\\n                  BlockNumber blknum, Page page, uint8 flags)\\n```logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[230,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[230,logseq____&quot;^Flogseq____&quot;,237,536870928]],[logseq____&quot;^15logseq____&quot;,[230,logseq____&quot;^Xlogseq____&quot;,26,536870928]],[logseq____&quot;^15logseq____&quot;,[230,logseq____&quot;^Vlogseq____&quot;,237,536870928]],[logseq____&quot;^15logseq____&quot;,[230,logseq____&quot;^Ulogseq____&quot;,26,536870928]],[logseq____&quot;^15logseq____&quot;,[230,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-02e1-4952-a813-ef635cab4eb5logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[231,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;value we need from parameterslogseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[231,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[231,logseq____&quot;^Flogseq____&quot;,230,536870928]],[logseq____&quot;^15logseq____&quot;,[231,logseq____&quot;^Xlogseq____&quot;,26,536870928]],[logseq____&quot;^15logseq____&quot;,[231,logseq____&quot;^Vlogseq____&quot;,237,536870928]],[logseq____&quot;^15logseq____&quot;,[231,logseq____&quot;^Ulogseq____&quot;,26,536870928]],[logseq____&quot;^15logseq____&quot;,[231,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-db59-4421-98d9-b2114effdb4clogseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[232,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~```\\nXLogRegisterBufData\\n  regbuf = logseq____&amp;registered_buffers[block_id];\\n  rdata = logseq____&amp;rdatas[num_rdatas++];\\n\\n  rdata-logseq____&gt;data = data;\\n  rdata-logseq____&gt;len = len;\\n\\n  regbuf-logseq____&gt;rdata_tail-logseq____&gt;next = rdata;\\n  regbuf-logseq____&gt;rdata_tail = rdata;\\n  regbuf-logseq____&gt;rdata_len += len;\\n```logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[232,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[232,logseq____&quot;^Flogseq____&quot;,229,536870928]],[logseq____&quot;^15logseq____&quot;,[232,logseq____&quot;^Xlogseq____&quot;,26,536870928]],[logseq____&quot;^15logseq____&quot;,[232,logseq____&quot;^Vlogseq____&quot;,240,536870928]],[logseq____&quot;^15logseq____&quot;,[232,logseq____&quot;^Ulogseq____&quot;,26,536870928]],[logseq____&quot;^15logseq____&quot;,[232,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-e553-4ac9-8594-72df1c3bf254logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[233,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;## XLogRegisterDatalogseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[233,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[233,logseq____&quot;^Flogseq____&quot;,237,536870928]],[logseq____&quot;^15logseq____&quot;,[233,logseq____&quot;^Xlogseq____&quot;,26,536870928]],[logseq____&quot;^15logseq____&quot;,[233,logseq____&quot;^Vlogseq____&quot;,26,536870928]],[logseq____&quot;^15logseq____&quot;,[233,logseq____&quot;^Ulogseq____&quot;,26,536870928]],[logseq____&quot;^15logseq____&quot;,[233,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^19logseq____&quot;,2],536870928]],[logseq____&quot;^15logseq____&quot;,[233,logseq____&quot;^Jlogseq____&quot;,[],536870928]],[logseq____&quot;^15logseq____&quot;,[233,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-7b4a-414d-8308-ab959810e259logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[234,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;add record to the main chunklogseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[234,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[234,logseq____&quot;^Flogseq____&quot;,233,536870928]],[logseq____&quot;^15logseq____&quot;,[234,logseq____&quot;^Xlogseq____&quot;,26,536870928]],[logseq____&quot;^15logseq____&quot;,[234,logseq____&quot;^Vlogseq____&quot;,233,536870928]],[logseq____&quot;^15logseq____&quot;,[234,logseq____&quot;^Ulogseq____&quot;,26,536870928]],[logseq____&quot;^15logseq____&quot;,[234,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-86bd-4e04-b27c-ffe443169580logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[235,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;just to record a bufferlogseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[235,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[235,logseq____&quot;^Flogseq____&quot;,236,536870928]],[logseq____&quot;^15logseq____&quot;,[235,logseq____&quot;^Xlogseq____&quot;,26,536870928]],[logseq____&quot;^15logseq____&quot;,[235,logseq____&quot;^Vlogseq____&quot;,236,536870928]],[logseq____&quot;^15logseq____&quot;,[235,logseq____&quot;^Ulogseq____&quot;,25,536870928]],[logseq____&quot;^15logseq____&quot;,[235,logseq____&quot;^Ulogseq____&quot;,26,536870928]],[logseq____&quot;^15logseq____&quot;,[235,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-0cf7-421c-8051-0979df3b7644logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[236,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;## XLogRegisterBuffer #wallogseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[236,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[236,logseq____&quot;^Flogseq____&quot;,241,536870928]],[logseq____&quot;^15logseq____&quot;,[236,logseq____&quot;^Xlogseq____&quot;,26,536870928]],[logseq____&quot;^15logseq____&quot;,[236,logseq____&quot;^Vlogseq____&quot;,26,536870928]],[logseq____&quot;^15logseq____&quot;,[236,logseq____&quot;^Ulogseq____&quot;,25,536870928]],[logseq____&quot;^15logseq____&quot;,[236,logseq____&quot;^Ulogseq____&quot;,26,536870928]],[logseq____&quot;^15logseq____&quot;,[236,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^19logseq____&quot;,2],536870928]],[logseq____&quot;^15logseq____&quot;,[236,logseq____&quot;^Jlogseq____&quot;,[],536870928]],[logseq____&quot;^15logseq____&quot;,[236,logseq____&quot;^Hlogseq____&quot;,25,536870928]],[logseq____&quot;^15logseq____&quot;,[236,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-f924-4363-9883-1485b0a9a66flogseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[237,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;## XLogRegisterBlocklogseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[237,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[237,logseq____&quot;^Flogseq____&quot;,236,536870928]],[logseq____&quot;^15logseq____&quot;,[237,logseq____&quot;^Xlogseq____&quot;,26,536870928]],[logseq____&quot;^15logseq____&quot;,[237,logseq____&quot;^Vlogseq____&quot;,26,536870928]],[logseq____&quot;^15logseq____&quot;,[237,logseq____&quot;^Ulogseq____&quot;,26,536870928]],[logseq____&quot;^15logseq____&quot;,[237,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^19logseq____&quot;,2],536870928]],[logseq____&quot;^15logseq____&quot;,[237,logseq____&quot;^Jlogseq____&quot;,[],536870928]],[logseq____&quot;^15logseq____&quot;,[237,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-eabd-4848-a4cc-d5903c95a18clogseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[238,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~```\\nXLogRegisterData\\nrdata = logseq____&amp;rdatas[num_rdatas++];\\nrdata-logseq____&gt;data = data;\\nrdata-logseq____&gt;len = len;\\nmainrdata_last-logseq____&gt;next = rdata;\\nmainrdata_last = rdata;\\nmainrdata_len += len;\\n```logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[238,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[238,logseq____&quot;^Flogseq____&quot;,234,536870928]],[logseq____&quot;^15logseq____&quot;,[238,logseq____&quot;^Xlogseq____&quot;,26,536870928]],[logseq____&quot;^15logseq____&quot;,[238,logseq____&quot;^Vlogseq____&quot;,233,536870928]],[logseq____&quot;^15logseq____&quot;,[238,logseq____&quot;^Ulogseq____&quot;,26,536870928]],[logseq____&quot;^15logseq____&quot;,[238,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-a26b-4bb7-a1a5-32be019110b7logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[239,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~```\\nXLogRegisterBuffer\\n  regbuf = logseq____&amp;registered_buffers[block_id];\\n  BufferGetTag(buffer, logseq____&amp;regbuf-logseq____&gt;rlocator, logseq____&amp;regbuf-logseq____&gt;forkno, regbuf-logseq____&gt;block);\\n  regbuf-logseq____&gt;page = BufferGetPage(buffer);\\n  regbuf-logseq____&gt;flags = flags;\\n  regbuf-logseq____&gt;rdata_tail = (XLogRecData *) logseq____&amp;regbuf-logseq____&gt;rdata_head;\\n  regbuf-logseq____&gt;rdata_len = 0;\\n  gbuf-logseq____&gt;rdata_tail = (XLogRecData *) logseq____&amp;regbuf-logseq____&gt;rdata_head;\\n  regbuf-logseq____&gt;rdata_len = 0;\\n```logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[239,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[239,logseq____&quot;^Flogseq____&quot;,235,536870928]],[logseq____&quot;^15logseq____&quot;,[239,logseq____&quot;^Xlogseq____&quot;,26,536870928]],[logseq____&quot;^15logseq____&quot;,[239,logseq____&quot;^Vlogseq____&quot;,236,536870928]],[logseq____&quot;^15logseq____&quot;,[239,logseq____&quot;^Ulogseq____&quot;,25,536870928]],[logseq____&quot;^15logseq____&quot;,[239,logseq____&quot;^Ulogseq____&quot;,26,536870928]],[logseq____&quot;^15logseq____&quot;,[239,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-f521-4cd0-8a35-d85baf389cc1logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[240,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;## XLogRegisterBufDatalogseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[240,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[240,logseq____&quot;^Flogseq____&quot;,233,536870928]],[logseq____&quot;^15logseq____&quot;,[240,logseq____&quot;^Xlogseq____&quot;,26,536870928]],[logseq____&quot;^15logseq____&quot;,[240,logseq____&quot;^Vlogseq____&quot;,26,536870928]],[logseq____&quot;^15logseq____&quot;,[240,logseq____&quot;^Ulogseq____&quot;,26,536870928]],[logseq____&quot;^15logseq____&quot;,[240,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^19logseq____&quot;,2],536870928]],[logseq____&quot;^15logseq____&quot;,[240,logseq____&quot;^Jlogseq____&quot;,[],536870928]],[logseq____&quot;^15logseq____&quot;,[240,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-da75-44ff-b47e-aa89dd870c9flogseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[241,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;![🖼 wal-record-structure.png](../assets/wal-record-structure.png)logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[241,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[241,logseq____&quot;^Flogseq____&quot;,26,536870928]],[logseq____&quot;^15logseq____&quot;,[241,logseq____&quot;^Xlogseq____&quot;,26,536870928]],[logseq____&quot;^15logseq____&quot;,[241,logseq____&quot;^Vlogseq____&quot;,26,536870928]],[logseq____&quot;^15logseq____&quot;,[241,logseq____&quot;^Ulogseq____&quot;,26,536870928]],[logseq____&quot;^15logseq____&quot;,[241,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-7394-4ee3-be40-4c3c2063b55alogseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[243,logseq____&quot;^Klogseq____&quot;,1703517342561,536870929]],[logseq____&quot;^15logseq____&quot;,[243,logseq____&quot;^@logseq____&quot;,false,536870929]],[logseq____&quot;^15logseq____&quot;,[243,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;fsmlogseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[243,logseq____&quot;^11logseq____&quot;,logseq____&quot;fsmlogseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[243,logseq____&quot;^Blogseq____&quot;,1703517342561,536870929]],[logseq____&quot;^15logseq____&quot;,[243,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-270a-4d37-85ab-7c976af88d4dlogseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[244,logseq____&quot;^Klogseq____&quot;,1703517342561,536870929]],[logseq____&quot;^15logseq____&quot;,[244,logseq____&quot;^@logseq____&quot;,false,536870929]],[logseq____&quot;^15logseq____&quot;,[244,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;vmlogseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[244,logseq____&quot;^11logseq____&quot;,logseq____&quot;vmlogseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[244,logseq____&quot;^Blogseq____&quot;,1703517342561,536870929]],[logseq____&quot;^15logseq____&quot;,[244,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-ab9a-4f66-85da-5827c19369bflogseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[245,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;Which page to modify.(An unique ID, See [[block]]  and [[relfilelocator]] )\\nlogseq.order-list-type:: numberlogseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[245,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[245,logseq____&quot;^Flogseq____&quot;,251,536870929]],[logseq____&quot;^15logseq____&quot;,[245,logseq____&quot;^Xlogseq____&quot;,21,536870929]],[logseq____&quot;^15logseq____&quot;,[245,logseq____&quot;^Vlogseq____&quot;,251,536870929]],[logseq____&quot;^15logseq____&quot;,[245,logseq____&quot;^Ulogseq____&quot;,21,536870929]],[logseq____&quot;^15logseq____&quot;,[245,logseq____&quot;^Ulogseq____&quot;,51,536870929]],[logseq____&quot;^15logseq____&quot;,[245,logseq____&quot;^Ulogseq____&quot;,118,536870929]],[logseq____&quot;^15logseq____&quot;,[245,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^18logseq____&quot;,logseq____&quot;numberlogseq____&quot;],536870929]],[logseq____&quot;^15logseq____&quot;,[245,logseq____&quot;^Jlogseq____&quot;,[logseq____&quot;^18logseq____&quot;],536870929]],[logseq____&quot;^15logseq____&quot;,[245,logseq____&quot;^4logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^18logseq____&quot;,logseq____&quot;numberlogseq____&quot;],536870929]],[logseq____&quot;^15logseq____&quot;,[245,logseq____&quot;^Hlogseq____&quot;,51,536870929]],[logseq____&quot;^15logseq____&quot;,[245,logseq____&quot;^Hlogseq____&quot;,118,536870929]],[logseq____&quot;^15logseq____&quot;,[245,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-d133-4cae-9b76-acf7e1571fc3logseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[246,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;Unique page IDlogseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[246,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[246,logseq____&quot;^Flogseq____&quot;,251,536870929]],[logseq____&quot;^15logseq____&quot;,[246,logseq____&quot;^Xlogseq____&quot;,21,536870929]],[logseq____&quot;^15logseq____&quot;,[246,logseq____&quot;^Vlogseq____&quot;,256,536870929]],[logseq____&quot;^15logseq____&quot;,[246,logseq____&quot;^Ulogseq____&quot;,21,536870929]],[logseq____&quot;^15logseq____&quot;,[246,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-e8a5-482a-808f-452a0b7aa9f7logseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[247,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~`relfilelocator`: which relationlogseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[247,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[247,logseq____&quot;^Flogseq____&quot;,248,536870929]],[logseq____&quot;^15logseq____&quot;,[247,logseq____&quot;^Xlogseq____&quot;,21,536870929]],[logseq____&quot;^15logseq____&quot;,[247,logseq____&quot;^Vlogseq____&quot;,246,536870929]],[logseq____&quot;^15logseq____&quot;,[247,logseq____&quot;^Ulogseq____&quot;,21,536870929]],[logseq____&quot;^15logseq____&quot;,[247,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-c44f-432d-b8e2-4bf0f6cdad5dlogseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[248,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;For heap pages: The three below attributes can specify a concrete pagelogseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[248,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[248,logseq____&quot;^Flogseq____&quot;,246,536870929]],[logseq____&quot;^15logseq____&quot;,[248,logseq____&quot;^Xlogseq____&quot;,21,536870929]],[logseq____&quot;^15logseq____&quot;,[248,logseq____&quot;^Vlogseq____&quot;,246,536870929]],[logseq____&quot;^15logseq____&quot;,[248,logseq____&quot;^Ulogseq____&quot;,21,536870929]],[logseq____&quot;^15logseq____&quot;,[248,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-2faa-4094-bbbe-70444c7ab938logseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[249,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~`forknumber`: type -- that is #vm, #fsm or main datalogseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[249,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[249,logseq____&quot;^Flogseq____&quot;,250,536870929]],[logseq____&quot;^15logseq____&quot;,[249,logseq____&quot;^Xlogseq____&quot;,21,536870929]],[logseq____&quot;^15logseq____&quot;,[249,logseq____&quot;^Vlogseq____&quot;,246,536870929]],[logseq____&quot;^15logseq____&quot;,[249,logseq____&quot;^Ulogseq____&quot;,21,536870929]],[logseq____&quot;^15logseq____&quot;,[249,logseq____&quot;^Ulogseq____&quot;,243,536870929]],[logseq____&quot;^15logseq____&quot;,[249,logseq____&quot;^Ulogseq____&quot;,244,536870929]],[logseq____&quot;^15logseq____&quot;,[249,logseq____&quot;^Hlogseq____&quot;,243,536870929]],[logseq____&quot;^15logseq____&quot;,[249,logseq____&quot;^Hlogseq____&quot;,244,536870929]],[logseq____&quot;^15logseq____&quot;,[249,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-04da-4b71-b3d6-7156f5c776a5logseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[250,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~`block number`: page offsetlogseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[250,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[250,logseq____&quot;^Flogseq____&quot;,247,536870929]],[logseq____&quot;^15logseq____&quot;,[250,logseq____&quot;^Xlogseq____&quot;,21,536870929]],[logseq____&quot;^15logseq____&quot;,[250,logseq____&quot;^Vlogseq____&quot;,246,536870929]],[logseq____&quot;^15logseq____&quot;,[250,logseq____&quot;^Ulogseq____&quot;,21,536870929]],[logseq____&quot;^15logseq____&quot;,[250,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-20f3-417c-8c89-6d478ee4ec3flogseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[251,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;Logically, a `WAL` record must contains the three parts below:logseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[251,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[251,logseq____&quot;^Flogseq____&quot;,253,536870929]],[logseq____&quot;^15logseq____&quot;,[251,logseq____&quot;^Xlogseq____&quot;,21,536870929]],[logseq____&quot;^15logseq____&quot;,[251,logseq____&quot;^Vlogseq____&quot;,256,536870929]],[logseq____&quot;^15logseq____&quot;,[251,logseq____&quot;^Ulogseq____&quot;,21,536870929]],[logseq____&quot;^15logseq____&quot;,[251,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-5aa4-4a91-89ed-5cc2b68ee776logseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[252,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;The way to modify the page\\nlogseq.order-list-type:: numberlogseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[252,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[252,logseq____&quot;^Flogseq____&quot;,254,536870929]],[logseq____&quot;^15logseq____&quot;,[252,logseq____&quot;^Xlogseq____&quot;,21,536870929]],[logseq____&quot;^15logseq____&quot;,[252,logseq____&quot;^Vlogseq____&quot;,251,536870929]],[logseq____&quot;^15logseq____&quot;,[252,logseq____&quot;^Ulogseq____&quot;,21,536870929]],[logseq____&quot;^15logseq____&quot;,[252,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^18logseq____&quot;,logseq____&quot;numberlogseq____&quot;],536870929]],[logseq____&quot;^15logseq____&quot;,[252,logseq____&quot;^Jlogseq____&quot;,[logseq____&quot;^18logseq____&quot;],536870929]],[logseq____&quot;^15logseq____&quot;,[252,logseq____&quot;^4logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^18logseq____&quot;,logseq____&quot;numberlogseq____&quot;],536870929]],[logseq____&quot;^15logseq____&quot;,[252,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-fa67-4fa3-b01c-18c5893add2elogseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[253,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;high level glance\\nid:: 65831e78-968c-418d-a401-f9a4afdd1587logseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[253,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[253,logseq____&quot;^Flogseq____&quot;,256,536870929]],[logseq____&quot;^15logseq____&quot;,[253,logseq____&quot;^Xlogseq____&quot;,21,536870929]],[logseq____&quot;^15logseq____&quot;,[253,logseq____&quot;^Vlogseq____&quot;,256,536870929]],[logseq____&quot;^15logseq____&quot;,[253,logseq____&quot;^Ulogseq____&quot;,21,536870929]],[logseq____&quot;^15logseq____&quot;,[253,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^17logseq____&quot;,logseq____&quot;65831e78-968c-418d-a401-f9a4afdd1587logseq____&quot;],536870929]],[logseq____&quot;^15logseq____&quot;,[253,logseq____&quot;^Jlogseq____&quot;,[logseq____&quot;^17logseq____&quot;],536870929]],[logseq____&quot;^15logseq____&quot;,[253,logseq____&quot;^4logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^17logseq____&quot;,logseq____&quot;65831e78-968c-418d-a401-f9a4afdd1587logseq____&quot;],536870929]],[logseq____&quot;^15logseq____&quot;,[253,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65831e78-968c-418d-a401-f9a4afdd1587logseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[254,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;The kind of `WAL`. Different kinds of `WAL` have different modification methods\\nlogseq.order-list-type:: numberlogseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[254,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[254,logseq____&quot;^Flogseq____&quot;,245,536870929]],[logseq____&quot;^15logseq____&quot;,[254,logseq____&quot;^Xlogseq____&quot;,21,536870929]],[logseq____&quot;^15logseq____&quot;,[254,logseq____&quot;^Vlogseq____&quot;,251,536870929]],[logseq____&quot;^15logseq____&quot;,[254,logseq____&quot;^Ulogseq____&quot;,21,536870929]],[logseq____&quot;^15logseq____&quot;,[254,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^18logseq____&quot;,logseq____&quot;numberlogseq____&quot;],536870929]],[logseq____&quot;^15logseq____&quot;,[254,logseq____&quot;^Jlogseq____&quot;,[logseq____&quot;^18logseq____&quot;],536870929]],[logseq____&quot;^15logseq____&quot;,[254,logseq____&quot;^4logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^18logseq____&quot;,logseq____&quot;numberlogseq____&quot;],536870929]],[logseq____&quot;^15logseq____&quot;,[254,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-5989-4e9e-81bb-1c7c2bf0d8bblogseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[255,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;See [[wal-insert]] for how the unique id is recordlogseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[255,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[255,logseq____&quot;^Flogseq____&quot;,246,536870929]],[logseq____&quot;^15logseq____&quot;,[255,logseq____&quot;^Xlogseq____&quot;,21,536870929]],[logseq____&quot;^15logseq____&quot;,[255,logseq____&quot;^Vlogseq____&quot;,256,536870929]],[logseq____&quot;^15logseq____&quot;,[255,logseq____&quot;^Ulogseq____&quot;,21,536870929]],[logseq____&quot;^15logseq____&quot;,[255,logseq____&quot;^Ulogseq____&quot;,26,536870929]],[logseq____&quot;^15logseq____&quot;,[255,logseq____&quot;^Hlogseq____&quot;,26,536870929]],[logseq____&quot;^15logseq____&quot;,[255,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-0843-4918-9f66-d95bfbd66cd1logseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[256,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;# wal recordlogseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[256,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[256,logseq____&quot;^Flogseq____&quot;,21,536870929]],[logseq____&quot;^15logseq____&quot;,[256,logseq____&quot;^Xlogseq____&quot;,21,536870929]],[logseq____&quot;^15logseq____&quot;,[256,logseq____&quot;^Vlogseq____&quot;,21,536870929]],[logseq____&quot;^15logseq____&quot;,[256,logseq____&quot;^Ulogseq____&quot;,21,536870929]],[logseq____&quot;^15logseq____&quot;,[256,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^19logseq____&quot;,1],536870929]],[logseq____&quot;^15logseq____&quot;,[256,logseq____&quot;^Jlogseq____&quot;,[],536870929]],[logseq____&quot;^15logseq____&quot;,[256,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-c17a-40ae-942c-7d68495eb4d8logseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[257,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;![wal-record-structure.png](../assets/wal-record-structure.png)logseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[257,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[257,logseq____&quot;^Flogseq____&quot;,253,536870929]],[logseq____&quot;^15logseq____&quot;,[257,logseq____&quot;^Xlogseq____&quot;,21,536870929]],[logseq____&quot;^15logseq____&quot;,[257,logseq____&quot;^Vlogseq____&quot;,253,536870929]],[logseq____&quot;^15logseq____&quot;,[257,logseq____&quot;^Ulogseq____&quot;,21,536870929]],[logseq____&quot;^15logseq____&quot;,[257,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-3f90-48b4-a940-998a704e8226logseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[259,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;logseq____&quot;,536870930]],[logseq____&quot;^15logseq____&quot;,[259,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870930]],[logseq____&quot;^15logseq____&quot;,[259,logseq____&quot;^Flogseq____&quot;,25,536870930]],[logseq____&quot;^15logseq____&quot;,[259,logseq____&quot;^Xlogseq____&quot;,25,536870930]],[logseq____&quot;^15logseq____&quot;,[259,logseq____&quot;^Vlogseq____&quot;,25,536870930]],[logseq____&quot;^15logseq____&quot;,[259,logseq____&quot;^Ulogseq____&quot;,25,536870930]],[logseq____&quot;^15logseq____&quot;,[259,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65899c9e-fb32-4a01-8ae7-8304ce9b49f1logseq____&quot;,536870930]]]]]]"</script>
 <script>window.logseq_state="{:ui/theme \"light\", :ui/radix-color :blue, :config {\"local\" {:feature/enable-whiteboards? false, :shortcuts {}, :default-templates {:journals \"\"}, :feature/enable-journals? false, :query/views {:pprint (fn [r] [:pre.code (pprint r)])}, :editor/preferred-pasting-file? false, :macros {}, :shortcut/doc-mode-enter-for-new-block? false, :favorites [\"Contents\" \"multixact\" \"wal-structure\"], :ui/show-empty-bullets? false, :file/name-format :triple-lowbar, :preferred-workflow :now, :publishing/all-pages-public? true, :ui/show-brackets? false, :ref/default-open-blocks-level 2, :feature/enable-block-timestamps? false, :start-of-week 6, :ref/linked-references-collapsed-threshold 50, :outliner/block-title-collapse-enabled? false, :commands [], :ui/show-full-blocks? false, :export/bullet-indentation :two-spaces, :meta/version 1, :hidden [], :default-queries {:journals [{:title \"🔨 NOW\", :query [:find (pull ?h [*]) :in $ ?start ?today :where [?h :block/marker ?marker] [(contains? #{\"NOW\" \"DOING\"} ?marker)] [?h :block/page ?p] [?p :block/journal? true] [?p :block/journal-day ?d] [(>= ?d ?start)] [(<= ?d ?today)]], :inputs [:14d :today], :result-transform (fn [result] (sort-by (fn [h] (get h :block/priority \"Z\")) result)), :group-by-page? false, :collapsed? false} {:title \"📅 NEXT\", :query [:find (pull ?h [*]) :in $ ?start ?next :where [?h :block/marker ?marker] [(contains? #{\"NOW\" \"LATER\" \"TODO\"} ?marker)] [?h :block/page ?p] [?p :block/journal? true] [?p :block/journal-day ?d] [(> ?d ?start)] [(< ?d ?next)]], :inputs [:today :7d-after], :group-by-page? false, :collapsed? false}]}, :ui/auto-expand-block-refs? false, :ui/enable-tooltip? true, :query/result-transforms {:sort-by-priority (fn [result] (sort-by (fn [h] (get h :block/priority \"Z\")) result))}, :property-pages/enabled? true, :block/content-max-length 10000, :ui/show-command-doc? true, :feature/enable-search-remove-accents? true, :default-home {:page \"Contents\"}}}}"</script>
 <script type="text/javascript">// Single Page Apps for GitHub Pages
      // https://github.com/rafgraph/spa-github-pages
      // Copyright (c) 2016 Rafael Pedicini, licensed under the MIT License
      // ----------------------------------------------------------------------
      // This script checks to see if a redirect is present in the query string
      // and converts it back into the correct url and adds it to the
      // browser's history using window.history.replaceState(...),
      // which won't cause the browser to attempt to load the new url.
      // When the single page app is loaded further down in this file,
      // the correct url will be waiting in the browser's history for
      // the single page app to route accordingly.
      (function(l) {
        if (l.search) {
          var q = {};
          l.search.slice(1).split('&').forEach(function(v) {
            var a = v.split('=');
            q[a[0]] = a.slice(1).join('=').replace(/~and~/g, '&');
          });
          if (q.p !== undefined) {
            window.history.replaceState(null, null,
              l.pathname.slice(0, -1) + (q.p || '') +
              (q.q ? ('?' + q.q) : '') +
              l.hash
            );
          }
        }
      }(window.location))</script>
 <script src="static/js/main.js"></script>
 <script src="static/js/interact.min.js"></script>
 <script src="static/js/highlight.min.js"></script>
 <script src="static/js/katex.min.js"></script>
 <script src="static/js/html2canvas.min.js"></script>
 <script src="static/js/code-editor.js"></script>
 <script src="static/js/custom.js"></script>
</body>
