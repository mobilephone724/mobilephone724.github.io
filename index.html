<!DOCTYPE html>
<head><meta charset="utf-8"></meta>
 <meta content="minimum-scale=1, initial-scale=1, width=device-width, shrink-to-fit=no" name="viewport"></meta>
 <link type="text/css" href="static/css/tabler-icons.min.css" rel="stylesheet"></link>
 <link type="text/css" href="static/css/style.css" rel="stylesheet"></link>
 <link type="text/css" href="static/css/custom.css" rel="stylesheet"></link>
 <link type="text/css" href="static/css/export.css" rel="stylesheet"></link>
 <link href="static/img/logo.png" type="image/png" rel="shortcut icon"></link>
 <link href="static/img/logo.png" sizes="192x192" rel="shortcut icon"></link>
 <link href="static/img/logo.png" rel="apple-touch-icon"></link>
 <meta name="apple-mobile-web-app-title"></meta>
 <meta name="apple-mobile-web-app-capable" content="yes"></meta>
 <meta name="apple-touch-fullscreen" content="yes"></meta>
 <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"></meta>
 <meta name="mobile-web-app-capable" content="yes"></meta>
 <meta property="og:title"></meta>
 <meta content="site" property="og:type"></meta>
  <meta content="static/img/logo.png" property="og:image"></meta>
 <meta property="og:description"></meta>
 <title></title>
 <meta property="og:site_name"></meta>
 <meta></meta>
</head>
 <body><div id="root"></div>
 <script>window.logseq_db="[logseq____&quot;~#datascript/DBlogseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;~:schemalogseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;~:ast/versionlogseq____&quot;,[logseq____&quot;^ logseq____&quot;],logseq____&quot;~:file/contentlogseq____&quot;,[logseq____&quot;^ logseq____&quot;],logseq____&quot;~:block/properties-text-valueslogseq____&quot;,[logseq____&quot;^ logseq____&quot;],logseq____&quot;~:block/aliaslogseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;~:db/valueTypelogseq____&quot;,logseq____&quot;~:db.type/reflogseq____&quot;,logseq____&quot;~:db/cardinalitylogseq____&quot;,logseq____&quot;~:db.cardinality/manylogseq____&quot;],logseq____&quot;~:block/pre-block?logseq____&quot;,[logseq____&quot;^ logseq____&quot;],logseq____&quot;~:block/uuidlogseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;~:db/uniquelogseq____&quot;,logseq____&quot;~:db.unique/identitylogseq____&quot;],logseq____&quot;~:block/prioritylogseq____&quot;,[logseq____&quot;^ logseq____&quot;],logseq____&quot;~:block/propertieslogseq____&quot;,[logseq____&quot;^ logseq____&quot;],logseq____&quot;~:block/journal?logseq____&quot;,[logseq____&quot;^ logseq____&quot;],logseq____&quot;~:block/namespacelogseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^6logseq____&quot;,logseq____&quot;^7logseq____&quot;],logseq____&quot;~:block/updated-atlogseq____&quot;,[logseq____&quot;^ logseq____&quot;],logseq____&quot;~:block/repeated?logseq____&quot;,[logseq____&quot;^ logseq____&quot;],logseq____&quot;~:db/typelogseq____&quot;,[logseq____&quot;^ logseq____&quot;],logseq____&quot;~:file/handlelogseq____&quot;,[logseq____&quot;^ logseq____&quot;],logseq____&quot;~:block/leftlogseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^6logseq____&quot;,logseq____&quot;^7logseq____&quot;,logseq____&quot;~:db/indexlogseq____&quot;,true],logseq____&quot;~:block/refslogseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^6logseq____&quot;,logseq____&quot;^7logseq____&quot;,logseq____&quot;^8logseq____&quot;,logseq____&quot;^9logseq____&quot;],logseq____&quot;~:block/scheduledlogseq____&quot;,[logseq____&quot;^ logseq____&quot;],logseq____&quot;~:block/properties-orderlogseq____&quot;,[logseq____&quot;^ logseq____&quot;],logseq____&quot;~:block/created-atlogseq____&quot;,[logseq____&quot;^ logseq____&quot;],logseq____&quot;~:block/deadlinelogseq____&quot;,[logseq____&quot;^ logseq____&quot;],logseq____&quot;~:block/collapsed?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^Glogseq____&quot;,true],logseq____&quot;~:block/journal-daylogseq____&quot;,[logseq____&quot;^ logseq____&quot;],logseq____&quot;~:block/formatlogseq____&quot;,[logseq____&quot;^ logseq____&quot;],logseq____&quot;~:block/tagslogseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^6logseq____&quot;,logseq____&quot;^7logseq____&quot;,logseq____&quot;^8logseq____&quot;,logseq____&quot;^9logseq____&quot;],logseq____&quot;~:block/contentlogseq____&quot;,[logseq____&quot;^ logseq____&quot;],logseq____&quot;~:recent/pageslogseq____&quot;,[logseq____&quot;^ logseq____&quot;],logseq____&quot;~:block/macroslogseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^6logseq____&quot;,logseq____&quot;^7logseq____&quot;,logseq____&quot;^8logseq____&quot;,logseq____&quot;^9logseq____&quot;],logseq____&quot;~:db/identlogseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^logseq____&lt;logseq____&quot;,logseq____&quot;^=logseq____&quot;],logseq____&quot;~:block/path-refslogseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^6logseq____&quot;,logseq____&quot;^7logseq____&quot;,logseq____&quot;^8logseq____&quot;,logseq____&quot;^9logseq____&quot;],logseq____&quot;~:block/parentlogseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^6logseq____&quot;,logseq____&quot;^7logseq____&quot;,logseq____&quot;^Glogseq____&quot;,true],logseq____&quot;~:block/typelogseq____&quot;,[logseq____&quot;^ logseq____&quot;],logseq____&quot;~:block/pagelogseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^6logseq____&quot;,logseq____&quot;^7logseq____&quot;,logseq____&quot;^Glogseq____&quot;,true],logseq____&quot;~:block/namelogseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^logseq____&lt;logseq____&quot;,logseq____&quot;^=logseq____&quot;],logseq____&quot;~:file/pathlogseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^logseq____&lt;logseq____&quot;,logseq____&quot;^=logseq____&quot;],logseq____&quot;~:block/filelogseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^6logseq____&quot;,logseq____&quot;^7logseq____&quot;],logseq____&quot;~:block/markerlogseq____&quot;,[logseq____&quot;^ logseq____&quot;],logseq____&quot;~:block/original-namelogseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^logseq____&lt;logseq____&quot;,logseq____&quot;^=logseq____&quot;],logseq____&quot;~:schema/versionlogseq____&quot;,[logseq____&quot;^ logseq____&quot;]],logseq____&quot;~:datomslogseq____&quot;,[logseq____&quot;~#listlogseq____&quot;,[[logseq____&quot;~#datascript/Datomlogseq____&quot;,[1,logseq____&quot;^12logseq____&quot;,2,536870913]],[logseq____&quot;^15logseq____&quot;,[2,logseq____&quot;^@logseq____&quot;,false,536870914]],[logseq____&quot;^15logseq____&quot;,[2,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;cardlogseq____&quot;,536870913]],[logseq____&quot;^15logseq____&quot;,[2,logseq____&quot;^11logseq____&quot;,logseq____&quot;cardlogseq____&quot;,536870913]],[logseq____&quot;^15logseq____&quot;,[2,logseq____&quot;^;logseq____&quot;,logseq____&quot;~ub976f797-546c-4d18-a5e7-bd24500d8666logseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[3,logseq____&quot;^@logseq____&quot;,false,536870914]],[logseq____&quot;^15logseq____&quot;,[3,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;canceledlogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[3,logseq____&quot;^11logseq____&quot;,logseq____&quot;CANCELEDlogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[3,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u7feb12e7-c4ef-46c3-88bf-a802a497d7cblogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[4,logseq____&quot;^@logseq____&quot;,false,536870914]],[logseq____&quot;^15logseq____&quot;,[4,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;todologseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[4,logseq____&quot;^11logseq____&quot;,logseq____&quot;TODOlogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[4,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c98-ab25-45f5-8ed7-989c6e574635logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[5,logseq____&quot;^@logseq____&quot;,false,536870914]],[logseq____&quot;^15logseq____&quot;,[5,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;nowlogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[5,logseq____&quot;^11logseq____&quot;,logseq____&quot;NOWlogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[5,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u2b31bbba-3000-4773-9d16-a32b9c6bb067logseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[6,logseq____&quot;^@logseq____&quot;,false,536870914]],[logseq____&quot;^15logseq____&quot;,[6,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;laterlogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[6,logseq____&quot;^11logseq____&quot;,logseq____&quot;LATERlogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[6,logseq____&quot;^;logseq____&quot;,logseq____&quot;~uacfae9d1-5bcd-4a23-b3c0-a7a31f34ab5elogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[7,logseq____&quot;^@logseq____&quot;,false,536870914]],[logseq____&quot;^15logseq____&quot;,[7,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;donelogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[7,logseq____&quot;^11logseq____&quot;,logseq____&quot;DONElogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[7,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u78be5659-8217-4848-a480-ccf9809551a7logseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[8,logseq____&quot;^@logseq____&quot;,false,536870914]],[logseq____&quot;^15logseq____&quot;,[8,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;doinglogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[8,logseq____&quot;^11logseq____&quot;,logseq____&quot;DOINGlogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[8,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u26aa1dde-eb79-4a62-82c2-624e1e31999elogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[9,logseq____&quot;^@logseq____&quot;,false,536870914]],[logseq____&quot;^15logseq____&quot;,[9,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;in-progresslogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[9,logseq____&quot;^11logseq____&quot;,logseq____&quot;IN-PROGRESSlogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[9,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u587d5cb7-8fa0-48ed-80d6-015275de7f4alogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[10,logseq____&quot;^@logseq____&quot;,false,536870914]],[logseq____&quot;^15logseq____&quot;,[10,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;clogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[10,logseq____&quot;^11logseq____&quot;,logseq____&quot;Clogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[10,logseq____&quot;^;logseq____&quot;,logseq____&quot;~ueebc694b-77c4-4c79-9be9-6e5704910aa4logseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[11,logseq____&quot;^@logseq____&quot;,false,536870914]],[logseq____&quot;^15logseq____&quot;,[11,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;blogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[11,logseq____&quot;^11logseq____&quot;,logseq____&quot;Blogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[11,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u8a7eb7aa-7b28-45a6-aab7-40931fc93f71logseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[12,logseq____&quot;^@logseq____&quot;,false,536870914]],[logseq____&quot;^15logseq____&quot;,[12,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;contentslogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[12,logseq____&quot;^11logseq____&quot;,logseq____&quot;contentslogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[12,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-89b6-4301-9420-d9f15264c56alogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[13,logseq____&quot;^@logseq____&quot;,false,536870914]],[logseq____&quot;^15logseq____&quot;,[13,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;waitinglogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[13,logseq____&quot;^11logseq____&quot;,logseq____&quot;WAITINGlogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[13,logseq____&quot;^;logseq____&quot;,logseq____&quot;~ufbf2a788-4999-4718-9a59-77e28dd02842logseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[14,logseq____&quot;^@logseq____&quot;,false,536870914]],[logseq____&quot;^15logseq____&quot;,[14,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;favoriteslogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[14,logseq____&quot;^11logseq____&quot;,logseq____&quot;Favoriteslogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[14,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u15f6fcbf-67fb-45e5-aba3-930f77bfc745logseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[15,logseq____&quot;^@logseq____&quot;,false,536870914]],[logseq____&quot;^15logseq____&quot;,[15,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;alogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[15,logseq____&quot;^11logseq____&quot;,logseq____&quot;Alogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[15,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u805d08f7-1f28-4984-b181-6c4109928b13logseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[16,logseq____&quot;^@logseq____&quot;,false,536870914]],[logseq____&quot;^15logseq____&quot;,[16,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;cancelledlogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[16,logseq____&quot;^11logseq____&quot;,logseq____&quot;CANCELLEDlogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[16,logseq____&quot;^;logseq____&quot;,logseq____&quot;~ua130fec7-561b-4abc-8c90-94d7a5ad6983logseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[17,logseq____&quot;^@logseq____&quot;,false,536870914]],[logseq____&quot;^15logseq____&quot;,[17,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;waitlogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[17,logseq____&quot;^11logseq____&quot;,logseq____&quot;WAITlogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[17,logseq____&quot;^;logseq____&quot;,logseq____&quot;~ueccf66a6-f06f-4d59-ba27-8114bfd350aelogseq____&quot;,536870914]],[logseq____&quot;^15logseq____&quot;,[21,logseq____&quot;^Klogseq____&quot;,1703431319557,536870917]],[logseq____&quot;^15logseq____&quot;,[21,logseq____&quot;^@logseq____&quot;,false,536870917]],[logseq____&quot;^15logseq____&quot;,[21,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;wal-structurelogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[21,logseq____&quot;^11logseq____&quot;,logseq____&quot;wal-structurelogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[21,logseq____&quot;^Blogseq____&quot;,1703431319557,536870917]],[logseq____&quot;^15logseq____&quot;,[21,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c98-abd3-4c4d-b995-a344d6bc2e7flogseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[22,logseq____&quot;^Klogseq____&quot;,1703431319553,536870917]],[logseq____&quot;^15logseq____&quot;,[22,logseq____&quot;^@logseq____&quot;,false,536870917]],[logseq____&quot;^15logseq____&quot;,[22,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;multixactlogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[22,logseq____&quot;^11logseq____&quot;,logseq____&quot;multixactlogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[22,logseq____&quot;^Blogseq____&quot;,1703431319553,536870917]],[logseq____&quot;^15logseq____&quot;,[22,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-3c84-4de9-ad8e-ba5a651f269elogseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[23,logseq____&quot;^Klogseq____&quot;,1703431319551,536870917]],[logseq____&quot;^15logseq____&quot;,[23,logseq____&quot;^@logseq____&quot;,false,536870917]],[logseq____&quot;^15logseq____&quot;,[23,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;slru_implementlogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[23,logseq____&quot;^11logseq____&quot;,logseq____&quot;SLRU_IMPLEMENTlogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[23,logseq____&quot;^Blogseq____&quot;,1703431319551,536870917]],[logseq____&quot;^15logseq____&quot;,[23,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-8b31-4dc5-9ad8-9054d6b93c14logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[24,logseq____&quot;^Klogseq____&quot;,1703431319553,536870917]],[logseq____&quot;^15logseq____&quot;,[24,logseq____&quot;^@logseq____&quot;,false,536870917]],[logseq____&quot;^15logseq____&quot;,[24,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;transamlogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[24,logseq____&quot;^11logseq____&quot;,logseq____&quot;transamlogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[24,logseq____&quot;^Blogseq____&quot;,1703431319553,536870917]],[logseq____&quot;^15logseq____&quot;,[24,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-a5c4-482c-9a00-bf865179dcedlogseq____&quot;,536870925]],[logseq____&quot;^15logseq____&quot;,[25,logseq____&quot;^Klogseq____&quot;,1703431319555,536870917]],[logseq____&quot;^15logseq____&quot;,[25,logseq____&quot;^@logseq____&quot;,false,536870917]],[logseq____&quot;^15logseq____&quot;,[25,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;wallogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[25,logseq____&quot;^11logseq____&quot;,logseq____&quot;wallogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[25,logseq____&quot;^Blogseq____&quot;,1703431319555,536870917]],[logseq____&quot;^15logseq____&quot;,[25,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c98-f415-44d9-8366-2b67e5543d46logseq____&quot;,536870930]],[logseq____&quot;^15logseq____&quot;,[26,logseq____&quot;^Klogseq____&quot;,1703431319556,536870917]],[logseq____&quot;^15logseq____&quot;,[26,logseq____&quot;^@logseq____&quot;,false,536870917]],[logseq____&quot;^15logseq____&quot;,[26,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;wal-insertlogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[26,logseq____&quot;^11logseq____&quot;,logseq____&quot;wal-insertlogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[26,logseq____&quot;^Blogseq____&quot;,1703431319556,536870917]],[logseq____&quot;^15logseq____&quot;,[26,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c98-a7af-4d0b-94d3-8f47051c2112logseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[27,logseq____&quot;^Klogseq____&quot;,1703431319556,536870917]],[logseq____&quot;^15logseq____&quot;,[27,logseq____&quot;^@logseq____&quot;,false,536870917]],[logseq____&quot;^15logseq____&quot;,[27,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;wal-basiclogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[27,logseq____&quot;^11logseq____&quot;,logseq____&quot;wal-basiclogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[27,logseq____&quot;^Blogseq____&quot;,1703431319556,536870917]],[logseq____&quot;^15logseq____&quot;,[27,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c98-b33e-489b-8894-17f1368a6997logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[28,logseq____&quot;^Klogseq____&quot;,1703431319551,536870917]],[logseq____&quot;^15logseq____&quot;,[28,logseq____&quot;^@logseq____&quot;,false,536870917]],[logseq____&quot;^15logseq____&quot;,[28,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;slrulogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[28,logseq____&quot;^11logseq____&quot;,logseq____&quot;slrulogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[28,logseq____&quot;^Blogseq____&quot;,1703431319551,536870917]],[logseq____&quot;^15logseq____&quot;,[28,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-10c5-4893-b3b8-5a70b0f872c9logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[29,logseq____&quot;^Klogseq____&quot;,1703431319553,536870917]],[logseq____&quot;^15logseq____&quot;,[29,logseq____&quot;^@logseq____&quot;,false,536870917]],[logseq____&quot;^15logseq____&quot;,[29,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;subtransactionlogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[29,logseq____&quot;^11logseq____&quot;,logseq____&quot;subtransactionlogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[29,logseq____&quot;^Blogseq____&quot;,1703431319553,536870917]],[logseq____&quot;^15logseq____&quot;,[29,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-c8d9-4162-91c1-0ac791374e55logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[30,logseq____&quot;^Klogseq____&quot;,1703431319552,536870917]],[logseq____&quot;^15logseq____&quot;,[30,logseq____&quot;^@logseq____&quot;,false,536870917]],[logseq____&quot;^15logseq____&quot;,[30,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;cloglogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[30,logseq____&quot;^11logseq____&quot;,logseq____&quot;cloglogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[30,logseq____&quot;^Blogseq____&quot;,1703431319552,536870917]],[logseq____&quot;^15logseq____&quot;,[30,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-2e38-44e0-a156-95d58c9da0ablogseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[31,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;[[slru]]logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[31,logseq____&quot;^Ologseq____&quot;,logseq____&quot;~:markdownlogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[31,logseq____&quot;^Flogseq____&quot;,34,536870917]],[logseq____&quot;^15logseq____&quot;,[31,logseq____&quot;^Xlogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[31,logseq____&quot;^Vlogseq____&quot;,34,536870917]],[logseq____&quot;^15logseq____&quot;,[31,logseq____&quot;^Ulogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[31,logseq____&quot;^Ulogseq____&quot;,23,536870917]],[logseq____&quot;^15logseq____&quot;,[31,logseq____&quot;^Ulogseq____&quot;,28,536870917]],[logseq____&quot;^15logseq____&quot;,[31,logseq____&quot;^Hlogseq____&quot;,28,536870917]],[logseq____&quot;^15logseq____&quot;,[31,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-20cc-48c2-9010-c22e9d397960logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[32,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;👨‍👧‍👦 [[subtransaction]]logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[32,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[32,logseq____&quot;^Flogseq____&quot;,38,536870917]],[logseq____&quot;^15logseq____&quot;,[32,logseq____&quot;^Xlogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[32,logseq____&quot;^Vlogseq____&quot;,34,536870917]],[logseq____&quot;^15logseq____&quot;,[32,logseq____&quot;^Ulogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[32,logseq____&quot;^Ulogseq____&quot;,23,536870917]],[logseq____&quot;^15logseq____&quot;,[32,logseq____&quot;^Ulogseq____&quot;,29,536870917]],[logseq____&quot;^15logseq____&quot;,[32,logseq____&quot;^Hlogseq____&quot;,29,536870917]],[logseq____&quot;^15logseq____&quot;,[32,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-9213-4f2c-b946-1d454cfc1bfblogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[33,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[33,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[33,logseq____&quot;^Flogseq____&quot;,46,536870917]],[logseq____&quot;^15logseq____&quot;,[33,logseq____&quot;^Xlogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[33,logseq____&quot;^Vlogseq____&quot;,37,536870917]],[logseq____&quot;^15logseq____&quot;,[33,logseq____&quot;^Ulogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[33,logseq____&quot;^Ulogseq____&quot;,25,536870917]],[logseq____&quot;^15logseq____&quot;,[33,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-e628-4578-8a02-298bc94352d7logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[34,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;🔗 [[SLRU_IMPLEMENT]]logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[34,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[34,logseq____&quot;^Flogseq____&quot;,43,536870917]],[logseq____&quot;^15logseq____&quot;,[34,logseq____&quot;^Xlogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[34,logseq____&quot;^Vlogseq____&quot;,43,536870917]],[logseq____&quot;^15logseq____&quot;,[34,logseq____&quot;^Ulogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[34,logseq____&quot;^Ulogseq____&quot;,23,536870917]],[logseq____&quot;^15logseq____&quot;,[34,logseq____&quot;^Hlogseq____&quot;,23,536870917]],[logseq____&quot;^15logseq____&quot;,[34,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-b8fa-42ff-a96b-6ee6606a423alogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[35,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;TODO move`hash join into` the blog logseq____&lt;img src=\\logseq____&quot;https://raw.githubusercontent.com/logseq/logseq/master/resources/icons/logseq.png\\logseq____&quot; alt=\\logseq____&quot;logseq\\logseq____&quot; style=\\logseq____&quot;max-height:1em;width:auto;height:auto;display:inline-block\\logseq____&quot; /logseq____&gt;logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[35,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[35,logseq____&quot;^Flogseq____&quot;,44,536870917]],[logseq____&quot;^15logseq____&quot;,[35,logseq____&quot;^10logseq____&quot;,logseq____&quot;TODOlogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[35,logseq____&quot;^Xlogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[35,logseq____&quot;^Vlogseq____&quot;,41,536870917]],[logseq____&quot;^15logseq____&quot;,[35,logseq____&quot;^Ulogseq____&quot;,4,536870917]],[logseq____&quot;^15logseq____&quot;,[35,logseq____&quot;^Ulogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[35,logseq____&quot;^Hlogseq____&quot;,4,536870917]],[logseq____&quot;^15logseq____&quot;,[35,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-d650-4b45-90aa-cd6a3d9ced95logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[36,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;[[wal-basic]]logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[36,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[36,logseq____&quot;^Flogseq____&quot;,37,536870917]],[logseq____&quot;^15logseq____&quot;,[36,logseq____&quot;^Xlogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[36,logseq____&quot;^Vlogseq____&quot;,37,536870917]],[logseq____&quot;^15logseq____&quot;,[36,logseq____&quot;^Ulogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[36,logseq____&quot;^Ulogseq____&quot;,25,536870917]],[logseq____&quot;^15logseq____&quot;,[36,logseq____&quot;^Ulogseq____&quot;,27,536870917]],[logseq____&quot;^15logseq____&quot;,[36,logseq____&quot;^Hlogseq____&quot;,27,536870917]],[logseq____&quot;^15logseq____&quot;,[36,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-9fc6-45c7-803c-416fb04f0111logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[37,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;⏳️ [[wal]]logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[37,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[37,logseq____&quot;^Flogseq____&quot;,34,536870917]],[logseq____&quot;^15logseq____&quot;,[37,logseq____&quot;^Xlogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[37,logseq____&quot;^Vlogseq____&quot;,43,536870917]],[logseq____&quot;^15logseq____&quot;,[37,logseq____&quot;^Ulogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[37,logseq____&quot;^Ulogseq____&quot;,25,536870917]],[logseq____&quot;^15logseq____&quot;,[37,logseq____&quot;^Hlogseq____&quot;,25,536870917]],[logseq____&quot;^15logseq____&quot;,[37,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-e98a-4b66-ac8a-7a6f32276b85logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[38,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;📔 [[clog]]logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[38,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[38,logseq____&quot;^Flogseq____&quot;,31,536870917]],[logseq____&quot;^15logseq____&quot;,[38,logseq____&quot;^Xlogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[38,logseq____&quot;^Vlogseq____&quot;,34,536870917]],[logseq____&quot;^15logseq____&quot;,[38,logseq____&quot;^Ulogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[38,logseq____&quot;^Ulogseq____&quot;,23,536870917]],[logseq____&quot;^15logseq____&quot;,[38,logseq____&quot;^Ulogseq____&quot;,30,536870917]],[logseq____&quot;^15logseq____&quot;,[38,logseq____&quot;^Hlogseq____&quot;,30,536870917]],[logseq____&quot;^15logseq____&quot;,[38,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-04b4-4cf8-abcc-ade1dfe80c33logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[39,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[39,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[39,logseq____&quot;^Flogseq____&quot;,43,536870917]],[logseq____&quot;^15logseq____&quot;,[39,logseq____&quot;^Xlogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[39,logseq____&quot;^Vlogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[39,logseq____&quot;^Ulogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[39,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-51f4-4873-a124-392162d455b3logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[40,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;TODO The upper level to decide visibility. May be in [[transam]] ?\\n:LOGBOOK:\\nCLOCK: [2023-12-24 Sun 23:14:31]--[2023-12-24 Sun 23:14:31] =logseq____&gt;  00:00:00\\nCLOCK: [2023-12-24 Sun 23:14:32]--[2023-12-24 Sun 23:14:33] =logseq____&gt;  00:00:01\\nCLOCK: [2023-12-24 Sun 23:14:35]--[2023-12-24 Sun 23:14:35] =logseq____&gt;  00:00:00\\nCLOCK: [2023-12-24 Sun 23:14:36]--[2023-12-24 Sun 23:14:37] =logseq____&gt;  00:00:01\\nCLOCK: [2023-12-24 Sun 23:14:41]--[2023-12-24 Sun 23:14:42] =logseq____&gt;  00:00:01\\nCLOCK: [2023-12-24 Sun 23:14:43]--[2023-12-24 Sun 23:14:43] =logseq____&gt;  00:00:00\\nCLOCK: [2023-12-24 Sun 23:14:44]--[2023-12-24 Sun 23:14:45] =logseq____&gt;  00:00:01\\n:END:logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[40,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[40,logseq____&quot;^Flogseq____&quot;,41,536870917]],[logseq____&quot;^15logseq____&quot;,[40,logseq____&quot;^10logseq____&quot;,logseq____&quot;TODOlogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[40,logseq____&quot;^Xlogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[40,logseq____&quot;^Vlogseq____&quot;,41,536870917]],[logseq____&quot;^15logseq____&quot;,[40,logseq____&quot;^Ulogseq____&quot;,4,536870917]],[logseq____&quot;^15logseq____&quot;,[40,logseq____&quot;^Ulogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[40,logseq____&quot;^Ulogseq____&quot;,24,536870917]],[logseq____&quot;^15logseq____&quot;,[40,logseq____&quot;^Hlogseq____&quot;,4,536870917]],[logseq____&quot;^15logseq____&quot;,[40,logseq____&quot;^Hlogseq____&quot;,24,536870917]],[logseq____&quot;^15logseq____&quot;,[40,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-8518-4159-b9ad-b5018bc058f7logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[41,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;What to do next?logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[41,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[41,logseq____&quot;^Flogseq____&quot;,47,536870917]],[logseq____&quot;^15logseq____&quot;,[41,logseq____&quot;^Xlogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[41,logseq____&quot;^Vlogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[41,logseq____&quot;^Ulogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[41,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-71ed-4ac2-b849-29b72fa32b2blogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[42,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;[[wal-insert]]logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[42,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[42,logseq____&quot;^Flogseq____&quot;,36,536870917]],[logseq____&quot;^15logseq____&quot;,[42,logseq____&quot;^Xlogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[42,logseq____&quot;^Vlogseq____&quot;,37,536870917]],[logseq____&quot;^15logseq____&quot;,[42,logseq____&quot;^Ulogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[42,logseq____&quot;^Ulogseq____&quot;,25,536870917]],[logseq____&quot;^15logseq____&quot;,[42,logseq____&quot;^Ulogseq____&quot;,26,536870917]],[logseq____&quot;^15logseq____&quot;,[42,logseq____&quot;^Hlogseq____&quot;,26,536870917]],[logseq____&quot;^15logseq____&quot;,[42,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-8f53-4849-b00e-32c8354740c3logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[43,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;🧬 transactionslogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[43,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[43,logseq____&quot;^Flogseq____&quot;,41,536870917]],[logseq____&quot;^15logseq____&quot;,[43,logseq____&quot;^Xlogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[43,logseq____&quot;^Vlogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[43,logseq____&quot;^Ulogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[43,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-a8e5-42c4-9a9a-60c6b6b34adalogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[44,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;TODO The remained [[clog]] setting flag partslogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[44,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[44,logseq____&quot;^Flogseq____&quot;,40,536870917]],[logseq____&quot;^15logseq____&quot;,[44,logseq____&quot;^10logseq____&quot;,logseq____&quot;TODOlogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[44,logseq____&quot;^Xlogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[44,logseq____&quot;^Vlogseq____&quot;,41,536870917]],[logseq____&quot;^15logseq____&quot;,[44,logseq____&quot;^Ulogseq____&quot;,4,536870917]],[logseq____&quot;^15logseq____&quot;,[44,logseq____&quot;^Ulogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[44,logseq____&quot;^Ulogseq____&quot;,30,536870917]],[logseq____&quot;^15logseq____&quot;,[44,logseq____&quot;^Hlogseq____&quot;,4,536870917]],[logseq____&quot;^15logseq____&quot;,[44,logseq____&quot;^Hlogseq____&quot;,30,536870917]],[logseq____&quot;^15logseq____&quot;,[44,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-ff8c-41ea-b082-fa64520a8c24logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[45,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;⚡️ [[transam]]logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[45,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[45,logseq____&quot;^Flogseq____&quot;,49,536870917]],[logseq____&quot;^15logseq____&quot;,[45,logseq____&quot;^Xlogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[45,logseq____&quot;^Vlogseq____&quot;,34,536870917]],[logseq____&quot;^15logseq____&quot;,[45,logseq____&quot;^Ulogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[45,logseq____&quot;^Ulogseq____&quot;,23,536870917]],[logseq____&quot;^15logseq____&quot;,[45,logseq____&quot;^Ulogseq____&quot;,24,536870917]],[logseq____&quot;^15logseq____&quot;,[45,logseq____&quot;^Hlogseq____&quot;,24,536870917]],[logseq____&quot;^15logseq____&quot;,[45,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-5484-4e54-a0af-82f8b37edc80logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[46,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;[[wal-structure]]logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[46,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[46,logseq____&quot;^Flogseq____&quot;,42,536870917]],[logseq____&quot;^15logseq____&quot;,[46,logseq____&quot;^Xlogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[46,logseq____&quot;^Vlogseq____&quot;,37,536870917]],[logseq____&quot;^15logseq____&quot;,[46,logseq____&quot;^Ulogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[46,logseq____&quot;^Ulogseq____&quot;,21,536870917]],[logseq____&quot;^15logseq____&quot;,[46,logseq____&quot;^Ulogseq____&quot;,25,536870917]],[logseq____&quot;^15logseq____&quot;,[46,logseq____&quot;^Hlogseq____&quot;,21,536870917]],[logseq____&quot;^15logseq____&quot;,[46,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-4b78-4261-960e-93e987379477logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[47,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;See [[TODO]] for known problemslogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[47,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[47,logseq____&quot;^Flogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[47,logseq____&quot;^Xlogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[47,logseq____&quot;^Vlogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[47,logseq____&quot;^Ulogseq____&quot;,4,536870917]],[logseq____&quot;^15logseq____&quot;,[47,logseq____&quot;^Ulogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[47,logseq____&quot;^Hlogseq____&quot;,4,536870917]],[logseq____&quot;^15logseq____&quot;,[47,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-c78a-479b-955f-24089020252alogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[48,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;TODO move `pgvector` into the blog logseq____&lt;img src=\\logseq____&quot;https://raw.githubusercontent.com/logseq/logseq/master/resources/icons/logseq.png\\logseq____&quot; alt=\\logseq____&quot;logseq\\logseq____&quot; style=\\logseq____&quot;max-height:1em;width:auto;height:auto;display:inline-block\\logseq____&quot; /logseq____&gt;logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[48,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[48,logseq____&quot;^Flogseq____&quot;,35,536870917]],[logseq____&quot;^15logseq____&quot;,[48,logseq____&quot;^10logseq____&quot;,logseq____&quot;TODOlogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[48,logseq____&quot;^Xlogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[48,logseq____&quot;^Vlogseq____&quot;,41,536870917]],[logseq____&quot;^15logseq____&quot;,[48,logseq____&quot;^Ulogseq____&quot;,4,536870917]],[logseq____&quot;^15logseq____&quot;,[48,logseq____&quot;^Ulogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[48,logseq____&quot;^Hlogseq____&quot;,4,536870917]],[logseq____&quot;^15logseq____&quot;,[48,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-1169-4174-9d25-ada8d33b3b42logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[49,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;🔓️ [[multixact]]logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[49,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[49,logseq____&quot;^Flogseq____&quot;,32,536870917]],[logseq____&quot;^15logseq____&quot;,[49,logseq____&quot;^Xlogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[49,logseq____&quot;^Vlogseq____&quot;,34,536870917]],[logseq____&quot;^15logseq____&quot;,[49,logseq____&quot;^Ulogseq____&quot;,12,536870917]],[logseq____&quot;^15logseq____&quot;,[49,logseq____&quot;^Ulogseq____&quot;,22,536870917]],[logseq____&quot;^15logseq____&quot;,[49,logseq____&quot;^Ulogseq____&quot;,23,536870917]],[logseq____&quot;^15logseq____&quot;,[49,logseq____&quot;^Hlogseq____&quot;,22,536870917]],[logseq____&quot;^15logseq____&quot;,[49,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-29f3-4dc7-a17f-ccaddbc8a5bclogseq____&quot;,536870917]],[logseq____&quot;^15logseq____&quot;,[51,logseq____&quot;^Klogseq____&quot;,1703431319616,536870918]],[logseq____&quot;^15logseq____&quot;,[51,logseq____&quot;^@logseq____&quot;,false,536870918]],[logseq____&quot;^15logseq____&quot;,[51,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;blocklogseq____&quot;,536870918]],[logseq____&quot;^15logseq____&quot;,[51,logseq____&quot;^11logseq____&quot;,logseq____&quot;blocklogseq____&quot;,536870918]],[logseq____&quot;^15logseq____&quot;,[51,logseq____&quot;^Blogseq____&quot;,1703431319616,536870918]],[logseq____&quot;^15logseq____&quot;,[51,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c98-3cb9-4bff-a06a-8e9a914b4264logseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[52,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;Each data file (heap or index) is divided into `postgres` disk blocks, the blocks are numbered sequentially, 0 to 0xFFFFFFFE.logseq____&quot;,536870918]],[logseq____&quot;^15logseq____&quot;,[52,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870918]],[logseq____&quot;^15logseq____&quot;,[52,logseq____&quot;^Flogseq____&quot;,51,536870918]],[logseq____&quot;^15logseq____&quot;,[52,logseq____&quot;^Xlogseq____&quot;,51,536870918]],[logseq____&quot;^15logseq____&quot;,[52,logseq____&quot;^Vlogseq____&quot;,51,536870918]],[logseq____&quot;^15logseq____&quot;,[52,logseq____&quot;^Ulogseq____&quot;,51,536870918]],[logseq____&quot;^15logseq____&quot;,[52,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-aeac-4974-ac23-cf1f0043df8elogseq____&quot;,536870918]],[logseq____&quot;^15logseq____&quot;,[53,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~```C\\ntypedef uint32 BlockNumber;\\n#define InvalidBlockNumber\\t\\t((BlockNumber) 0xFFFFFFFF)\\n#define MaxBlockNumber\\t\\t\\t((BlockNumber) 0xFFFFFFFE)\\n```logseq____&quot;,536870918]],[logseq____&quot;^15logseq____&quot;,[53,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870918]],[logseq____&quot;^15logseq____&quot;,[53,logseq____&quot;^Flogseq____&quot;,52,536870918]],[logseq____&quot;^15logseq____&quot;,[53,logseq____&quot;^Xlogseq____&quot;,51,536870918]],[logseq____&quot;^15logseq____&quot;,[53,logseq____&quot;^Vlogseq____&quot;,51,536870918]],[logseq____&quot;^15logseq____&quot;,[53,logseq____&quot;^Ulogseq____&quot;,51,536870918]],[logseq____&quot;^15logseq____&quot;,[53,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-f2a5-45a2-a3b5-5acfaa519ef3logseq____&quot;,536870918]],[logseq____&quot;^15logseq____&quot;,[54,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;So one relation can have $32T$ storage sizelogseq____&quot;,536870918]],[logseq____&quot;^15logseq____&quot;,[54,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870918]],[logseq____&quot;^15logseq____&quot;,[54,logseq____&quot;^Flogseq____&quot;,53,536870918]],[logseq____&quot;^15logseq____&quot;,[54,logseq____&quot;^Xlogseq____&quot;,51,536870918]],[logseq____&quot;^15logseq____&quot;,[54,logseq____&quot;^Vlogseq____&quot;,51,536870918]],[logseq____&quot;^15logseq____&quot;,[54,logseq____&quot;^Ulogseq____&quot;,51,536870918]],[logseq____&quot;^15logseq____&quot;,[54,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-d8e9-4ea6-95cd-13f6599f50d7logseq____&quot;,536870918]],[logseq____&quot;^15logseq____&quot;,[55,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;$$4294967294( blocks) * 8(one block is 8K) / 1024 / 1024/ 1024 = 32T$$logseq____&quot;,536870918]],[logseq____&quot;^15logseq____&quot;,[55,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870918]],[logseq____&quot;^15logseq____&quot;,[55,logseq____&quot;^Flogseq____&quot;,54,536870918]],[logseq____&quot;^15logseq____&quot;,[55,logseq____&quot;^Xlogseq____&quot;,51,536870918]],[logseq____&quot;^15logseq____&quot;,[55,logseq____&quot;^Vlogseq____&quot;,54,536870918]],[logseq____&quot;^15logseq____&quot;,[55,logseq____&quot;^Ulogseq____&quot;,51,536870918]],[logseq____&quot;^15logseq____&quot;,[55,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-c62c-4532-bc53-7f597333f070logseq____&quot;,536870918]],[logseq____&quot;^15logseq____&quot;,[56,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;logseq____&quot;,536870918]],[logseq____&quot;^15logseq____&quot;,[56,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870918]],[logseq____&quot;^15logseq____&quot;,[56,logseq____&quot;^Flogseq____&quot;,54,536870918]],[logseq____&quot;^15logseq____&quot;,[56,logseq____&quot;^Xlogseq____&quot;,51,536870918]],[logseq____&quot;^15logseq____&quot;,[56,logseq____&quot;^Vlogseq____&quot;,51,536870918]],[logseq____&quot;^15logseq____&quot;,[56,logseq____&quot;^Ulogseq____&quot;,51,536870918]],[logseq____&quot;^15logseq____&quot;,[56,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-a79d-427e-b380-0f96b34985d2logseq____&quot;,536870918]],[logseq____&quot;^15logseq____&quot;,[58,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;tag::WALlogseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[58,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[58,logseq____&quot;^Flogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[58,logseq____&quot;^Xlogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[58,logseq____&quot;^Vlogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[58,logseq____&quot;^Ulogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[58,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-520b-4138-a49e-01114f5b6df2logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[59,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;## Overview\\nThis chapter explains the content of `clog` #SLRU_IMPLEMENT\\n\\n`clog`(commit log), records the commit status of each transaction. The log exists both in memory mannaged by `slru` buffer and disk for durability. The commit status can be the four kinds below:\\n```C\\n#define TRANSACTION_STATUS_IN_PROGRESS\\t\\t0x00\\n#define TRANSACTION_STATUS_COMMITTED\\t\\t0x01\\n#define TRANSACTION_STATUS_ABORTED\\t\\t\\t0x02\\n#define TRANSACTION_STATUS_SUB_COMMITTED\\t0x03\\n```logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[59,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[59,logseq____&quot;^Flogseq____&quot;,58,536870919]],[logseq____&quot;^15logseq____&quot;,[59,logseq____&quot;^Xlogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[59,logseq____&quot;^Vlogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[59,logseq____&quot;^Ulogseq____&quot;,23,536870919]],[logseq____&quot;^15logseq____&quot;,[59,logseq____&quot;^Ulogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[59,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;~:headinglogseq____&quot;,2],536870919]],[logseq____&quot;^15logseq____&quot;,[59,logseq____&quot;^Jlogseq____&quot;,[],536870919]],[logseq____&quot;^15logseq____&quot;,[59,logseq____&quot;^Hlogseq____&quot;,23,536870919]],[logseq____&quot;^15logseq____&quot;,[59,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-e170-476f-9e4f-38cb87b8ef86logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[60,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;## In-Disk Representation\\nThinking that the commit status of each transaction composites an array `clog[]` and `clog[xid]` records the status, we can easily store the array to disk by the `slru`.\\n\\nThe status of one transaction needs two bits to represent:\\n```C\\n#define CLOG_BITS_PER_XACT\\t2\\n#define CLOG_XACTS_PER_BYTE 4\\n#define CLOG_XACTS_PER_PAGE (BLCKSZ * CLOG_XACTS_PER_BYTE)\\n#define CLOG_XACT_BITMASK\\t((1 logseq____&lt;logseq____&lt; CLOG_BITS_PER_XACT) - 1)\\n```\\n\\nSo we can get the xidlogseq____&apos;s index and offset in page and byte.\\n```C\\n#define TransactionIdToPage(xid)\\t((xid) / (TransactionId) CLOG_XACTS_PER_PAGE)\\n#define TransactionIdToPgIndex(xid) ((xid) % (TransactionId) CLOG_XACTS_PER_PAGE)\\n#define TransactionIdToByte(xid)\\t(TransactionIdToPgIndex(xid) / CLOG_XACTS_PER_BYTE)\\n#define TransactionIdToBIndex(xid)\\t((xid) % (TransactionId) CLOG_XACTS_PER_BYTE)\\n```\\n\\nThinking of that one slru segment contains 32 pages, so we name the clog file as `0000`(contains xid in [0, 32 * CLOG_XACTS_PER_PAGE - 1]), `0001`(contains xid in [32 * CLOG_XACTS_PER_PAGE, 32 * CLOG_XACTS_PER_PAGE * 2 - 1]) and so on. Because four hex numbers can represent $16^4=2^{12}$ files with $2^{12} \\\\times 32 \\\\times 8192 \\\\times 4 = 2^{32}$ transactionslogseq____&apos; status(a int32 size)\\n\\nAttension, such simple mapping means that the pages in clog file donlogseq____&apos;t have page headers. So we canlogseq____&apos;t record `LSN`, `checksum` in each page. The lack of `LSN` means the changes of clog page wouldnlogseq____&apos;t be recorded in `WAL` but clog doesnlogseq____&apos;t need it indeed.logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[60,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[60,logseq____&quot;^Flogseq____&quot;,59,536870919]],[logseq____&quot;^15logseq____&quot;,[60,logseq____&quot;^Xlogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[60,logseq____&quot;^Vlogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[60,logseq____&quot;^Ulogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[60,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^17logseq____&quot;,2],536870919]],[logseq____&quot;^15logseq____&quot;,[60,logseq____&quot;^Jlogseq____&quot;,[],536870919]],[logseq____&quot;^15logseq____&quot;,[60,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-bbdf-4ed4-9f46-cd69b3bb344flogseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[61,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;## Extend And Truncate\\nDuring the process of generating a new `xid`, we make sure that the slru page exists.\\n* If itlogseq____&apos;s the first xid of the page, we allocate a new page in clog buffer.\\n* Also generate a WAL to record the birth of the page.\\n* If not, the page must exist in memory or flushed into disk. So itlogseq____&apos;s for slru\\nlayer to manage such situation.  Keep in mind that the general self-increment xid doeslogseq____&apos;t begin at zero:\\n```C\\n#define FirstNormalTransactionId\\t((TransactionId) 3)\\n```\\nso:\\n* During bootstrap, initialize the first clog page\\n* During extend new pages, be careful about the `FirstNormalTransactionId`,\\nsince it is not the first xid in page representation but the first general one.\\n\\nThe above behaviors indicate that although a clog segment at most occupies 256K space, it doesnlogseq____&apos;t have such size just after initialization. We extend 8K pages one by one during the xid increment.\\n\\nSince at most half of `uint32` xids can be in use, itlogseq____&apos;s natural to clean up out of date clog files. Different from extending a page, we always delete a whole page. So once we promote the `frozenxid`, we try to find some clog files to delete:\\n1. The judgement whether there is a file can be deleted is completed in slru layer(a loop to scan the directory), but clog layer supports a hook to judge one file.\\n2. Advance the oldest clog xid in shared memory\\n3. Generate a clog truncate WAL record\\n4. Real truncate. Complemented in slru layer.\\n\\nDetails of the two kind WAL record will be shown later.logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[61,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[61,logseq____&quot;^Flogseq____&quot;,60,536870919]],[logseq____&quot;^15logseq____&quot;,[61,logseq____&quot;^Xlogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[61,logseq____&quot;^Vlogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[61,logseq____&quot;^Ulogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[61,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^17logseq____&quot;,2],536870919]],[logseq____&quot;^15logseq____&quot;,[61,logseq____&quot;^Jlogseq____&quot;,[],536870919]],[logseq____&quot;^15logseq____&quot;,[61,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-1da0-4b4d-acc2-6c8ebcb5d493logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[62,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;## Set And Get\\nConcerned with subtransactions ...\\nlogseq____&gt; I canlogseq____&apos;t totally figure out the commit tree without knowing the mechanism of subtransaction. Just assuming subxids as a set of xids related to the main xid seems not convictive enough for me. So I remain it here now and will finish it after reading subtransactions)\\n\\n\\nFor now, it seems enough to knowing that\\n1. The pair of operations wouldnlogseq____&apos;t generate any WAL record\\n2. They are done during the commit or abort procedure.logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[62,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[62,logseq____&quot;^Flogseq____&quot;,61,536870919]],[logseq____&quot;^15logseq____&quot;,[62,logseq____&quot;^Xlogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[62,logseq____&quot;^Vlogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[62,logseq____&quot;^Ulogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[62,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^17logseq____&quot;,2],536870919]],[logseq____&quot;^15logseq____&quot;,[62,logseq____&quot;^Jlogseq____&quot;,[],536870919]],[logseq____&quot;^15logseq____&quot;,[62,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-de53-4fd1-81a9-84f52f49d6a1logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[63,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;## Record changes in WAL #wal \\nRecall what mentioned above:\\n* Extending a new page and delete a segment will generate a WAL record.\\n* Setting commit status wouldnlogseq____&apos;t\\n\\nFor the latter one, itlogseq____&apos;s unbelievable but tricky. Since only the transactions that changes the content data(some hint flags are exception, such as tuple infomask) will have a xid(and then record on clog segment). During the replay of such transactionslogseq____&apos; commit(or abort) WAL record, we can redo the clog by the way. \\n\\nFor the former one, itlogseq____&apos;s a matter of course, since we must guarantee the clog to be recovery-safe. But some details deserve a glance:\\n\\n* For extending a new page, it makes no difference that we flush the WAL record now or later. Since once we want to set status in a non-existent page during recovery, we can padding a new empty page. This trick doesnlogseq____&apos;t affect the page usage.\\n* For deleting a clog segment, we have no chance to remedy the lost of clogs, and the disaster means a lot of tuple can be accessed at all. So regardless of the synchronous commit level, we must ensure the WAL record has flushed into disk before really delete the segments.logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[63,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[63,logseq____&quot;^Flogseq____&quot;,62,536870919]],[logseq____&quot;^15logseq____&quot;,[63,logseq____&quot;^Xlogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[63,logseq____&quot;^Vlogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[63,logseq____&quot;^Ulogseq____&quot;,25,536870919]],[logseq____&quot;^15logseq____&quot;,[63,logseq____&quot;^Ulogseq____&quot;,30,536870919]],[logseq____&quot;^15logseq____&quot;,[63,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^17logseq____&quot;,2],536870919]],[logseq____&quot;^15logseq____&quot;,[63,logseq____&quot;^Jlogseq____&quot;,[],536870919]],[logseq____&quot;^15logseq____&quot;,[63,logseq____&quot;^Hlogseq____&quot;,25,536870919]],[logseq____&quot;^15logseq____&quot;,[63,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-d5a7-41cb-a16e-7fe7e9371a93logseq____&quot;,536870919]],[logseq____&quot;^15logseq____&quot;,[65,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;### backendlogseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[65,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[65,logseq____&quot;^Flogseq____&quot;,70,536870920]],[logseq____&quot;^15logseq____&quot;,[65,logseq____&quot;^Xlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[65,logseq____&quot;^Vlogseq____&quot;,70,536870920]],[logseq____&quot;^15logseq____&quot;,[65,logseq____&quot;^Ulogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[65,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^17logseq____&quot;,3],536870920]],[logseq____&quot;^15logseq____&quot;,[65,logseq____&quot;^Jlogseq____&quot;,[],536870920]],[logseq____&quot;^15logseq____&quot;,[65,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-292d-4c4b-bc31-b4120796336blogseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[66,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~`MxactM` Page:\\nIt is a bit more complex, since we need a external byte for each `xid` attribute. To avoid alignment issues, we bind four `MxactM` as a group(20 bytes). Thus, with 8kB BLCKSZ, we keep 409 groups er page.  This wastes 12 bytes per page, but thatlogseq____&apos;s OK.logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[66,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[66,logseq____&quot;^Flogseq____&quot;,75,536870920]],[logseq____&quot;^15logseq____&quot;,[66,logseq____&quot;^Xlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[66,logseq____&quot;^Vlogseq____&quot;,80,536870920]],[logseq____&quot;^15logseq____&quot;,[66,logseq____&quot;^Ulogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[66,logseq____&quot;^Ulogseq____&quot;,28,536870920]],[logseq____&quot;^15logseq____&quot;,[66,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-b1b7-49a3-92f5-bea40ca89517logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[67,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;## otherslogseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[67,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[67,logseq____&quot;^Flogseq____&quot;,70,536870920]],[logseq____&quot;^15logseq____&quot;,[67,logseq____&quot;^Xlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[67,logseq____&quot;^Vlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[67,logseq____&quot;^Ulogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[67,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^17logseq____&quot;,2],536870920]],[logseq____&quot;^15logseq____&quot;,[67,logseq____&quot;^Jlogseq____&quot;,[],536870920]],[logseq____&quot;^15logseq____&quot;,[67,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-7420-4ebd-a066-e1d38845f6b1logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[68,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;As mentioned above, we need to maintain every `MXactM` lists for each `MXact`, The logical implement is below:logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[68,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[68,logseq____&quot;^Flogseq____&quot;,80,536870920]],[logseq____&quot;^15logseq____&quot;,[68,logseq____&quot;^Xlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[68,logseq____&quot;^Vlogseq____&quot;,80,536870920]],[logseq____&quot;^15logseq____&quot;,[68,logseq____&quot;^Ulogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[68,logseq____&quot;^Ulogseq____&quot;,28,536870920]],[logseq____&quot;^15logseq____&quot;,[68,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-da61-4c10-9ee0-f23ad5af0738logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[69,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;Whatlogseq____&apos;s `MXact`:\\nDifferent from `xid` as a transaction level concept,  `multi-transaction-id(MXact)` is a `tuple` level concepts.  When there may be a conflict at tuple, that is deciding the `xmax` value , a `MXact` is generated with tuple. The `Mxact` relates to an array of `xid`s which are accessing the tuple an their lock types.logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[69,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[69,logseq____&quot;^Flogseq____&quot;,65,536870920]],[logseq____&quot;^15logseq____&quot;,[69,logseq____&quot;^Xlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[69,logseq____&quot;^Vlogseq____&quot;,65,536870920]],[logseq____&quot;^15logseq____&quot;,[69,logseq____&quot;^Ulogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[69,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-8895-42c6-b676-8e297711edealogseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[70,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;## Low level Designlogseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[70,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[70,logseq____&quot;^Flogseq____&quot;,74,536870920]],[logseq____&quot;^15logseq____&quot;,[70,logseq____&quot;^Xlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[70,logseq____&quot;^Vlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[70,logseq____&quot;^Ulogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[70,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^17logseq____&quot;,2],536870920]],[logseq____&quot;^15logseq____&quot;,[70,logseq____&quot;^Jlogseq____&quot;,[],536870920]],[logseq____&quot;^15logseq____&quot;,[70,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-803f-4f62-9417-9bbdd19aeb59logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[71,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;## Backgroundlogseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[71,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[71,logseq____&quot;^Flogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[71,logseq____&quot;^Xlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[71,logseq____&quot;^Vlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[71,logseq____&quot;^Ulogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[71,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^17logseq____&quot;,2],536870920]],[logseq____&quot;^15logseq____&quot;,[71,logseq____&quot;^Jlogseq____&quot;,[],536870920]],[logseq____&quot;^15logseq____&quot;,[71,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-e72f-4d22-8e5b-cf2b5a26645clogseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[72,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[72,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[72,logseq____&quot;^Flogseq____&quot;,82,536870920]],[logseq____&quot;^15logseq____&quot;,[72,logseq____&quot;^Xlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[72,logseq____&quot;^Vlogseq____&quot;,82,536870920]],[logseq____&quot;^15logseq____&quot;,[72,logseq____&quot;^Ulogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[72,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-66a1-4817-9f01-84391cef93f5logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[73,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;![🖼 mxact-page.png](../assets/mxact-page.png)logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[73,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[73,logseq____&quot;^Flogseq____&quot;,68,536870920]],[logseq____&quot;^15logseq____&quot;,[73,logseq____&quot;^Xlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[73,logseq____&quot;^Vlogseq____&quot;,80,536870920]],[logseq____&quot;^15logseq____&quot;,[73,logseq____&quot;^Ulogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[73,logseq____&quot;^Ulogseq____&quot;,28,536870920]],[logseq____&quot;^15logseq____&quot;,[73,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-0b72-42db-bebf-9ce3bf3f49d2logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[74,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;Four kind of locks:\\nid:: 65844328-bef2-44af-8583-d61849a30ab1\\n* From [Official Docs](https://www.postgresql.org/docs/current/explicit-locking.html#LOCKING-ROWS) , PG has four kinds of tuple-level locks.\\n* ![image.png](../assets/tuple-level-lock-table.png)\\n* `FOR UPDATE` : acquired by `delete` or `UPDATE` that modifies the values of certain columns\\n* have a **unique index** on them that can be used in a foreign key\\n* `FOR NO KEY UPDATE`: acquired by or `UPDATE` that expect the situation above\\n* `FOR SHARE` : #TODO\\n* `FOR KEY SHARE` : #TODO \\n\\n#TODO  letlogseq____&apos;s see `heapam` first before studying the `multixact`logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[74,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[74,logseq____&quot;^Flogseq____&quot;,83,536870920]],[logseq____&quot;^15logseq____&quot;,[74,logseq____&quot;^Xlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[74,logseq____&quot;^Vlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[74,logseq____&quot;^Ulogseq____&quot;,4,536870920]],[logseq____&quot;^15logseq____&quot;,[74,logseq____&quot;^Ulogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[74,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;~:idlogseq____&quot;,logseq____&quot;65844328-bef2-44af-8583-d61849a30ab1logseq____&quot;],536870920]],[logseq____&quot;^15logseq____&quot;,[74,logseq____&quot;^Jlogseq____&quot;,[logseq____&quot;^18logseq____&quot;],536870920]],[logseq____&quot;^15logseq____&quot;,[74,logseq____&quot;^4logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^18logseq____&quot;,logseq____&quot;65844328-bef2-44af-8583-d61849a30ab1logseq____&quot;],536870920]],[logseq____&quot;^15logseq____&quot;,[74,logseq____&quot;^Hlogseq____&quot;,4,536870920]],[logseq____&quot;^15logseq____&quot;,[74,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65844328-bef2-44af-8583-d61849a30ab1logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[75,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~`Mxact` Page:\\nSimilar to clog, one `mxact` occupy 32 bits, so `mxact` can fill the page perfectlylogseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[75,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[75,logseq____&quot;^Flogseq____&quot;,73,536870920]],[logseq____&quot;^15logseq____&quot;,[75,logseq____&quot;^Xlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[75,logseq____&quot;^Vlogseq____&quot;,80,536870920]],[logseq____&quot;^15logseq____&quot;,[75,logseq____&quot;^Ulogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[75,logseq____&quot;^Ulogseq____&quot;,28,536870920]],[logseq____&quot;^15logseq____&quot;,[75,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-7501-43d6-80df-535126df9539logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[76,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~```\\nheapam_tuple_delete\\n.   heapam_tuple_lock_internal\\n.       heap_lock_tuple\\n.           if (infomask logseq____&amp; HEAP_XMAX_IS_MULTI)\\n            GetMultiXactIdMembers\\n```logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[76,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[76,logseq____&quot;^Flogseq____&quot;,67,536870920]],[logseq____&quot;^15logseq____&quot;,[76,logseq____&quot;^Xlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[76,logseq____&quot;^Vlogseq____&quot;,67,536870920]],[logseq____&quot;^15logseq____&quot;,[76,logseq____&quot;^Ulogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[76,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-388c-4690-b403-651f88a12886logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[77,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;So we call the the transaction with its lock type as `multi transaction member(MXactM)`logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[77,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[77,logseq____&quot;^Flogseq____&quot;,69,536870920]],[logseq____&quot;^15logseq____&quot;,[77,logseq____&quot;^Xlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[77,logseq____&quot;^Vlogseq____&quot;,65,536870920]],[logseq____&quot;^15logseq____&quot;,[77,logseq____&quot;^Ulogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[77,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-4816-4377-8d0a-5711bad9942blogseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[78,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;The `MultiXactStatus` is the lock type ((65844328-bef2-44af-8583-d61849a30ab1))logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[78,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[78,logseq____&quot;^Flogseq____&quot;,77,536870920]],[logseq____&quot;^15logseq____&quot;,[78,logseq____&quot;^Xlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[78,logseq____&quot;^Vlogseq____&quot;,65,536870920]],[logseq____&quot;^15logseq____&quot;,[78,logseq____&quot;^Ulogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[78,logseq____&quot;^Hlogseq____&quot;,74,536870920]],[logseq____&quot;^15logseq____&quot;,[78,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-0e8b-423d-812a-e866e537b7cdlogseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[79,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~```C\\ntypedef struct MultiXactMember\\n{\\n\\tTransactionId xid;\\n\\tMultiXactStatus status;\\n} MultiXactMember;\\n```logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[79,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[79,logseq____&quot;^Flogseq____&quot;,77,536870920]],[logseq____&quot;^15logseq____&quot;,[79,logseq____&quot;^Xlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[79,logseq____&quot;^Vlogseq____&quot;,77,536870920]],[logseq____&quot;^15logseq____&quot;,[79,logseq____&quot;^Ulogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[79,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-c86b-4106-a83d-552c109bf821logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[80,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;### Two [[slru]] structure:logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[80,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[80,logseq____&quot;^Flogseq____&quot;,65,536870920]],[logseq____&quot;^15logseq____&quot;,[80,logseq____&quot;^Xlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[80,logseq____&quot;^Vlogseq____&quot;,70,536870920]],[logseq____&quot;^15logseq____&quot;,[80,logseq____&quot;^Ulogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[80,logseq____&quot;^Ulogseq____&quot;,28,536870920]],[logseq____&quot;^15logseq____&quot;,[80,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^17logseq____&quot;,3],536870920]],[logseq____&quot;^15logseq____&quot;,[80,logseq____&quot;^Jlogseq____&quot;,[],536870920]],[logseq____&quot;^15logseq____&quot;,[80,logseq____&quot;^Hlogseq____&quot;,28,536870920]],[logseq____&quot;^15logseq____&quot;,[80,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-427d-469d-b384-d216f137733alogseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[81,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~```C\\ntypedef enum\\n{\\n\\tMultiXactStatusForKeyShare = 0x00,\\n\\tMultiXactStatusForShare = 0x01,\\n\\tMultiXactStatusForNoKeyUpdate = 0x02,\\n\\tMultiXactStatusForUpdate = 0x03,\\n\\t/* an update that doesnlogseq____&apos;t touch \\logseq____&quot;key\\logseq____&quot; columns */\\n\\tMultiXactStatusNoKeyUpdate = 0x04,\\n\\t/* other updates, and delete */\\n\\tMultiXactStatusUpdate = 0x05\\n} MultiXactStatus;\\n```logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[81,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[81,logseq____&quot;^Flogseq____&quot;,78,536870920]],[logseq____&quot;^15logseq____&quot;,[81,logseq____&quot;^Xlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[81,logseq____&quot;^Vlogseq____&quot;,78,536870920]],[logseq____&quot;^15logseq____&quot;,[81,logseq____&quot;^Ulogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[81,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-e869-4887-8731-1672c5e14887logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[82,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;### Control dat: `MultiXactStateData`logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[82,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[82,logseq____&quot;^Flogseq____&quot;,80,536870920]],[logseq____&quot;^15logseq____&quot;,[82,logseq____&quot;^Xlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[82,logseq____&quot;^Vlogseq____&quot;,70,536870920]],[logseq____&quot;^15logseq____&quot;,[82,logseq____&quot;^Ulogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[82,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^17logseq____&quot;,3],536870920]],[logseq____&quot;^15logseq____&quot;,[82,logseq____&quot;^Jlogseq____&quot;,[],536870920]],[logseq____&quot;^15logseq____&quot;,[82,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-6a64-4375-8b95-6a16fb7c1ef2logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[83,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;Why is `multi-transaction-log` #SLRU_IMPLEMENT\\n* Since many transactions can have the shared lock on a same tuple simultaneously but there is no space to record these transactions in the tuple header, welogseq____&apos;d better to manage a specific **shared space** to recording the transactions that holding the tuple-level locks.\\n* A shared memory space doesnlogseq____&apos;t seem OK since one transaction can access tons of tuple which is unadvisable to store them in memory. So the only solution is recording in disk\\n* So locking a row might cause a disk writelogseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[83,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[83,logseq____&quot;^Flogseq____&quot;,71,536870920]],[logseq____&quot;^15logseq____&quot;,[83,logseq____&quot;^Xlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[83,logseq____&quot;^Vlogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[83,logseq____&quot;^Ulogseq____&quot;,22,536870920]],[logseq____&quot;^15logseq____&quot;,[83,logseq____&quot;^Ulogseq____&quot;,23,536870920]],[logseq____&quot;^15logseq____&quot;,[83,logseq____&quot;^Hlogseq____&quot;,23,536870920]],[logseq____&quot;^15logseq____&quot;,[83,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-d9e6-4b80-b886-cb060f86b8c0logseq____&quot;,536870920]],[logseq____&quot;^15logseq____&quot;,[85,logseq____&quot;^Klogseq____&quot;,1703431319807,536870921]],[logseq____&quot;^15logseq____&quot;,[85,logseq____&quot;^@logseq____&quot;,false,536870921]],[logseq____&quot;^15logseq____&quot;,[85,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;relfilelocatorlogseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[85,logseq____&quot;^11logseq____&quot;,logseq____&quot;relfilelocatorlogseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[85,logseq____&quot;^Blogseq____&quot;,1703431319807,536870921]],[logseq____&quot;^15logseq____&quot;,[85,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c98-41f4-40d9-b905-808f2521db7blogseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[86,logseq____&quot;^Klogseq____&quot;,1703431319808,536870921]],[logseq____&quot;^15logseq____&quot;,[86,logseq____&quot;^@logseq____&quot;,false,536870921]],[logseq____&quot;^15logseq____&quot;,[86,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;shared-bufferslogseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[86,logseq____&quot;^11logseq____&quot;,logseq____&quot;shared-bufferslogseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[86,logseq____&quot;^Blogseq____&quot;,1703431319808,536870921]],[logseq____&quot;^15logseq____&quot;,[86,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-2eae-4ca4-baa8-d139c512d53dlogseq____&quot;,536870922]],[logseq____&quot;^15logseq____&quot;,[87,logseq____&quot;^Klogseq____&quot;,1703431319808,536870921]],[logseq____&quot;^15logseq____&quot;,[87,logseq____&quot;^@logseq____&quot;,false,536870921]],[logseq____&quot;^15logseq____&quot;,[87,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;unlogged-tablelogseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[87,logseq____&quot;^11logseq____&quot;,logseq____&quot;unlogged-tablelogseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[87,logseq____&quot;^Blogseq____&quot;,1703431319808,536870921]],[logseq____&quot;^15logseq____&quot;,[87,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-cf7f-4fb6-99cf-3ec06f4f1076logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[88,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;The main data, fsm and vm are all buffered by the [[shared-buffers]] .logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[88,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[88,logseq____&quot;^Flogseq____&quot;,89,536870921]],[logseq____&quot;^15logseq____&quot;,[88,logseq____&quot;^Xlogseq____&quot;,85,536870921]],[logseq____&quot;^15logseq____&quot;,[88,logseq____&quot;^Vlogseq____&quot;,89,536870921]],[logseq____&quot;^15logseq____&quot;,[88,logseq____&quot;^Ulogseq____&quot;,85,536870921]],[logseq____&quot;^15logseq____&quot;,[88,logseq____&quot;^Ulogseq____&quot;,86,536870921]],[logseq____&quot;^15logseq____&quot;,[88,logseq____&quot;^Hlogseq____&quot;,86,536870921]],[logseq____&quot;^15logseq____&quot;,[88,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-e540-4f48-9d4f-01ee2d4a1f90logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[89,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;It is the file \\logseq____&quot;type\\logseq____&quot; of a relationlogseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[89,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[89,logseq____&quot;^Flogseq____&quot;,98,536870921]],[logseq____&quot;^15logseq____&quot;,[89,logseq____&quot;^Xlogseq____&quot;,85,536870921]],[logseq____&quot;^15logseq____&quot;,[89,logseq____&quot;^Vlogseq____&quot;,98,536870921]],[logseq____&quot;^15logseq____&quot;,[89,logseq____&quot;^Ulogseq____&quot;,85,536870921]],[logseq____&quot;^15logseq____&quot;,[89,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-02b7-4989-932f-8cbe30050c7dlogseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[90,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~`INIT_FORKNUM` : for  [unlogged table](https://www.postgresql.org/docs/current/sql-createtable.html#SQL-CREATETABLE-UNLOGGED)logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[90,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[90,logseq____&quot;^Flogseq____&quot;,92,536870921]],[logseq____&quot;^15logseq____&quot;,[90,logseq____&quot;^Xlogseq____&quot;,85,536870921]],[logseq____&quot;^15logseq____&quot;,[90,logseq____&quot;^Vlogseq____&quot;,98,536870921]],[logseq____&quot;^15logseq____&quot;,[90,logseq____&quot;^Ulogseq____&quot;,85,536870921]],[logseq____&quot;^15logseq____&quot;,[90,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-d513-472c-8081-2b632d599cfelogseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[91,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~`FSM_FORKNUM` : free space manager filelogseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[91,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[91,logseq____&quot;^Flogseq____&quot;,99,536870921]],[logseq____&quot;^15logseq____&quot;,[91,logseq____&quot;^Xlogseq____&quot;,85,536870921]],[logseq____&quot;^15logseq____&quot;,[91,logseq____&quot;^Vlogseq____&quot;,98,536870921]],[logseq____&quot;^15logseq____&quot;,[91,logseq____&quot;^Ulogseq____&quot;,85,536870921]],[logseq____&quot;^15logseq____&quot;,[91,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-bd07-4e00-af74-08a44219db44logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[92,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~`VISIBILITYMAP_FORKNUM` : VISIBILITYMAP filelogseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[92,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[92,logseq____&quot;^Flogseq____&quot;,91,536870921]],[logseq____&quot;^15logseq____&quot;,[92,logseq____&quot;^Xlogseq____&quot;,85,536870921]],[logseq____&quot;^15logseq____&quot;,[92,logseq____&quot;^Vlogseq____&quot;,98,536870921]],[logseq____&quot;^15logseq____&quot;,[92,logseq____&quot;^Ulogseq____&quot;,85,536870921]],[logseq____&quot;^15logseq____&quot;,[92,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-95f7-44e2-a416-308fb56686d0logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[93,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[93,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[93,logseq____&quot;^Flogseq____&quot;,98,536870921]],[logseq____&quot;^15logseq____&quot;,[93,logseq____&quot;^Xlogseq____&quot;,85,536870921]],[logseq____&quot;^15logseq____&quot;,[93,logseq____&quot;^Vlogseq____&quot;,85,536870921]],[logseq____&quot;^15logseq____&quot;,[93,logseq____&quot;^Ulogseq____&quot;,85,536870921]],[logseq____&quot;^15logseq____&quot;,[93,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-ecd6-47b1-98b3-2336bbc3a72alogseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[94,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~`RelFileNumber` is the file name of the relationlogseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[94,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[94,logseq____&quot;^Flogseq____&quot;,101,536870921]],[logseq____&quot;^15logseq____&quot;,[94,logseq____&quot;^Xlogseq____&quot;,85,536870921]],[logseq____&quot;^15logseq____&quot;,[94,logseq____&quot;^Vlogseq____&quot;,85,536870921]],[logseq____&quot;^15logseq____&quot;,[94,logseq____&quot;^Ulogseq____&quot;,85,536870921]],[logseq____&quot;^15logseq____&quot;,[94,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-03e5-4b2c-bc8f-514858fd3623logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[95,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;## buffer tag\\nid:: 6581a94f-7372-4aef-9531-962f2170ffeclogseq____&quot;,536870922]],[logseq____&quot;^15logseq____&quot;,[95,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870922]],[logseq____&quot;^15logseq____&quot;,[95,logseq____&quot;^Flogseq____&quot;,86,536870922]],[logseq____&quot;^15logseq____&quot;,[95,logseq____&quot;^Xlogseq____&quot;,86,536870922]],[logseq____&quot;^15logseq____&quot;,[95,logseq____&quot;^Vlogseq____&quot;,86,536870922]],[logseq____&quot;^15logseq____&quot;,[95,logseq____&quot;^Ulogseq____&quot;,86,536870922]],[logseq____&quot;^15logseq____&quot;,[95,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^18logseq____&quot;,logseq____&quot;6581a94f-7372-4aef-9531-962f2170ffeclogseq____&quot;,logseq____&quot;^17logseq____&quot;,2],536870922]],[logseq____&quot;^15logseq____&quot;,[95,logseq____&quot;^Jlogseq____&quot;,[logseq____&quot;^18logseq____&quot;],536870922]],[logseq____&quot;^15logseq____&quot;,[95,logseq____&quot;^4logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^18logseq____&quot;,logseq____&quot;6581a94f-7372-4aef-9531-962f2170ffeclogseq____&quot;],536870922]],[logseq____&quot;^15logseq____&quot;,[95,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u6581a94f-7372-4aef-9531-962f2170ffeclogseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[96,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;Oid of a relation is logically existent.logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[96,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[96,logseq____&quot;^Flogseq____&quot;,94,536870921]],[logseq____&quot;^15logseq____&quot;,[96,logseq____&quot;^Xlogseq____&quot;,85,536870921]],[logseq____&quot;^15logseq____&quot;,[96,logseq____&quot;^Vlogseq____&quot;,94,536870921]],[logseq____&quot;^15logseq____&quot;,[96,logseq____&quot;^Ulogseq____&quot;,85,536870921]],[logseq____&quot;^15logseq____&quot;,[96,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-b0d5-4712-9286-4753fef38c2dlogseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[97,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;{{embed [[unlogged-table]]}}logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[97,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[97,logseq____&quot;^Flogseq____&quot;,90,536870921]],[logseq____&quot;^15logseq____&quot;,[97,logseq____&quot;^Slogseq____&quot;,104,536870921]],[logseq____&quot;^15logseq____&quot;,[97,logseq____&quot;^Xlogseq____&quot;,85,536870921]],[logseq____&quot;^15logseq____&quot;,[97,logseq____&quot;^Vlogseq____&quot;,90,536870921]],[logseq____&quot;^15logseq____&quot;,[97,logseq____&quot;^Ulogseq____&quot;,85,536870921]],[logseq____&quot;^15logseq____&quot;,[97,logseq____&quot;^Ulogseq____&quot;,87,536870921]],[logseq____&quot;^15logseq____&quot;,[97,logseq____&quot;^Hlogseq____&quot;,87,536870921]],[logseq____&quot;^15logseq____&quot;,[97,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-e74f-451b-a58f-86b9a2f13026logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[98,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~`ForkNumber`\\nid:: 65805626-a222-4aa2-88e3-8a3dcfda498flogseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[98,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[98,logseq____&quot;^Flogseq____&quot;,94,536870921]],[logseq____&quot;^15logseq____&quot;,[98,logseq____&quot;^Xlogseq____&quot;,85,536870921]],[logseq____&quot;^15logseq____&quot;,[98,logseq____&quot;^Vlogseq____&quot;,85,536870921]],[logseq____&quot;^15logseq____&quot;,[98,logseq____&quot;^Ulogseq____&quot;,85,536870921]],[logseq____&quot;^15logseq____&quot;,[98,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^18logseq____&quot;,logseq____&quot;65805626-a222-4aa2-88e3-8a3dcfda498flogseq____&quot;],536870921]],[logseq____&quot;^15logseq____&quot;,[98,logseq____&quot;^Jlogseq____&quot;,[logseq____&quot;^18logseq____&quot;],536870921]],[logseq____&quot;^15logseq____&quot;,[98,logseq____&quot;^4logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^18logseq____&quot;,logseq____&quot;65805626-a222-4aa2-88e3-8a3dcfda498flogseq____&quot;],536870921]],[logseq____&quot;^15logseq____&quot;,[98,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65805626-a222-4aa2-88e3-8a3dcfda498flogseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[99,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~`MAIN_FORKNUM` : heap filelogseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[99,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[99,logseq____&quot;^Flogseq____&quot;,89,536870921]],[logseq____&quot;^15logseq____&quot;,[99,logseq____&quot;^Xlogseq____&quot;,85,536870921]],[logseq____&quot;^15logseq____&quot;,[99,logseq____&quot;^Vlogseq____&quot;,98,536870921]],[logseq____&quot;^15logseq____&quot;,[99,logseq____&quot;^Ulogseq____&quot;,85,536870921]],[logseq____&quot;^15logseq____&quot;,[99,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-7647-4044-8941-e1548b2e17c3logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[100,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;See ((6581a94f-7372-4aef-9531-962f2170ffec)) for detaillogseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[100,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[100,logseq____&quot;^Flogseq____&quot;,88,536870921]],[logseq____&quot;^15logseq____&quot;,[100,logseq____&quot;^Xlogseq____&quot;,85,536870921]],[logseq____&quot;^15logseq____&quot;,[100,logseq____&quot;^Vlogseq____&quot;,89,536870921]],[logseq____&quot;^15logseq____&quot;,[100,logseq____&quot;^Ulogseq____&quot;,85,536870921]],[logseq____&quot;^15logseq____&quot;,[100,logseq____&quot;^Hlogseq____&quot;,95,536870921]],[logseq____&quot;^15logseq____&quot;,[100,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-ab15-4cce-bdf6-d4123b9c6ee9logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[101,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~```C\\ntypedef struct RelFileLocator\\n{\\n\\tOid\\t\\t\\tspcOid;\\t\\t\\t/* tablespace */\\n\\tOid\\t\\t\\tdbOid;\\t\\t\\t/* database */\\n\\tRelFileNumber relNumber;\\t/* relation */\\n} RelFileLocator;\\n```logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[101,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[101,logseq____&quot;^Flogseq____&quot;,85,536870921]],[logseq____&quot;^15logseq____&quot;,[101,logseq____&quot;^Xlogseq____&quot;,85,536870921]],[logseq____&quot;^15logseq____&quot;,[101,logseq____&quot;^Vlogseq____&quot;,85,536870921]],[logseq____&quot;^15logseq____&quot;,[101,logseq____&quot;^Ulogseq____&quot;,85,536870921]],[logseq____&quot;^15logseq____&quot;,[101,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-336d-4b7e-96c2-7cca60aaed68logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[102,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;RelFileNumber is physically existent, since operations like `vacuum full` and `truncate` will create new files with different file namelogseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[102,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[102,logseq____&quot;^Flogseq____&quot;,96,536870921]],[logseq____&quot;^15logseq____&quot;,[102,logseq____&quot;^Xlogseq____&quot;,85,536870921]],[logseq____&quot;^15logseq____&quot;,[102,logseq____&quot;^Vlogseq____&quot;,94,536870921]],[logseq____&quot;^15logseq____&quot;,[102,logseq____&quot;^Ulogseq____&quot;,85,536870921]],[logseq____&quot;^15logseq____&quot;,[102,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-d011-494b-9d6d-f1ff0f72cf9elogseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[103,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[103,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[103,logseq____&quot;^Flogseq____&quot;,90,536870921]],[logseq____&quot;^15logseq____&quot;,[103,logseq____&quot;^Xlogseq____&quot;,85,536870921]],[logseq____&quot;^15logseq____&quot;,[103,logseq____&quot;^Vlogseq____&quot;,98,536870921]],[logseq____&quot;^15logseq____&quot;,[103,logseq____&quot;^Ulogseq____&quot;,85,536870921]],[logseq____&quot;^15logseq____&quot;,[103,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-ebe4-42f6-b7e9-a47b06294fd1logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[104,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;~:logseq.macro-namelogseq____&quot;,logseq____&quot;embedlogseq____&quot;,logseq____&quot;~:logseq.macro-argumentslogseq____&quot;,[logseq____&quot;[[unlogged-table]]logseq____&quot;]],536870921]],[logseq____&quot;^15logseq____&quot;,[104,logseq____&quot;^Wlogseq____&quot;,logseq____&quot;macrologseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[104,logseq____&quot;^Tlogseq____&quot;,logseq____&quot;embed [[unlogged-table]]logseq____&quot;,536870921]],[logseq____&quot;^15logseq____&quot;,[106,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~```\\nBufferGetTag(Buffer buffer, RelFileLocator *rlocator, ForkNumber *forknum,\\n\\t\\t\\t BlockNumber *blknum)\\n{\\n\\tbufHdr = GetLocalBufferDescriptor/GetBufferDescriptor\\n    *rlocator = BufTagGetRelFileLocator(logseq____&amp;bufHdr-logseq____&gt;tag);\\n    *forknum = BufTagGetForkNum(logseq____&amp;bufHdr-logseq____&gt;tag);\\n    *blknum = bufHdr-logseq____&gt;tag.blockNum;\\n}\\n```logseq____&quot;,536870922]],[logseq____&quot;^15logseq____&quot;,[106,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870922]],[logseq____&quot;^15logseq____&quot;,[106,logseq____&quot;^Flogseq____&quot;,95,536870922]],[logseq____&quot;^15logseq____&quot;,[106,logseq____&quot;^Xlogseq____&quot;,86,536870922]],[logseq____&quot;^15logseq____&quot;,[106,logseq____&quot;^Vlogseq____&quot;,95,536870922]],[logseq____&quot;^15logseq____&quot;,[106,logseq____&quot;^Ulogseq____&quot;,86,536870922]],[logseq____&quot;^15logseq____&quot;,[106,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-2a15-44c3-a709-90d2eefdd6f9logseq____&quot;,536870922]],[logseq____&quot;^15logseq____&quot;,[107,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;logseq____&quot;,536870922]],[logseq____&quot;^15logseq____&quot;,[107,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870922]],[logseq____&quot;^15logseq____&quot;,[107,logseq____&quot;^Flogseq____&quot;,95,536870922]],[logseq____&quot;^15logseq____&quot;,[107,logseq____&quot;^Xlogseq____&quot;,86,536870922]],[logseq____&quot;^15logseq____&quot;,[107,logseq____&quot;^Vlogseq____&quot;,86,536870922]],[logseq____&quot;^15logseq____&quot;,[107,logseq____&quot;^Ulogseq____&quot;,86,536870922]],[logseq____&quot;^15logseq____&quot;,[107,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-701e-4193-8e1a-2e1440e0ff07logseq____&quot;,536870922]],[logseq____&quot;^15logseq____&quot;,[109,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;#### 基础函数\\n\\n* 选择一个空slot\\n\\n```C\\n/* Select the slot to re-use when we need a free slot. */\\n/* Control lock must be held at entry, and will be held at exit. */\\nstatic int\\nSlruSelectLRUPage(SlruCtl ctl, int pageno)\\n{\\nfor (;;)\\n# return if we have such a slot\\n# return if we have an empty slot \\logseq____&quot;SLRU_PAGE_EMPTY\\logseq____&quot;\\n# select a lru slot\\n\\t# return it if itlogseq____&apos;s clean. Or\\n\\t# victim it if dirty\\n# loop end -- Itlogseq____&apos;s a very clever design to dealing with corner cases\\n#             such as the victim page being re-dirtied while we wrote it.\\n}\\n```\\n\\n* 记录一个\\logseq____&quot;most recently used\\logseq____&quot;的page，`cur_lru_count++` 并用其赋值 \\n\\n```C\\n#define SlruRecentlyUsed(shared, slotno)\\t\\\\\\ndo { \\\\\\nint\\t\\tnew_lru_count = (shared)-logseq____&gt;cur_lru_count; \\\\\\nif (new_lru_count != (shared)-logseq____&gt;page_lru_count[slotno]) { \\\\\\n\\t(shared)-logseq____&gt;cur_lru_count = ++new_lru_count; \\\\\\n\\t(shared)-logseq____&gt;page_lru_count[slotno] = new_lru_count; \\\\\\n} \\\\\\n} while (0)\\n```\\n\\n* 从磁盘中读取一个 `page`\\n\\n```C\\nSlruPhysicalReadPage\\n{\\n  int\\tsegno = pageno / SLRU_PAGES_PER_SEGMENT;\\n  SlruFileName(ctl, path, segno);\\n\\n  /*\\n   * In a crash-and-restart situation, itlogseq____&apos;s possible for us to receive\\n   * commands to set the commit status of transactions whose bits are in\\n   * already-truncated segments of the commit log\\n   */\\n  fd = OpenTransientFile(path, O_RDONLY | PG_BINARY);\\n  if (fd logseq____&lt; 0 logseq____&amp;logseq____&amp; !InRecovery) ereport()\\n\\n  pg_pread(fd, shared-logseq____&gt;page_buffer[slotno], BLCKSZ, offset)\\n}\\n```\\n\\n* 向磁盘中写入一个 `page`\\n\\n```C\\nSlruPhysicalWritePage\\n{\\n  /* We must flush WAL before flush slru pages */\\n  if (shared-logseq____&gt;group_lsn != NULL)\\n  {\\n      max_lsn = shared-logseq____&gt;group_lsn[lsnindex++];\\n      XLogFlush(max_lsn);\\n  }\\n\\n  SlruFileName(ctl, path, segno);\\n  fd = OpenTransientFile(path, O_RDWR | O_CREAT | PG_BINARY);\\n  pg_pwrite(fd, shared-logseq____&gt;page_buffer[slotno], BLCKSZ, offset)\\n  /* Queue up a sync request for the checkpointer. */\\n  ...\\n}\\n```logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[109,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[109,logseq____&quot;^Flogseq____&quot;,112,536870923]],[logseq____&quot;^15logseq____&quot;,[109,logseq____&quot;^Xlogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[109,logseq____&quot;^Vlogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[109,logseq____&quot;^Ulogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[109,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^17logseq____&quot;,4],536870923]],[logseq____&quot;^15logseq____&quot;,[109,logseq____&quot;^Jlogseq____&quot;,[],536870923]],[logseq____&quot;^15logseq____&quot;,[109,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-a3cc-4b2f-ad7b-6d8061f48bc0logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[110,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;### 简述\\n\\n+ slru用来干什么？\\n  + slru是一个简单的buffer管理模块，simple slru\\n+ 有了buffer pool manager，为什么还要slru？\\n  + bpm管理通用的page，比如heap，vm等\\n  + slru最大的特点就是lru，非常适合处理xid这样，递增的信息。\\n+ 下面的代码分析基于pg15logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[110,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[110,logseq____&quot;^Flogseq____&quot;,115,536870923]],[logseq____&quot;^15logseq____&quot;,[110,logseq____&quot;^Xlogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[110,logseq____&quot;^Vlogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[110,logseq____&quot;^Ulogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[110,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^17logseq____&quot;,3],536870923]],[logseq____&quot;^15logseq____&quot;,[110,logseq____&quot;^Jlogseq____&quot;,[],536870923]],[logseq____&quot;^15logseq____&quot;,[110,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-e597-4f17-8b22-aafb893f45cflogseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[111,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;### 存储结构\\n\\n与bpm不同，通过slru管理的page，其文件大小固定，一个文件有32个page，一个page有8KB，故一个文件最大为256K。\\n\\n与WAL不同，WAL文件的大小在创建时就已经确定为16M，与WAL文件重用保持一致，而slru的文件，先在内存中产生相应的page，再会去落盘。\\n\\n```C\\n#define SLRU_PAGES_PER_SEGMENT\\t32\\n```logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[111,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[111,logseq____&quot;^Flogseq____&quot;,110,536870923]],[logseq____&quot;^15logseq____&quot;,[111,logseq____&quot;^Xlogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[111,logseq____&quot;^Vlogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[111,logseq____&quot;^Ulogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[111,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^17logseq____&quot;,3],536870923]],[logseq____&quot;^15logseq____&quot;,[111,logseq____&quot;^Jlogseq____&quot;,[],536870923]],[logseq____&quot;^15logseq____&quot;,[111,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-8df4-4ebe-ba34-ee77a5a82df1logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[112,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;### 核心功能\\n\\n1. `SimpleLruZeroPage`：新增一个page\\n2. `SimpleLruReadPage` ：读一个page\\n3. `SimpleLruWritePage` ：写一个pagelogseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[112,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[112,logseq____&quot;^Flogseq____&quot;,113,536870923]],[logseq____&quot;^15logseq____&quot;,[112,logseq____&quot;^Xlogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[112,logseq____&quot;^Vlogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[112,logseq____&quot;^Ulogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[112,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^17logseq____&quot;,3],536870923]],[logseq____&quot;^15logseq____&quot;,[112,logseq____&quot;^Jlogseq____&quot;,[],536870923]],[logseq____&quot;^15logseq____&quot;,[112,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-53f9-436a-97a7-0a4035189738logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[113,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;##### 各个进程私有的pointer\\n\\n```C\\n\\n/*\\n* SlruCtlData is an unshared structure that points to the active information\\n* in shared memory.\\n*/\\ntypedef struct SlruCtlData\\n{\\nSlruShared\\tshared;\\n\\n/*\\n* Decide whether a page is \\logseq____&quot;older\\logseq____&quot; for truncation and as a hint for\\n* evicting pages in LRU order.  \\n*/\\nbool\\t\\t(*PagePrecedes) (int, int);\\n\\n/*\\n* Dir is set during SimpleLruInit and does not change thereafter. Since\\n* itlogseq____&apos;s always the same, it doesnlogseq____&apos;t need to be in shared memory.\\n*/\\nchar\\t\\tDir[64];\\n} SlruCtlData;\\n```\\n\\n初始化时，即返回一个`SlruCtlData`。`Dir` 是初始化时的标记，不同模块会填充对应的名称。logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[113,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[113,logseq____&quot;^Flogseq____&quot;,117,536870923]],[logseq____&quot;^15logseq____&quot;,[113,logseq____&quot;^Xlogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[113,logseq____&quot;^Vlogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[113,logseq____&quot;^Ulogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[113,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^17logseq____&quot;,5],536870923]],[logseq____&quot;^15logseq____&quot;,[113,logseq____&quot;^Jlogseq____&quot;,[],536870923]],[logseq____&quot;^15logseq____&quot;,[113,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-8fb8-461e-b5eb-575010fe3a18logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[114,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;####  内存slrulogseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[114,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[114,logseq____&quot;^Flogseq____&quot;,111,536870923]],[logseq____&quot;^15logseq____&quot;,[114,logseq____&quot;^Xlogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[114,logseq____&quot;^Vlogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[114,logseq____&quot;^Ulogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[114,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^17logseq____&quot;,4],536870923]],[logseq____&quot;^15logseq____&quot;,[114,logseq____&quot;^Jlogseq____&quot;,[],536870923]],[logseq____&quot;^15logseq____&quot;,[114,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-2d52-4b19-88bf-77bdba08eb06logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[115,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;本文主要为`SLRU`本身的结构解读。 #SLRU_IMPLEMENTlogseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[115,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[115,logseq____&quot;^Flogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[115,logseq____&quot;^Xlogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[115,logseq____&quot;^Vlogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[115,logseq____&quot;^Ulogseq____&quot;,23,536870923]],[logseq____&quot;^15logseq____&quot;,[115,logseq____&quot;^Ulogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[115,logseq____&quot;^Hlogseq____&quot;,23,536870923]],[logseq____&quot;^15logseq____&quot;,[115,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-c878-4826-9e4f-34bb87f5e7b5logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[116,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;#### interface\\n\\n* 新增一个 `page` 到buffer。\\n```C\\n/* Initialize (or reinitialize) a page to zeroes. */\\nint\\nSimpleLruZeroPage(SlruCtl ctl, int pageno)\\n{\\nslotno = SlruSelectLRUPage(ctl, pageno);\\nSlruRecentlyUsed(shared, slotno);\\n\\n# SlruSelectLRUPage may return a in-use page, we must clear it\\nMemSet(shared-logseq____&gt;page_buffer[slotno], 0, BLCKSZ);\\n\\nSimpleLruZeroLSNs(ctl, slotno);\\n}\\n```\\n\\n* 从 `disk` 中读取一个 `page`\\n```C\\n/* Control lock must be held at entry, and will be held at exit. */\\nSimpleLruReadPage\\n{\\n  #infinite loop\\n      slotno = SlruSelectLRUPage(ctl, pageno);\\n      # for in IO slots, just wait\\n      /* update in-memory status */\\n      shared-logseq____&gt;page_number[slotno] = pageno;\\n      shared-logseq____&gt;page_status[slotno] = SLRU_PAGE_READ_IN_PROGRESS;\\n      shared-logseq____&gt;page_dirty[slotno] = false;\\n\\n      /* Acquire per-buffer lock and release control lock */\\n      LWLockAcquire(logseq____&amp;shared-logseq____&gt;buffer_locks[slotno].lock, LW_EXCLUSIVE);\\n      LWLockRelease(shared-logseq____&gt;ControlLock);\\n\\n      ok = SlruPhysicalReadPage(ctl, pageno, slotno);\\n\\n      /* re-acquire control lock */\\n      LWLockAcquire(shared-logseq____&gt;ControlLock, LW_EXCLUSIVE);\\n      # others\\n}\\n```\\n这里的锁设计很特别：\\n1. 在 `SlruSelectLRUPage` 需要获取全局锁\\n2. 在 `SimpleLruReadPage` 中，先初始化内存，再获取 `per-buffer` 锁，同时释放 `ControlLock`\\n\\n在看函数 `SimpleLruZeroPage`\\n```C\\n/* Control lock must be held at entry, and will be held at exit. */\\nSimpleLruZeroPage\\n{\\n  slotno = SlruSelectLRUPage(ctl, pageno);\\n  shared-logseq____&gt;page_number[slotno] = pageno;\\n  shared-logseq____&gt;page_status[slotno] = SLRU_PAGE_VALID;\\n  shared-logseq____&gt;page_dirty[slotno] = true;\\n}\\n```\\n难道，一旦获取 `ControlLock`，即可对任意 `slot` 进行修改？\\n\\n实际上，`SimpleLruReadPage` 读取的 `page`，必须已存在于磁盘（或者经由 `WAL` 来保证）。\\n而 `SimpleLruZeroPage` 所初始化的 `page` 必须不存在。从使用逻辑上保证二者不产生冲突。\\n\\n* SimpleLruWritePage(SlruInternalWritePage)\\n\\n```C\\n/* Control lock must be held at entry, and will be held at exit. */\\nSlruInternalWritePage\\n{\\n  /* If a write is in progress, wait for it to finish */\\n  /* Do nothing if page is not dirty */\\n\\n  /* update in-memory status */\\n  shared-logseq____&gt;page_status[slotno] = SLRU_PAGE_WRITE_IN_PROGRESS;\\n  shared-logseq____&gt;page_dirty[slotno] = false;\\n\\n  /* Acquire per-buffer lock and release control lock */\\n  LWLockAcquire(logseq____&amp;shared-logseq____&gt;buffer_locks[slotno].lock, LW_EXCLUSIVE);\\n  LWLockRelease(shared-logseq____&gt;ControlLock);\\n\\n  SlruPhysicalWritePage(ctl, pageno, slotno, fdata);\\n\\n  /* re-acquire control lock */\\n  LWLockAcquire(shared-logseq____&gt;ControlLock, LW_EXCLUSIVE);\\n\\n  shared-logseq____&gt;page_status[slotno] = SLRU_PAGE_VALID;\\n}\\n```logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[116,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[116,logseq____&quot;^Flogseq____&quot;,109,536870923]],[logseq____&quot;^15logseq____&quot;,[116,logseq____&quot;^Xlogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[116,logseq____&quot;^Vlogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[116,logseq____&quot;^Ulogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[116,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^17logseq____&quot;,4],536870923]],[logseq____&quot;^15logseq____&quot;,[116,logseq____&quot;^Jlogseq____&quot;,[],536870923]],[logseq____&quot;^15logseq____&quot;,[116,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-8ac2-4615-975f-93a7b53ee4d7logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[117,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;##### 全局 buffer 数组\\n\\n```C\\ntypedef struct SlruSharedData\\n{\\nLWLock\\t   *ControlLock;\\n\\n/* Number of buffers managed by this SLRU structure */\\nint\\t\\t\\tnum_slots;\\n\\n/*\\n* Arrays holding info for each buffer slot.  Page number is undefined\\n* when status is EMPTY, as is page_lru_count.\\n*/\\nchar\\t  **page_buffer;\\nSlruPageStatus *page_status;\\nbool\\t   *page_dirty;\\nint\\t\\t   *page_number;\\nint\\t\\t   *page_lru_count;\\nLWLockPadded *buffer_locks;\\n\\n  XLogRecPtr *group_lsn;\\nint\\t\\t\\tlsn_groups_per_page;\\n\\n/*----------\\n* We mark a page \\logseq____&quot;most recently used\\logseq____&quot; by setting\\n*\\t\\tpage_lru_count[slotno] = ++cur_lru_count;\\n* The oldest page is therefore the one with the highest value of\\n*\\t\\tcur_lru_count - page_lru_count[slotno]\\n* The counts will eventually wrap around, but this calculation still\\n* works as long as no pagelogseq____&apos;s age exceeds INT_MAX counts.\\n*----------\\n*/\\nint\\t\\t\\tcur_lru_count;\\n} SlruSharedData;\\n```\\n\\n从内存结构上看，是一个数组，每个元素代表一个page。同时，记录这些page的使用次数。\\n\\n```C\\npage_lru_count[slotno] = ++cur_lru_count;\\n```\\n\\n同时每个page，都有状态标识，以在刷脏时，确定脏页。实际上这里没有脏页这个选项，因为只有 `valid` 状态的页才有可能是脏页，有包含关系。故在`SlruSharedData` 中使用 `page_dirty` 进行单独标识。\\n\\n```C\\ntypedef enum\\n{\\nSLRU_PAGE_EMPTY,\\t\\t\\t/* buffer is not in use */\\nSLRU_PAGE_READ_IN_PROGRESS, /* page is being read in */\\nSLRU_PAGE_VALID,\\t\\t\\t/* page is valid and not being written */\\nSLRU_PAGE_WRITE_IN_PROGRESS /* page is being written out */\\n} SlruPageStatus;\\n```\\n关于为什么需要记录LSN信息 `group_lsn`：这与 `WAL` 设计有关。对于 `WAL` 而言，无论是同步提交或是异步提交，都需要在对应的 `buffer page` 落盘前落盘,所以 `slru` 也需要满足这样的规则。同时，可能是为了节约内存（节约的内存实在有限），或是减少`WAL flush`的调用次数以增加 `IO` 效率，`slru`的实现中并不记录每个`buffer page`的 `LSN`，而是记录一组 `page` 的 `LSN`，在刷下一个 `page` 前，需要把一组 `page` 中最大的 `LSN` 前的 `WAL` 落盘。而这样的“一组”的长度，就为`lsn_groups_per_page`logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[117,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[117,logseq____&quot;^Flogseq____&quot;,114,536870923]],[logseq____&quot;^15logseq____&quot;,[117,logseq____&quot;^Xlogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[117,logseq____&quot;^Vlogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[117,logseq____&quot;^Ulogseq____&quot;,28,536870923]],[logseq____&quot;^15logseq____&quot;,[117,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^17logseq____&quot;,5],536870923]],[logseq____&quot;^15logseq____&quot;,[117,logseq____&quot;^Jlogseq____&quot;,[],536870923]],[logseq____&quot;^15logseq____&quot;,[117,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-5ac8-4b0f-a7fd-f93da65bf9e8logseq____&quot;,536870923]],[logseq____&quot;^15logseq____&quot;,[119,logseq____&quot;^Klogseq____&quot;,1703431319942,536870924]],[logseq____&quot;^15logseq____&quot;,[119,logseq____&quot;^@logseq____&quot;,false,536870924]],[logseq____&quot;^15logseq____&quot;,[119,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;65884437-33ff-48c0-b62f-88248615c4cclogseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[119,logseq____&quot;^11logseq____&quot;,logseq____&quot;65884437-33ff-48c0-b62f-88248615c4cclogseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[119,logseq____&quot;^Blogseq____&quot;,1703431319942,536870924]],[logseq____&quot;^15logseq____&quot;,[119,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-45ce-42dc-af16-2506248ea1fflogseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[120,logseq____&quot;^Klogseq____&quot;,1703431319943,536870924]],[logseq____&quot;^15logseq____&quot;,[120,logseq____&quot;^@logseq____&quot;,false,536870924]],[logseq____&quot;^15logseq____&quot;,[120,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;6588436e-0c99-4cd1-b1a7-fbddbfb25eealogseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[120,logseq____&quot;^11logseq____&quot;,logseq____&quot;6588436e-0c99-4cd1-b1a7-fbddbfb25eealogseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[120,logseq____&quot;^Blogseq____&quot;,1703431319943,536870924]],[logseq____&quot;^15logseq____&quot;,[120,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-d851-4f06-98b8-26d2ed70e6e6logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[121,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~`SubTransGetTopmostTransaction`\\nid:: 6587fa8a-d02f-4b70-9995-66f1a0394080logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[121,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[121,logseq____&quot;^Flogseq____&quot;,124,536870924]],[logseq____&quot;^15logseq____&quot;,[121,logseq____&quot;^Xlogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[121,logseq____&quot;^Vlogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[121,logseq____&quot;^Ulogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[121,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^18logseq____&quot;,logseq____&quot;6587fa8a-d02f-4b70-9995-66f1a0394080logseq____&quot;],536870924]],[logseq____&quot;^15logseq____&quot;,[121,logseq____&quot;^Jlogseq____&quot;,[logseq____&quot;^18logseq____&quot;],536870924]],[logseq____&quot;^15logseq____&quot;,[121,logseq____&quot;^4logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^18logseq____&quot;,logseq____&quot;6587fa8a-d02f-4b70-9995-66f1a0394080logseq____&quot;],536870924]],[logseq____&quot;^15logseq____&quot;,[121,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u6587fa8a-d02f-4b70-9995-66f1a0394080logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[122,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;Another point is that is the assert.\\n```C\\nAssert(TransactionIdFollowsOrEquals(xid, TransactionXmin));\\n```\\n`TransactionXmin` is:\\n#+BEGIN_QUOTE\\nthe oldest xmin of any snapshot in use in the current transaction (this is the same as MyProc-logseq____&gt;xmin).\\n#+END_QUOTE\\nSince the parent `xid` of a visible `xid`(from `xmin` or `xmax` of a tuple) is not always record in `subtrans` manager, we must forbid everyone from visiting a `subtrans` record that may not exist.logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[122,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[122,logseq____&quot;^Flogseq____&quot;,140,536870924]],[logseq____&quot;^15logseq____&quot;,[122,logseq____&quot;^Xlogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[122,logseq____&quot;^Vlogseq____&quot;,124,536870924]],[logseq____&quot;^15logseq____&quot;,[122,logseq____&quot;^Ulogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[122,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-aadf-45fc-9566-aa911a31b571logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[123,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;From from `backend/access/transam/subtrans.c`\\n* Tree like structure\\n\\n#+BEGIN_QUOTE\\nThe pg_subtrans manager is a pg_xact-like manager that stores the parent transaction Id for each transaction\\nA main transaction has a parent of InvalidTransactionId, and each subtransaction has its immediate parent. **The tree can easily be walked from child to parent, but not in the opposite direction.**\\n#+END_QUOTE\\n\\n* No restart or crash recovery restore. But this doesnlogseq____&apos;t mean no disk storage, since we still consider that the `slru` buffer may be full.\\n\\n#+BEGIN_QUOTE\\nwe only need to remember pg_subtrans information for currently-open transactions. Thus, there is no need to preserve data over a crash and restart. During database startup, we simply force the currently-active page of SUBTRANS to zeroes.\\n#+END_QUOTElogseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[123,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[123,logseq____&quot;^Flogseq____&quot;,134,536870924]],[logseq____&quot;^15logseq____&quot;,[123,logseq____&quot;^Xlogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[123,logseq____&quot;^Vlogseq____&quot;,134,536870924]],[logseq____&quot;^15logseq____&quot;,[123,logseq____&quot;^Ulogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[123,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-1579-4f54-95d2-cd3edfd89ceblogseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[124,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~`SubTransGetParent`\\nid:: 6587fc49-7103-4bea-80a6-dcdf6d913ecblogseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[124,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[124,logseq____&quot;^Flogseq____&quot;,141,536870924]],[logseq____&quot;^15logseq____&quot;,[124,logseq____&quot;^Xlogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[124,logseq____&quot;^Vlogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[124,logseq____&quot;^Ulogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[124,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^18logseq____&quot;,logseq____&quot;6587fc49-7103-4bea-80a6-dcdf6d913ecblogseq____&quot;],536870924]],[logseq____&quot;^15logseq____&quot;,[124,logseq____&quot;^Jlogseq____&quot;,[logseq____&quot;^18logseq____&quot;],536870924]],[logseq____&quot;^15logseq____&quot;,[124,logseq____&quot;^4logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^18logseq____&quot;,logseq____&quot;6587fc49-7103-4bea-80a6-dcdf6d913ecblogseq____&quot;],536870924]],[logseq____&quot;^15logseq____&quot;,[124,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u6587fc49-7103-4bea-80a6-dcdf6d913ecblogseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[125,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~`StartupSUBTRANS`logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[125,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[125,logseq____&quot;^Flogseq____&quot;,121,536870924]],[logseq____&quot;^15logseq____&quot;,[125,logseq____&quot;^Xlogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[125,logseq____&quot;^Vlogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[125,logseq____&quot;^Ulogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[125,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-db79-4189-9981-5dd0bc1761d3logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[126,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;## backgroundlogseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[126,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[126,logseq____&quot;^Flogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[126,logseq____&quot;^Xlogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[126,logseq____&quot;^Vlogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[126,logseq____&quot;^Ulogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[126,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^17logseq____&quot;,2],536870924]],[logseq____&quot;^15logseq____&quot;,[126,logseq____&quot;^Jlogseq____&quot;,[],536870924]],[logseq____&quot;^15logseq____&quot;,[126,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-61ba-4740-a309-d60b9909ca50logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[127,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;Thinking of [[clog]] , to tell the parent `Xid` of each `Xact`, just store a very large array like:\\n```\\nxid parent_xid[XID_UPPER_LIMIT]\\n```\\nIn clog, two bits are needed to represent the the commit status of a `xid`. Similarly, `sizeof(xid)`(That is 32 bits) is need to represent its parent.logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[127,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[127,logseq____&quot;^Flogseq____&quot;,128,536870924]],[logseq____&quot;^15logseq____&quot;,[127,logseq____&quot;^Xlogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[127,logseq____&quot;^Vlogseq____&quot;,128,536870924]],[logseq____&quot;^15logseq____&quot;,[127,logseq____&quot;^Ulogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[127,logseq____&quot;^Ulogseq____&quot;,30,536870924]],[logseq____&quot;^15logseq____&quot;,[127,logseq____&quot;^Hlogseq____&quot;,30,536870924]],[logseq____&quot;^15logseq____&quot;,[127,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-4146-4063-8b33-47b509a12354logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[128,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;page organizationlogseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[128,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[128,logseq____&quot;^Flogseq____&quot;,134,536870924]],[logseq____&quot;^15logseq____&quot;,[128,logseq____&quot;^Xlogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[128,logseq____&quot;^Vlogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[128,logseq____&quot;^Ulogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[128,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-79e4-4c0f-bea1-fcf4e85bbeb6logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[129,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~`TransactionIdDidCommit`\\nid:: 6588436e-0c99-4cd1-b1a7-fbddbfb25eealogseq____&quot;,536870925]],[logseq____&quot;^15logseq____&quot;,[129,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870925]],[logseq____&quot;^15logseq____&quot;,[129,logseq____&quot;^Flogseq____&quot;,147,536870925]],[logseq____&quot;^15logseq____&quot;,[129,logseq____&quot;^Xlogseq____&quot;,24,536870925]],[logseq____&quot;^15logseq____&quot;,[129,logseq____&quot;^Vlogseq____&quot;,147,536870925]],[logseq____&quot;^15logseq____&quot;,[129,logseq____&quot;^Ulogseq____&quot;,24,536870925]],[logseq____&quot;^15logseq____&quot;,[129,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^18logseq____&quot;,logseq____&quot;6588436e-0c99-4cd1-b1a7-fbddbfb25eealogseq____&quot;],536870925]],[logseq____&quot;^15logseq____&quot;,[129,logseq____&quot;^Jlogseq____&quot;,[logseq____&quot;^18logseq____&quot;],536870925]],[logseq____&quot;^15logseq____&quot;,[129,logseq____&quot;^4logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^18logseq____&quot;,logseq____&quot;6588436e-0c99-4cd1-b1a7-fbddbfb25eealogseq____&quot;],536870925]],[logseq____&quot;^15logseq____&quot;,[129,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u6588436e-0c99-4cd1-b1a7-fbddbfb25eealogseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[130,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;A notable point is that we may encounter page wraparound here\\n```C\\nwhile (startPage != endPage)\\n{\\n\\t(void) ZeroSUBTRANSPage(startPage);\\n\\tstartPage++;\\n\\t/* must account for wraparound */\\n\\tif (startPage logseq____&gt; TransactionIdToPage(MaxTransactionId))\\n\\t\\tstartPage = 0;\\n}\\n```logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[130,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[130,logseq____&quot;^Flogseq____&quot;,132,536870924]],[logseq____&quot;^15logseq____&quot;,[130,logseq____&quot;^Xlogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[130,logseq____&quot;^Vlogseq____&quot;,125,536870924]],[logseq____&quot;^15logseq____&quot;,[130,logseq____&quot;^Ulogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[130,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-19e0-41bd-93b1-b2ef18d90d7elogseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[131,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~`TransactionIdDidAbort`\\nid:: 65884437-33ff-48c0-b62f-88248615c4cclogseq____&quot;,536870925]],[logseq____&quot;^15logseq____&quot;,[131,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870925]],[logseq____&quot;^15logseq____&quot;,[131,logseq____&quot;^Flogseq____&quot;,129,536870925]],[logseq____&quot;^15logseq____&quot;,[131,logseq____&quot;^Xlogseq____&quot;,24,536870925]],[logseq____&quot;^15logseq____&quot;,[131,logseq____&quot;^Vlogseq____&quot;,147,536870925]],[logseq____&quot;^15logseq____&quot;,[131,logseq____&quot;^Ulogseq____&quot;,24,536870925]],[logseq____&quot;^15logseq____&quot;,[131,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^18logseq____&quot;,logseq____&quot;65884437-33ff-48c0-b62f-88248615c4cclogseq____&quot;],536870925]],[logseq____&quot;^15logseq____&quot;,[131,logseq____&quot;^Jlogseq____&quot;,[logseq____&quot;^18logseq____&quot;],536870925]],[logseq____&quot;^15logseq____&quot;,[131,logseq____&quot;^4logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^18logseq____&quot;,logseq____&quot;65884437-33ff-48c0-b62f-88248615c4cclogseq____&quot;],536870925]],[logseq____&quot;^15logseq____&quot;,[131,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884437-33ff-48c0-b62f-88248615c4cclogseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[132,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;Clear all the pages from `oldestActiveXID` to `nextXid`\\n#+BEGIN_QUOTE\\n`oldestActiveXID` is the oldest XID of any prepared transaction, or nextXid if there are none.\\n#+END_QUOTE `oldestActiveXID` islogseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[132,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[132,logseq____&quot;^Flogseq____&quot;,125,536870924]],[logseq____&quot;^15logseq____&quot;,[132,logseq____&quot;^Xlogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[132,logseq____&quot;^Vlogseq____&quot;,125,536870924]],[logseq____&quot;^15logseq____&quot;,[132,logseq____&quot;^Ulogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[132,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-e280-427a-bab6-8fa795b986cdlogseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[133,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;Same as ((6587fc49-7103-4bea-80a6-dcdf6d913ecb))\\n#+BEGIN_QUOTE\\nBecause we cannot look back further than TransactionXmin, it is possible that this function will lie and return an intermediate subtransaction ID. This is OK, because in practice we only care about detecting whether the topmost parent is still running or is part of a current snapshotlogseq____&apos;s list of still-running transactions.\\n#+END_QUOTElogseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[133,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[133,logseq____&quot;^Flogseq____&quot;,121,536870924]],[logseq____&quot;^15logseq____&quot;,[133,logseq____&quot;^Xlogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[133,logseq____&quot;^Vlogseq____&quot;,121,536870924]],[logseq____&quot;^15logseq____&quot;,[133,logseq____&quot;^Ulogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[133,logseq____&quot;^Hlogseq____&quot;,124,536870924]],[logseq____&quot;^15logseq____&quot;,[133,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-2e56-4fe6-9b68-679f3435cb4clogseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[134,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;The main function:logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[134,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[134,logseq____&quot;^Flogseq____&quot;,137,536870924]],[logseq____&quot;^15logseq____&quot;,[134,logseq____&quot;^Xlogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[134,logseq____&quot;^Vlogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[134,logseq____&quot;^Ulogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[134,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-4b62-4598-b57c-80fb129c946blogseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[135,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[135,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[135,logseq____&quot;^Flogseq____&quot;,123,536870924]],[logseq____&quot;^15logseq____&quot;,[135,logseq____&quot;^Xlogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[135,logseq____&quot;^Vlogseq____&quot;,134,536870924]],[logseq____&quot;^15logseq____&quot;,[135,logseq____&quot;^Ulogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[135,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-be1d-42af-acda-1031143fbad8logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[136,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;A notable optimal point is:\\n```C\\nif (*ptr != parent)\\n{\\n\\tAssert(*ptr == InvalidTransactionId);\\n\\t*ptr = parent;\\n\\tSubTransCtl-logseq____&gt;shared-logseq____&gt;page_dirty[slotno] = true;\\n}\\n```\\nIf there is no need to set the parent xid, we can avoid dirtying the buffer.logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[136,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[136,logseq____&quot;^Flogseq____&quot;,141,536870924]],[logseq____&quot;^15logseq____&quot;,[136,logseq____&quot;^Xlogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[136,logseq____&quot;^Vlogseq____&quot;,141,536870924]],[logseq____&quot;^15logseq____&quot;,[136,logseq____&quot;^Ulogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[136,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-cd91-4c64-ae8e-c761945969calogseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[137,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;## high level viewlogseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[137,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[137,logseq____&quot;^Flogseq____&quot;,138,536870924]],[logseq____&quot;^15logseq____&quot;,[137,logseq____&quot;^Xlogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[137,logseq____&quot;^Vlogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[137,logseq____&quot;^Ulogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[137,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^17logseq____&quot;,2],536870924]],[logseq____&quot;^15logseq____&quot;,[137,logseq____&quot;^Jlogseq____&quot;,[],536870924]],[logseq____&quot;^15logseq____&quot;,[137,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-3930-4ba4-b85f-27daaa1bfb88logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[138,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;From [Official introduction ot Subtransactions](https://www.postgresql.org/docs/current/subxacts.html)\\n#+BEGIN_QUOTE\\nSubtransactions are started inside transactions, allowing large transactions to be broken into smaller units. Subtransactions can commit or abort without affecting their parent transactions, allowing parent transactions to continue. This allows errors to be handled more easily, which is a common application development pattern. The word subtransaction is often abbreviated as **subxact**.\\n#+END_QUOTElogseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[138,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[138,logseq____&quot;^Flogseq____&quot;,126,536870924]],[logseq____&quot;^15logseq____&quot;,[138,logseq____&quot;^Xlogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[138,logseq____&quot;^Vlogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[138,logseq____&quot;^Ulogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[138,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-6921-4ae7-be57-8f10b1ca7cc7logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[139,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;## lower level designlogseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[139,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[139,logseq____&quot;^Flogseq____&quot;,128,536870924]],[logseq____&quot;^15logseq____&quot;,[139,logseq____&quot;^Xlogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[139,logseq____&quot;^Vlogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[139,logseq____&quot;^Ulogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[139,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^17logseq____&quot;,2],536870924]],[logseq____&quot;^15logseq____&quot;,[139,logseq____&quot;^Jlogseq____&quot;,[],536870924]],[logseq____&quot;^15logseq____&quot;,[139,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-f8ae-40b6-b334-13ceea6ce52elogseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[140,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;A notable point is that not all meaningful `xid` are in current manger\\n```\\n/* Bootstrap and frozen XIDs have no parent */\\nif (!TransactionIdIsNormal(xid))\\n\\treturn InvalidTransactionId;\\n```logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[140,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[140,logseq____&quot;^Flogseq____&quot;,124,536870924]],[logseq____&quot;^15logseq____&quot;,[140,logseq____&quot;^Xlogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[140,logseq____&quot;^Vlogseq____&quot;,124,536870924]],[logseq____&quot;^15logseq____&quot;,[140,logseq____&quot;^Ulogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[140,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-ccc9-4686-b5dc-e516134fb917logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[141,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~`SubTransSetParent`logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[141,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[141,logseq____&quot;^Flogseq____&quot;,139,536870924]],[logseq____&quot;^15logseq____&quot;,[141,logseq____&quot;^Xlogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[141,logseq____&quot;^Vlogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[141,logseq____&quot;^Ulogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[141,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-2b2d-43f7-bdb8-5d1b78709da3logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[142,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;So all the three callers of this function always verify the input value:\\n\\n1. {{embed ((6588436e-0c99-4cd1-b1a7-fbddbfb25eea))}}\\n2. {{embed ((65884437-33ff-48c0-b62f-88248615c4cc))}}\\n3. ((6587fa8a-d02f-4b70-9995-66f1a0394080)) Just belowlogseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[142,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[142,logseq____&quot;^Flogseq____&quot;,122,536870924]],[logseq____&quot;^15logseq____&quot;,[142,logseq____&quot;^Slogseq____&quot;,143,536870924]],[logseq____&quot;^15logseq____&quot;,[142,logseq____&quot;^Slogseq____&quot;,144,536870924]],[logseq____&quot;^15logseq____&quot;,[142,logseq____&quot;^Xlogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[142,logseq____&quot;^Vlogseq____&quot;,122,536870924]],[logseq____&quot;^15logseq____&quot;,[142,logseq____&quot;^Ulogseq____&quot;,29,536870924]],[logseq____&quot;^15logseq____&quot;,[142,logseq____&quot;^Ulogseq____&quot;,119,536870924]],[logseq____&quot;^15logseq____&quot;,[142,logseq____&quot;^Ulogseq____&quot;,120,536870924]],[logseq____&quot;^15logseq____&quot;,[142,logseq____&quot;^Hlogseq____&quot;,119,536870924]],[logseq____&quot;^15logseq____&quot;,[142,logseq____&quot;^Hlogseq____&quot;,120,536870924]],[logseq____&quot;^15logseq____&quot;,[142,logseq____&quot;^Hlogseq____&quot;,121,536870924]],[logseq____&quot;^15logseq____&quot;,[142,logseq____&quot;^Hlogseq____&quot;,129,536870924]],[logseq____&quot;^15logseq____&quot;,[142,logseq____&quot;^Hlogseq____&quot;,131,536870924]],[logseq____&quot;^15logseq____&quot;,[142,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-1daa-4ab6-826d-95610059c49dlogseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[143,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^19logseq____&quot;,logseq____&quot;embedlogseq____&quot;,logseq____&quot;^1:logseq____&quot;,[logseq____&quot;((6588436e-0c99-4cd1-b1a7-fbddbfb25eea))logseq____&quot;]],536870924]],[logseq____&quot;^15logseq____&quot;,[143,logseq____&quot;^Wlogseq____&quot;,logseq____&quot;macrologseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[143,logseq____&quot;^Tlogseq____&quot;,logseq____&quot;embed ((6588436e-0c99-4cd1-b1a7-fbddbfb25eea))logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[144,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^19logseq____&quot;,logseq____&quot;embedlogseq____&quot;,logseq____&quot;^1:logseq____&quot;,[logseq____&quot;((65884437-33ff-48c0-b62f-88248615c4cc))logseq____&quot;]],536870924]],[logseq____&quot;^15logseq____&quot;,[144,logseq____&quot;^Wlogseq____&quot;,logseq____&quot;macrologseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[144,logseq____&quot;^Tlogseq____&quot;,logseq____&quot;embed ((65884437-33ff-48c0-b62f-88248615c4cc))logseq____&quot;,536870924]],[logseq____&quot;^15logseq____&quot;,[146,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;This is the commit log interface routines.logseq____&quot;,536870925]],[logseq____&quot;^15logseq____&quot;,[146,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870925]],[logseq____&quot;^15logseq____&quot;,[146,logseq____&quot;^Flogseq____&quot;,24,536870925]],[logseq____&quot;^15logseq____&quot;,[146,logseq____&quot;^Xlogseq____&quot;,24,536870925]],[logseq____&quot;^15logseq____&quot;,[146,logseq____&quot;^Vlogseq____&quot;,24,536870925]],[logseq____&quot;^15logseq____&quot;,[146,logseq____&quot;^Ulogseq____&quot;,24,536870925]],[logseq____&quot;^15logseq____&quot;,[146,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-9c1e-45b6-973e-11bf2f532fdblogseq____&quot;,536870925]],[logseq____&quot;^15logseq____&quot;,[147,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;## low level designlogseq____&quot;,536870925]],[logseq____&quot;^15logseq____&quot;,[147,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870925]],[logseq____&quot;^15logseq____&quot;,[147,logseq____&quot;^Flogseq____&quot;,146,536870925]],[logseq____&quot;^15logseq____&quot;,[147,logseq____&quot;^Xlogseq____&quot;,24,536870925]],[logseq____&quot;^15logseq____&quot;,[147,logseq____&quot;^Vlogseq____&quot;,24,536870925]],[logseq____&quot;^15logseq____&quot;,[147,logseq____&quot;^Ulogseq____&quot;,24,536870925]],[logseq____&quot;^15logseq____&quot;,[147,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^17logseq____&quot;,2],536870925]],[logseq____&quot;^15logseq____&quot;,[147,logseq____&quot;^Jlogseq____&quot;,[],536870925]],[logseq____&quot;^15logseq____&quot;,[147,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-dadd-4c3b-b239-6053297bfe8elogseq____&quot;,536870925]],[logseq____&quot;^15logseq____&quot;,[148,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;A notable point is to call ((6587fc49-7103-4bea-80a6-dcdf6d913ecb))\\nid:: 65884378-6b98-44b0-bd8f-e695abb68ca3\\n```C\\nif (TransactionIdPrecedes(transactionId, TransactionXmin))\\n\\treturn false;\\nparentXid = SubTransGetParent(transactionId);\\n```\\nMust verify that `transactionId` logically is less than `TransactionXmin` first.logseq____&quot;,536870925]],[logseq____&quot;^15logseq____&quot;,[148,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870925]],[logseq____&quot;^15logseq____&quot;,[148,logseq____&quot;^Flogseq____&quot;,129,536870925]],[logseq____&quot;^15logseq____&quot;,[148,logseq____&quot;^Xlogseq____&quot;,24,536870925]],[logseq____&quot;^15logseq____&quot;,[148,logseq____&quot;^Vlogseq____&quot;,129,536870925]],[logseq____&quot;^15logseq____&quot;,[148,logseq____&quot;^Ulogseq____&quot;,24,536870925]],[logseq____&quot;^15logseq____&quot;,[148,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^18logseq____&quot;,logseq____&quot;65884378-6b98-44b0-bd8f-e695abb68ca3logseq____&quot;],536870925]],[logseq____&quot;^15logseq____&quot;,[148,logseq____&quot;^Jlogseq____&quot;,[logseq____&quot;^18logseq____&quot;],536870925]],[logseq____&quot;^15logseq____&quot;,[148,logseq____&quot;^4logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^18logseq____&quot;,logseq____&quot;65884378-6b98-44b0-bd8f-e695abb68ca3logseq____&quot;],536870925]],[logseq____&quot;^15logseq____&quot;,[148,logseq____&quot;^Hlogseq____&quot;,124,536870925]],[logseq____&quot;^15logseq____&quot;,[148,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884378-6b98-44b0-bd8f-e695abb68ca3logseq____&quot;,536870925]],[logseq____&quot;^15logseq____&quot;,[149,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;A notable point is to call ((6587fc49-7103-4bea-80a6-dcdf6d913ecb))\\n```C\\nif (TransactionIdPrecedes(transactionId, TransactionXmin))\\n\\treturn true;\\nparentXid = SubTransGetParent(transactionId);\\n```\\nMust verify that `transactionId` logically is less than `TransactionXmin` first.logseq____&quot;,536870925]],[logseq____&quot;^15logseq____&quot;,[149,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870925]],[logseq____&quot;^15logseq____&quot;,[149,logseq____&quot;^Flogseq____&quot;,131,536870925]],[logseq____&quot;^15logseq____&quot;,[149,logseq____&quot;^Xlogseq____&quot;,24,536870925]],[logseq____&quot;^15logseq____&quot;,[149,logseq____&quot;^Vlogseq____&quot;,131,536870925]],[logseq____&quot;^15logseq____&quot;,[149,logseq____&quot;^Ulogseq____&quot;,24,536870925]],[logseq____&quot;^15logseq____&quot;,[149,logseq____&quot;^Hlogseq____&quot;,124,536870925]],[logseq____&quot;^15logseq____&quot;,[149,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-965c-454f-88eb-d771ce9cd0f2logseq____&quot;,536870925]],[logseq____&quot;^15logseq____&quot;,[151,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;Data written to unlogged tables is **not written to the write-ahead log** which makes them considerably **faster** than ordinary tables. However, they are **not crash-safe**: an unlogged **table is automatically truncated** after a crash or unclean shutdown. The contents of an unlogged table are also **not replicated to standby servers**. Any indexes created on an unlogged table are automatically unlogged as well.logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[151,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[151,logseq____&quot;^Flogseq____&quot;,87,536870926]],[logseq____&quot;^15logseq____&quot;,[151,logseq____&quot;^Xlogseq____&quot;,87,536870926]],[logseq____&quot;^15logseq____&quot;,[151,logseq____&quot;^Vlogseq____&quot;,87,536870926]],[logseq____&quot;^15logseq____&quot;,[151,logseq____&quot;^Ulogseq____&quot;,87,536870926]],[logseq____&quot;^15logseq____&quot;,[151,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-6f76-4241-9658-b8b9e0248ee8logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[152,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;If this is specified, any sequences created together with the unlogged table (for identity or serial columns) are also created as unlogged.logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[152,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[152,logseq____&quot;^Flogseq____&quot;,151,536870926]],[logseq____&quot;^15logseq____&quot;,[152,logseq____&quot;^Xlogseq____&quot;,87,536870926]],[logseq____&quot;^15logseq____&quot;,[152,logseq____&quot;^Vlogseq____&quot;,87,536870926]],[logseq____&quot;^15logseq____&quot;,[152,logseq____&quot;^Ulogseq____&quot;,87,536870926]],[logseq____&quot;^15logseq____&quot;,[152,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-0f0f-456e-b994-8d660839e665logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[153,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;Data written to unlogged tables is not written to the write-ahead log (see [Chapter 30](https://www.postgresql.org/docs/current/wal.html)), which makes them considerably faster than ordinary tables. However, they are not crash-safe: an unlogged table is automatically truncated after a crash or unclean shutdown. The contents of an unlogged table are also not replicated to standby servers. Any indexes created on an unlogged table are automatically unlogged as well.logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[153,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[153,logseq____&quot;^Flogseq____&quot;,152,536870926]],[logseq____&quot;^15logseq____&quot;,[153,logseq____&quot;^Xlogseq____&quot;,87,536870926]],[logseq____&quot;^15logseq____&quot;,[153,logseq____&quot;^Vlogseq____&quot;,87,536870926]],[logseq____&quot;^15logseq____&quot;,[153,logseq____&quot;^Ulogseq____&quot;,87,536870926]],[logseq____&quot;^15logseq____&quot;,[153,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-d227-4d8b-9e67-a67ad697ca58logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[154,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;If this is specified, any sequences created together with the unlogged table (for identity or serial columns) are also created as unlogged.logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[154,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[154,logseq____&quot;^Flogseq____&quot;,153,536870926]],[logseq____&quot;^15logseq____&quot;,[154,logseq____&quot;^Xlogseq____&quot;,87,536870926]],[logseq____&quot;^15logseq____&quot;,[154,logseq____&quot;^Vlogseq____&quot;,87,536870926]],[logseq____&quot;^15logseq____&quot;,[154,logseq____&quot;^Ulogseq____&quot;,87,536870926]],[logseq____&quot;^15logseq____&quot;,[154,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c97-87cd-41c3-bbff-a07cd5feb0ealogseq____&quot;,536870926]],[logseq____&quot;^15logseq____&quot;,[156,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;1. 必须在WAL日志写入前完成（TODO，为什么？`SyncOneBuffer`）logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[156,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[156,logseq____&quot;^Flogseq____&quot;,174,536870927]],[logseq____&quot;^15logseq____&quot;,[156,logseq____&quot;^Xlogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[156,logseq____&quot;^Vlogseq____&quot;,174,536870927]],[logseq____&quot;^15logseq____&quot;,[156,logseq____&quot;^Ulogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[156,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c98-2031-44a0-b317-64423c1d799dlogseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[157,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;5. 使用`XLogBeginInsert` 和 `XLogRegister*` 函数构建WAL，使用返回的`LSN`来更新`page`logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[157,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[157,logseq____&quot;^Flogseq____&quot;,174,536870927]],[logseq____&quot;^15logseq____&quot;,[157,logseq____&quot;^Xlogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[157,logseq____&quot;^Vlogseq____&quot;,170,536870927]],[logseq____&quot;^15logseq____&quot;,[157,logseq____&quot;^Ulogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[157,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c98-aa16-443b-b561-d49381f6337flogseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[158,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;回放第（1）个日志：\\n* 分配一个新页，将元组移动进去\\n* 设置标记位，表示上一层的页没有更新logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[158,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[158,logseq____&quot;^Flogseq____&quot;,163,536870927]],[logseq____&quot;^15logseq____&quot;,[158,logseq____&quot;^Xlogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[158,logseq____&quot;^Vlogseq____&quot;,171,536870927]],[logseq____&quot;^15logseq____&quot;,[158,logseq____&quot;^Ulogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[158,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c98-5da9-4bc0-892c-41fab4afe6b7logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[159,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;基本思想:logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[159,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[159,logseq____&quot;^Flogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[159,logseq____&quot;^Xlogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[159,logseq____&quot;^Vlogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[159,logseq____&quot;^Ulogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[159,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c98-b5d7-4a26-8c80-1d4f0f51cc36logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[160,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;2. 只有在要写WAL时，才能标记脏页（TODO，为什么？）logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[160,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[160,logseq____&quot;^Flogseq____&quot;,156,536870927]],[logseq____&quot;^15logseq____&quot;,[160,logseq____&quot;^Xlogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[160,logseq____&quot;^Vlogseq____&quot;,174,536870927]],[logseq____&quot;^15logseq____&quot;,[160,logseq____&quot;^Ulogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[160,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c98-2be6-49a1-bf24-486dbbc72aeflogseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[161,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;仅在写下第（2）个日志前，数据库恰好崩溃，标志位才会被感知。\\n* (该标志位应该没有MVCC，否则会在事务层屏蔽）#TODO\\n* 搜索时，不管这个中间状态\\n* 插入时，如果发现这个中间状态，先在上一层的页插入对应key，以修复这个“崩溃”状态，再继续插入logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[161,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[161,logseq____&quot;^Flogseq____&quot;,167,536870927]],[logseq____&quot;^15logseq____&quot;,[161,logseq____&quot;^Xlogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[161,logseq____&quot;^Vlogseq____&quot;,171,536870927]],[logseq____&quot;^15logseq____&quot;,[161,logseq____&quot;^Ulogseq____&quot;,4,536870927]],[logseq____&quot;^15logseq____&quot;,[161,logseq____&quot;^Ulogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[161,logseq____&quot;^Hlogseq____&quot;,4,536870927]],[logseq____&quot;^15logseq____&quot;,[161,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c98-620e-4f7a-b8d8-a8e2c5f5d503logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[162,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;自洽(self-consistent)logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[162,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[162,logseq____&quot;^Flogseq____&quot;,170,536870927]],[logseq____&quot;^15logseq____&quot;,[162,logseq____&quot;^Xlogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[162,logseq____&quot;^Vlogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[162,logseq____&quot;^Ulogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[162,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c98-1372-4903-a763-4898231e1189logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[163,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;但是因为锁，这会形成两个独立的WAL日志。在回放WAL日志时：logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[163,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[163,logseq____&quot;^Flogseq____&quot;,171,536870927]],[logseq____&quot;^15logseq____&quot;,[163,logseq____&quot;^Xlogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[163,logseq____&quot;^Vlogseq____&quot;,171,536870927]],[logseq____&quot;^15logseq____&quot;,[163,logseq____&quot;^Ulogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[163,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c98-f9b9-46fe-92ba-ee02b1bd451clogseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[164,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;一些复杂的操作，需要原子地写下一串WAL记录，但中间状态必须自洽(self-consistent)。这样在回放wal日志时，如果中断，系统还能够正常运行。注意：此时相当于事务回滚，但是其部分更改已经落盘。举例：logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[164,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[164,logseq____&quot;^Flogseq____&quot;,162,536870927]],[logseq____&quot;^15logseq____&quot;,[164,logseq____&quot;^Xlogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[164,logseq____&quot;^Vlogseq____&quot;,162,536870927]],[logseq____&quot;^15logseq____&quot;,[164,logseq____&quot;^Ulogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[164,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c98-880b-4345-830b-f5f8d91c1627logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[165,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;7. 解锁和unpin （注意顺序）logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[165,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[165,logseq____&quot;^Flogseq____&quot;,172,536870927]],[logseq____&quot;^15logseq____&quot;,[165,logseq____&quot;^Xlogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[165,logseq____&quot;^Vlogseq____&quot;,170,536870927]],[logseq____&quot;^15logseq____&quot;,[165,logseq____&quot;^Ulogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[165,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c98-eabd-49fd-9245-a03db4cdd792logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[166,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;1. pin and exclusive-lock the shared bufferlogseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[166,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[166,logseq____&quot;^Flogseq____&quot;,170,536870927]],[logseq____&quot;^15logseq____&quot;,[166,logseq____&quot;^Xlogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[166,logseq____&quot;^Vlogseq____&quot;,170,536870927]],[logseq____&quot;^15logseq____&quot;,[166,logseq____&quot;^Ulogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[166,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c98-102a-49d1-912d-017e656ae0celogseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[167,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;标志位通常情况下不可见，因为对 child page 的修改时持有的锁，在两个操作完成后才会释放。logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[167,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[167,logseq____&quot;^Flogseq____&quot;,175,536870927]],[logseq____&quot;^15logseq____&quot;,[167,logseq____&quot;^Xlogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[167,logseq____&quot;^Vlogseq____&quot;,171,536870927]],[logseq____&quot;^15logseq____&quot;,[167,logseq____&quot;^Ulogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[167,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c98-65df-4b5a-8fd5-4a698a0e595dlogseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[168,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~`LSN`：刷脏前检查`LSN`对应的日志已经落盘。\\n优势\\n  1. 仅在必要的时候等待`XLOG`的`IO`。（异步`IO`）\\n  2. `LSN`的检查模块只用在 buffer manager 中实现\\n  3. 在WAL回放时，避免相同的日志被重复回放（可重入）。（TODO：full page write是否在另一个层面上保证了可重入）logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[168,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[168,logseq____&quot;^Flogseq____&quot;,159,536870927]],[logseq____&quot;^15logseq____&quot;,[168,logseq____&quot;^Xlogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[168,logseq____&quot;^Vlogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[168,logseq____&quot;^Ulogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[168,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c98-c4c6-42f0-9996-18ac6275590dlogseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[169,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;日志在数据页前落盘 #wallogseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[169,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[169,logseq____&quot;^Flogseq____&quot;,159,536870927]],[logseq____&quot;^15logseq____&quot;,[169,logseq____&quot;^Xlogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[169,logseq____&quot;^Vlogseq____&quot;,159,536870927]],[logseq____&quot;^15logseq____&quot;,[169,logseq____&quot;^Ulogseq____&quot;,25,536870927]],[logseq____&quot;^15logseq____&quot;,[169,logseq____&quot;^Ulogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[169,logseq____&quot;^Hlogseq____&quot;,25,536870927]],[logseq____&quot;^15logseq____&quot;,[169,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c98-0222-42d5-8aa7-c7ac637e6bf9logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[170,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;3. 写下WAL日志的逻辑为logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[170,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[170,logseq____&quot;^Flogseq____&quot;,173,536870927]],[logseq____&quot;^15logseq____&quot;,[170,logseq____&quot;^Xlogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[170,logseq____&quot;^Vlogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[170,logseq____&quot;^Ulogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[170,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c98-e55e-4f48-aab2-3a4bd314feaelogseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[171,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;在btree索引中，页的分裂分为两步（1）分配一个新页（2）在上一层的页(parent page)中新插入一条数据。logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[171,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[171,logseq____&quot;^Flogseq____&quot;,164,536870927]],[logseq____&quot;^15logseq____&quot;,[171,logseq____&quot;^Xlogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[171,logseq____&quot;^Vlogseq____&quot;,162,536870927]],[logseq____&quot;^15logseq____&quot;,[171,logseq____&quot;^Ulogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[171,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c98-33fe-46e3-81f5-a7bbcb642238logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[172,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;6. END_CRIT_SECTION，退出logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[172,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[172,logseq____&quot;^Flogseq____&quot;,157,536870927]],[logseq____&quot;^15logseq____&quot;,[172,logseq____&quot;^Xlogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[172,logseq____&quot;^Vlogseq____&quot;,170,536870927]],[logseq____&quot;^15logseq____&quot;,[172,logseq____&quot;^Ulogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[172,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c98-de2a-438e-95f1-8aea213c91belogseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[173,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;WAL 包含一个（或一小组）页的**增量更新**的重做信息。\\n  1. 依赖文件系统和硬件的原子写，不可靠！\\n  2. checkpoint，checkpointer后的第一次写全页。通过 checkpoint 留下的 `LSN ` 来判断是否为第一次写logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[173,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[173,logseq____&quot;^Flogseq____&quot;,168,536870927]],[logseq____&quot;^15logseq____&quot;,[173,logseq____&quot;^Xlogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[173,logseq____&quot;^Vlogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[173,logseq____&quot;^Ulogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[173,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c98-32e5-48d8-9561-1497b39e240alogseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[174,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;4. 标记为脏页，logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[174,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[174,logseq____&quot;^Flogseq____&quot;,177,536870927]],[logseq____&quot;^15logseq____&quot;,[174,logseq____&quot;^Xlogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[174,logseq____&quot;^Vlogseq____&quot;,170,536870927]],[logseq____&quot;^15logseq____&quot;,[174,logseq____&quot;^Ulogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[174,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c98-68d4-4d74-ab99-1719cbad8c6flogseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[175,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;回放第（2）个日志：\\n* 在上一层的页中新插入一条数据\\n* 清除第（1）个日志中的标记位logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[175,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[175,logseq____&quot;^Flogseq____&quot;,158,536870927]],[logseq____&quot;^15logseq____&quot;,[175,logseq____&quot;^Xlogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[175,logseq____&quot;^Vlogseq____&quot;,171,536870927]],[logseq____&quot;^15logseq____&quot;,[175,logseq____&quot;^Ulogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[175,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c98-6a50-46c8-ac92-4d78fe4edde4logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[176,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;2. START_CRIT_SECTION，发生错误时确保整个数据库能立即重启logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[176,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[176,logseq____&quot;^Flogseq____&quot;,166,536870927]],[logseq____&quot;^15logseq____&quot;,[176,logseq____&quot;^Xlogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[176,logseq____&quot;^Vlogseq____&quot;,170,536870927]],[logseq____&quot;^15logseq____&quot;,[176,logseq____&quot;^Ulogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[176,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c98-b606-4079-991d-fae98a356b63logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[177,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;3. 在shared buffer上，进行对应的修改logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[177,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[177,logseq____&quot;^Flogseq____&quot;,176,536870927]],[logseq____&quot;^15logseq____&quot;,[177,logseq____&quot;^Xlogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[177,logseq____&quot;^Vlogseq____&quot;,170,536870927]],[logseq____&quot;^15logseq____&quot;,[177,logseq____&quot;^Ulogseq____&quot;,27,536870927]],[logseq____&quot;^15logseq____&quot;,[177,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c98-b42c-477a-88f5-d0220b80403dlogseq____&quot;,536870927]],[logseq____&quot;^15logseq____&quot;,[179,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;## XLogRegisterBufDatalogseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[179,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[179,logseq____&quot;^Flogseq____&quot;,188,536870928]],[logseq____&quot;^15logseq____&quot;,[179,logseq____&quot;^Xlogseq____&quot;,26,536870928]],[logseq____&quot;^15logseq____&quot;,[179,logseq____&quot;^Vlogseq____&quot;,26,536870928]],[logseq____&quot;^15logseq____&quot;,[179,logseq____&quot;^Ulogseq____&quot;,26,536870928]],[logseq____&quot;^15logseq____&quot;,[179,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^17logseq____&quot;,2],536870928]],[logseq____&quot;^15logseq____&quot;,[179,logseq____&quot;^Jlogseq____&quot;,[],536870928]],[logseq____&quot;^15logseq____&quot;,[179,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c98-2f68-4d27-bdeb-7715619b938flogseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[180,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;value we need from parameterslogseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[180,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[180,logseq____&quot;^Flogseq____&quot;,186,536870928]],[logseq____&quot;^15logseq____&quot;,[180,logseq____&quot;^Xlogseq____&quot;,26,536870928]],[logseq____&quot;^15logseq____&quot;,[180,logseq____&quot;^Vlogseq____&quot;,182,536870928]],[logseq____&quot;^15logseq____&quot;,[180,logseq____&quot;^Ulogseq____&quot;,26,536870928]],[logseq____&quot;^15logseq____&quot;,[180,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c98-a059-4e56-ac4c-64f38f4ba80clogseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[181,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;add record to the main chunklogseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[181,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[181,logseq____&quot;^Flogseq____&quot;,188,536870928]],[logseq____&quot;^15logseq____&quot;,[181,logseq____&quot;^Xlogseq____&quot;,26,536870928]],[logseq____&quot;^15logseq____&quot;,[181,logseq____&quot;^Vlogseq____&quot;,188,536870928]],[logseq____&quot;^15logseq____&quot;,[181,logseq____&quot;^Ulogseq____&quot;,26,536870928]],[logseq____&quot;^15logseq____&quot;,[181,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c98-e03c-46f6-bd03-e751890ebf76logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[182,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;## XLogRegisterBlocklogseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[182,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[182,logseq____&quot;^Flogseq____&quot;,185,536870928]],[logseq____&quot;^15logseq____&quot;,[182,logseq____&quot;^Xlogseq____&quot;,26,536870928]],[logseq____&quot;^15logseq____&quot;,[182,logseq____&quot;^Vlogseq____&quot;,26,536870928]],[logseq____&quot;^15logseq____&quot;,[182,logseq____&quot;^Ulogseq____&quot;,26,536870928]],[logseq____&quot;^15logseq____&quot;,[182,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^17logseq____&quot;,2],536870928]],[logseq____&quot;^15logseq____&quot;,[182,logseq____&quot;^Jlogseq____&quot;,[],536870928]],[logseq____&quot;^15logseq____&quot;,[182,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c98-ee77-4ddd-ac4f-8e5297ca59c0logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[183,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~```\\nXLogRegisterData\\nrdata = logseq____&amp;rdatas[num_rdatas++];\\nrdata-logseq____&gt;data = data;\\nrdata-logseq____&gt;len = len;\\nmainrdata_last-logseq____&gt;next = rdata;\\nmainrdata_last = rdata;\\nmainrdata_len += len;\\n```logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[183,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[183,logseq____&quot;^Flogseq____&quot;,181,536870928]],[logseq____&quot;^15logseq____&quot;,[183,logseq____&quot;^Xlogseq____&quot;,26,536870928]],[logseq____&quot;^15logseq____&quot;,[183,logseq____&quot;^Vlogseq____&quot;,188,536870928]],[logseq____&quot;^15logseq____&quot;,[183,logseq____&quot;^Ulogseq____&quot;,26,536870928]],[logseq____&quot;^15logseq____&quot;,[183,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c98-c71e-45e4-b570-8c8986a3d663logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[184,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~```\\nXLogRegisterBuffer\\n  regbuf = logseq____&amp;registered_buffers[block_id];\\n  BufferGetTag(buffer, logseq____&amp;regbuf-logseq____&gt;rlocator, logseq____&amp;regbuf-logseq____&gt;forkno, regbuf-logseq____&gt;block);\\n  regbuf-logseq____&gt;page = BufferGetPage(buffer);\\n  regbuf-logseq____&gt;flags = flags;\\n  regbuf-logseq____&gt;rdata_tail = (XLogRecData *) logseq____&amp;regbuf-logseq____&gt;rdata_head;\\n  regbuf-logseq____&gt;rdata_len = 0;\\n  gbuf-logseq____&gt;rdata_tail = (XLogRecData *) logseq____&amp;regbuf-logseq____&gt;rdata_head;\\n  regbuf-logseq____&gt;rdata_len = 0;\\n```logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[184,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[184,logseq____&quot;^Flogseq____&quot;,191,536870928]],[logseq____&quot;^15logseq____&quot;,[184,logseq____&quot;^Xlogseq____&quot;,26,536870928]],[logseq____&quot;^15logseq____&quot;,[184,logseq____&quot;^Vlogseq____&quot;,185,536870928]],[logseq____&quot;^15logseq____&quot;,[184,logseq____&quot;^Ulogseq____&quot;,25,536870928]],[logseq____&quot;^15logseq____&quot;,[184,logseq____&quot;^Ulogseq____&quot;,26,536870928]],[logseq____&quot;^15logseq____&quot;,[184,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c98-1a6d-439e-bf4c-2e25ad446dcelogseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[185,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;## XLogRegisterBuffer #wallogseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[185,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[185,logseq____&quot;^Flogseq____&quot;,190,536870928]],[logseq____&quot;^15logseq____&quot;,[185,logseq____&quot;^Xlogseq____&quot;,26,536870928]],[logseq____&quot;^15logseq____&quot;,[185,logseq____&quot;^Vlogseq____&quot;,26,536870928]],[logseq____&quot;^15logseq____&quot;,[185,logseq____&quot;^Ulogseq____&quot;,25,536870928]],[logseq____&quot;^15logseq____&quot;,[185,logseq____&quot;^Ulogseq____&quot;,26,536870928]],[logseq____&quot;^15logseq____&quot;,[185,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^17logseq____&quot;,2],536870928]],[logseq____&quot;^15logseq____&quot;,[185,logseq____&quot;^Jlogseq____&quot;,[],536870928]],[logseq____&quot;^15logseq____&quot;,[185,logseq____&quot;^Hlogseq____&quot;,25,536870928]],[logseq____&quot;^15logseq____&quot;,[185,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c98-6aee-4e9d-8fde-2fdeb6700f9flogseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[186,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~```\\nvoid\\nXLogRegisterBlock(uint8 block_id, RelFileLocator *rlocator, ForkNumberforknum,\\n                  BlockNumber blknum, Page page, uint8 flags)\\n```logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[186,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[186,logseq____&quot;^Flogseq____&quot;,182,536870928]],[logseq____&quot;^15logseq____&quot;,[186,logseq____&quot;^Xlogseq____&quot;,26,536870928]],[logseq____&quot;^15logseq____&quot;,[186,logseq____&quot;^Vlogseq____&quot;,182,536870928]],[logseq____&quot;^15logseq____&quot;,[186,logseq____&quot;^Ulogseq____&quot;,26,536870928]],[logseq____&quot;^15logseq____&quot;,[186,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c98-0c62-4b19-b84c-244fe0ab3ba0logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[187,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~```\\nXLogRegisterBufData\\n  regbuf = logseq____&amp;registered_buffers[block_id];\\n  rdata = logseq____&amp;rdatas[num_rdatas++];\\n\\n  rdata-logseq____&gt;data = data;\\n  rdata-logseq____&gt;len = len;\\n\\n  regbuf-logseq____&gt;rdata_tail-logseq____&gt;next = rdata;\\n  regbuf-logseq____&gt;rdata_tail = rdata;\\n  regbuf-logseq____&gt;rdata_len += len;\\n```logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[187,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[187,logseq____&quot;^Flogseq____&quot;,189,536870928]],[logseq____&quot;^15logseq____&quot;,[187,logseq____&quot;^Xlogseq____&quot;,26,536870928]],[logseq____&quot;^15logseq____&quot;,[187,logseq____&quot;^Vlogseq____&quot;,179,536870928]],[logseq____&quot;^15logseq____&quot;,[187,logseq____&quot;^Ulogseq____&quot;,26,536870928]],[logseq____&quot;^15logseq____&quot;,[187,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c98-1437-4874-8306-bdc3823a321clogseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[188,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;## XLogRegisterDatalogseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[188,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[188,logseq____&quot;^Flogseq____&quot;,182,536870928]],[logseq____&quot;^15logseq____&quot;,[188,logseq____&quot;^Xlogseq____&quot;,26,536870928]],[logseq____&quot;^15logseq____&quot;,[188,logseq____&quot;^Vlogseq____&quot;,26,536870928]],[logseq____&quot;^15logseq____&quot;,[188,logseq____&quot;^Ulogseq____&quot;,26,536870928]],[logseq____&quot;^15logseq____&quot;,[188,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^17logseq____&quot;,2],536870928]],[logseq____&quot;^15logseq____&quot;,[188,logseq____&quot;^Jlogseq____&quot;,[],536870928]],[logseq____&quot;^15logseq____&quot;,[188,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c98-a291-4304-9c0a-f57056a71abblogseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[189,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;like `XLogRegisterData` but register with thespecific bufferlogseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[189,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[189,logseq____&quot;^Flogseq____&quot;,179,536870928]],[logseq____&quot;^15logseq____&quot;,[189,logseq____&quot;^Xlogseq____&quot;,26,536870928]],[logseq____&quot;^15logseq____&quot;,[189,logseq____&quot;^Vlogseq____&quot;,179,536870928]],[logseq____&quot;^15logseq____&quot;,[189,logseq____&quot;^Ulogseq____&quot;,26,536870928]],[logseq____&quot;^15logseq____&quot;,[189,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c98-e0cf-45ff-a8f4-7d9794aaad70logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[190,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;![🖼 wal-record-structure.png](../assets/wal-record-structure.png)logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[190,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[190,logseq____&quot;^Flogseq____&quot;,26,536870928]],[logseq____&quot;^15logseq____&quot;,[190,logseq____&quot;^Xlogseq____&quot;,26,536870928]],[logseq____&quot;^15logseq____&quot;,[190,logseq____&quot;^Vlogseq____&quot;,26,536870928]],[logseq____&quot;^15logseq____&quot;,[190,logseq____&quot;^Ulogseq____&quot;,26,536870928]],[logseq____&quot;^15logseq____&quot;,[190,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c98-cf19-449d-a45b-42f91699a81alogseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[191,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;just to record a bufferlogseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[191,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[191,logseq____&quot;^Flogseq____&quot;,185,536870928]],[logseq____&quot;^15logseq____&quot;,[191,logseq____&quot;^Xlogseq____&quot;,26,536870928]],[logseq____&quot;^15logseq____&quot;,[191,logseq____&quot;^Vlogseq____&quot;,185,536870928]],[logseq____&quot;^15logseq____&quot;,[191,logseq____&quot;^Ulogseq____&quot;,25,536870928]],[logseq____&quot;^15logseq____&quot;,[191,logseq____&quot;^Ulogseq____&quot;,26,536870928]],[logseq____&quot;^15logseq____&quot;,[191,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c98-d5cf-464e-a4eb-89f06fdae890logseq____&quot;,536870928]],[logseq____&quot;^15logseq____&quot;,[193,logseq____&quot;^Klogseq____&quot;,1703431320083,536870929]],[logseq____&quot;^15logseq____&quot;,[193,logseq____&quot;^@logseq____&quot;,false,536870929]],[logseq____&quot;^15logseq____&quot;,[193,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;fsmlogseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[193,logseq____&quot;^11logseq____&quot;,logseq____&quot;fsmlogseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[193,logseq____&quot;^Blogseq____&quot;,1703431320083,536870929]],[logseq____&quot;^15logseq____&quot;,[193,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c98-46e7-475a-aaea-88a41e780f5elogseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[194,logseq____&quot;^Klogseq____&quot;,1703431320083,536870929]],[logseq____&quot;^15logseq____&quot;,[194,logseq____&quot;^@logseq____&quot;,false,536870929]],[logseq____&quot;^15logseq____&quot;,[194,logseq____&quot;^Ylogseq____&quot;,logseq____&quot;vmlogseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[194,logseq____&quot;^11logseq____&quot;,logseq____&quot;vmlogseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[194,logseq____&quot;^Blogseq____&quot;,1703431320083,536870929]],[logseq____&quot;^15logseq____&quot;,[194,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c98-d5ec-4622-9f24-aa335b23a49clogseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[195,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;![wal-record-structure.png](../assets/wal-record-structure.png)logseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[195,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[195,logseq____&quot;^Flogseq____&quot;,202,536870929]],[logseq____&quot;^15logseq____&quot;,[195,logseq____&quot;^Xlogseq____&quot;,21,536870929]],[logseq____&quot;^15logseq____&quot;,[195,logseq____&quot;^Vlogseq____&quot;,202,536870929]],[logseq____&quot;^15logseq____&quot;,[195,logseq____&quot;^Ulogseq____&quot;,21,536870929]],[logseq____&quot;^15logseq____&quot;,[195,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c98-fb69-4452-9edb-05f4a6978506logseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[196,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;Logically, a `WAL` record must contains the three parts below:logseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[196,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[196,logseq____&quot;^Flogseq____&quot;,202,536870929]],[logseq____&quot;^15logseq____&quot;,[196,logseq____&quot;^Xlogseq____&quot;,21,536870929]],[logseq____&quot;^15logseq____&quot;,[196,logseq____&quot;^Vlogseq____&quot;,200,536870929]],[logseq____&quot;^15logseq____&quot;,[196,logseq____&quot;^Ulogseq____&quot;,21,536870929]],[logseq____&quot;^15logseq____&quot;,[196,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c98-e1f3-4cb4-9de0-1c50ba04231alogseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[197,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;For heap pages: The three below attributes can specify a concrete pagelogseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[197,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[197,logseq____&quot;^Flogseq____&quot;,199,536870929]],[logseq____&quot;^15logseq____&quot;,[197,logseq____&quot;^Xlogseq____&quot;,21,536870929]],[logseq____&quot;^15logseq____&quot;,[197,logseq____&quot;^Vlogseq____&quot;,199,536870929]],[logseq____&quot;^15logseq____&quot;,[197,logseq____&quot;^Ulogseq____&quot;,21,536870929]],[logseq____&quot;^15logseq____&quot;,[197,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c98-9b17-4220-88b1-cd04f5d038a2logseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[198,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;The way to modify the page\\nlogseq.order-list-type:: numberlogseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[198,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[198,logseq____&quot;^Flogseq____&quot;,207,536870929]],[logseq____&quot;^15logseq____&quot;,[198,logseq____&quot;^Xlogseq____&quot;,21,536870929]],[logseq____&quot;^15logseq____&quot;,[198,logseq____&quot;^Vlogseq____&quot;,196,536870929]],[logseq____&quot;^15logseq____&quot;,[198,logseq____&quot;^Ulogseq____&quot;,21,536870929]],[logseq____&quot;^15logseq____&quot;,[198,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;~:logseq.order-list-typelogseq____&quot;,logseq____&quot;numberlogseq____&quot;],536870929]],[logseq____&quot;^15logseq____&quot;,[198,logseq____&quot;^Jlogseq____&quot;,[logseq____&quot;^1;logseq____&quot;],536870929]],[logseq____&quot;^15logseq____&quot;,[198,logseq____&quot;^4logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^1;logseq____&quot;,logseq____&quot;numberlogseq____&quot;],536870929]],[logseq____&quot;^15logseq____&quot;,[198,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c98-2bf6-4c66-9454-4110d1f1c29flogseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[199,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;Unique page IDlogseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[199,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[199,logseq____&quot;^Flogseq____&quot;,196,536870929]],[logseq____&quot;^15logseq____&quot;,[199,logseq____&quot;^Xlogseq____&quot;,21,536870929]],[logseq____&quot;^15logseq____&quot;,[199,logseq____&quot;^Vlogseq____&quot;,200,536870929]],[logseq____&quot;^15logseq____&quot;,[199,logseq____&quot;^Ulogseq____&quot;,21,536870929]],[logseq____&quot;^15logseq____&quot;,[199,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c98-45af-49c5-bce9-050e19d6fb38logseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[200,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;# wal recordlogseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[200,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[200,logseq____&quot;^Flogseq____&quot;,21,536870929]],[logseq____&quot;^15logseq____&quot;,[200,logseq____&quot;^Xlogseq____&quot;,21,536870929]],[logseq____&quot;^15logseq____&quot;,[200,logseq____&quot;^Vlogseq____&quot;,21,536870929]],[logseq____&quot;^15logseq____&quot;,[200,logseq____&quot;^Ulogseq____&quot;,21,536870929]],[logseq____&quot;^15logseq____&quot;,[200,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^17logseq____&quot;,1],536870929]],[logseq____&quot;^15logseq____&quot;,[200,logseq____&quot;^Jlogseq____&quot;,[],536870929]],[logseq____&quot;^15logseq____&quot;,[200,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c98-885f-4841-b0c5-7b1b4aa83b8dlogseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[201,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~`relfilelocator`: which relationlogseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[201,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[201,logseq____&quot;^Flogseq____&quot;,197,536870929]],[logseq____&quot;^15logseq____&quot;,[201,logseq____&quot;^Xlogseq____&quot;,21,536870929]],[logseq____&quot;^15logseq____&quot;,[201,logseq____&quot;^Vlogseq____&quot;,199,536870929]],[logseq____&quot;^15logseq____&quot;,[201,logseq____&quot;^Ulogseq____&quot;,21,536870929]],[logseq____&quot;^15logseq____&quot;,[201,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c98-33f2-4549-83d1-396775a03157logseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[202,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;high level glance\\nid:: 65831e78-968c-418d-a401-f9a4afdd1587logseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[202,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[202,logseq____&quot;^Flogseq____&quot;,200,536870929]],[logseq____&quot;^15logseq____&quot;,[202,logseq____&quot;^Xlogseq____&quot;,21,536870929]],[logseq____&quot;^15logseq____&quot;,[202,logseq____&quot;^Vlogseq____&quot;,200,536870929]],[logseq____&quot;^15logseq____&quot;,[202,logseq____&quot;^Ulogseq____&quot;,21,536870929]],[logseq____&quot;^15logseq____&quot;,[202,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^18logseq____&quot;,logseq____&quot;65831e78-968c-418d-a401-f9a4afdd1587logseq____&quot;],536870929]],[logseq____&quot;^15logseq____&quot;,[202,logseq____&quot;^Jlogseq____&quot;,[logseq____&quot;^18logseq____&quot;],536870929]],[logseq____&quot;^15logseq____&quot;,[202,logseq____&quot;^4logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^18logseq____&quot;,logseq____&quot;65831e78-968c-418d-a401-f9a4afdd1587logseq____&quot;],536870929]],[logseq____&quot;^15logseq____&quot;,[202,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65831e78-968c-418d-a401-f9a4afdd1587logseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[203,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~`forknumber`: type -- that is #vm, #fsm or main datalogseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[203,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[203,logseq____&quot;^Flogseq____&quot;,206,536870929]],[logseq____&quot;^15logseq____&quot;,[203,logseq____&quot;^Xlogseq____&quot;,21,536870929]],[logseq____&quot;^15logseq____&quot;,[203,logseq____&quot;^Vlogseq____&quot;,199,536870929]],[logseq____&quot;^15logseq____&quot;,[203,logseq____&quot;^Ulogseq____&quot;,21,536870929]],[logseq____&quot;^15logseq____&quot;,[203,logseq____&quot;^Ulogseq____&quot;,193,536870929]],[logseq____&quot;^15logseq____&quot;,[203,logseq____&quot;^Ulogseq____&quot;,194,536870929]],[logseq____&quot;^15logseq____&quot;,[203,logseq____&quot;^Hlogseq____&quot;,193,536870929]],[logseq____&quot;^15logseq____&quot;,[203,logseq____&quot;^Hlogseq____&quot;,194,536870929]],[logseq____&quot;^15logseq____&quot;,[203,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c98-171c-4d99-9178-6a346d0511f3logseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[204,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;See [[wal-insert]] for how the unique id is recordlogseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[204,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[204,logseq____&quot;^Flogseq____&quot;,199,536870929]],[logseq____&quot;^15logseq____&quot;,[204,logseq____&quot;^Xlogseq____&quot;,21,536870929]],[logseq____&quot;^15logseq____&quot;,[204,logseq____&quot;^Vlogseq____&quot;,200,536870929]],[logseq____&quot;^15logseq____&quot;,[204,logseq____&quot;^Ulogseq____&quot;,21,536870929]],[logseq____&quot;^15logseq____&quot;,[204,logseq____&quot;^Ulogseq____&quot;,26,536870929]],[logseq____&quot;^15logseq____&quot;,[204,logseq____&quot;^Hlogseq____&quot;,26,536870929]],[logseq____&quot;^15logseq____&quot;,[204,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c98-ffa7-4b58-853b-78874c0688ablogseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[205,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;Which page to modify.(An unique ID, See [[block]]  and [[relfilelocator]] )\\nlogseq.order-list-type:: numberlogseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[205,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[205,logseq____&quot;^Flogseq____&quot;,196,536870929]],[logseq____&quot;^15logseq____&quot;,[205,logseq____&quot;^Xlogseq____&quot;,21,536870929]],[logseq____&quot;^15logseq____&quot;,[205,logseq____&quot;^Vlogseq____&quot;,196,536870929]],[logseq____&quot;^15logseq____&quot;,[205,logseq____&quot;^Ulogseq____&quot;,21,536870929]],[logseq____&quot;^15logseq____&quot;,[205,logseq____&quot;^Ulogseq____&quot;,51,536870929]],[logseq____&quot;^15logseq____&quot;,[205,logseq____&quot;^Ulogseq____&quot;,85,536870929]],[logseq____&quot;^15logseq____&quot;,[205,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^1;logseq____&quot;,logseq____&quot;numberlogseq____&quot;],536870929]],[logseq____&quot;^15logseq____&quot;,[205,logseq____&quot;^Jlogseq____&quot;,[logseq____&quot;^1;logseq____&quot;],536870929]],[logseq____&quot;^15logseq____&quot;,[205,logseq____&quot;^4logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^1;logseq____&quot;,logseq____&quot;numberlogseq____&quot;],536870929]],[logseq____&quot;^15logseq____&quot;,[205,logseq____&quot;^Hlogseq____&quot;,51,536870929]],[logseq____&quot;^15logseq____&quot;,[205,logseq____&quot;^Hlogseq____&quot;,85,536870929]],[logseq____&quot;^15logseq____&quot;,[205,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c98-0c10-4271-a54c-476bc547103flogseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[206,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;~`block number`: page offsetlogseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[206,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[206,logseq____&quot;^Flogseq____&quot;,201,536870929]],[logseq____&quot;^15logseq____&quot;,[206,logseq____&quot;^Xlogseq____&quot;,21,536870929]],[logseq____&quot;^15logseq____&quot;,[206,logseq____&quot;^Vlogseq____&quot;,199,536870929]],[logseq____&quot;^15logseq____&quot;,[206,logseq____&quot;^Ulogseq____&quot;,21,536870929]],[logseq____&quot;^15logseq____&quot;,[206,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c98-588b-4275-af17-08569cf98711logseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[207,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;The kind of `WAL`. Different kinds of `WAL` have different modification methods\\nlogseq.order-list-type:: numberlogseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[207,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[207,logseq____&quot;^Flogseq____&quot;,205,536870929]],[logseq____&quot;^15logseq____&quot;,[207,logseq____&quot;^Xlogseq____&quot;,21,536870929]],[logseq____&quot;^15logseq____&quot;,[207,logseq____&quot;^Vlogseq____&quot;,196,536870929]],[logseq____&quot;^15logseq____&quot;,[207,logseq____&quot;^Ulogseq____&quot;,21,536870929]],[logseq____&quot;^15logseq____&quot;,[207,logseq____&quot;^?logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^1;logseq____&quot;,logseq____&quot;numberlogseq____&quot;],536870929]],[logseq____&quot;^15logseq____&quot;,[207,logseq____&quot;^Jlogseq____&quot;,[logseq____&quot;^1;logseq____&quot;],536870929]],[logseq____&quot;^15logseq____&quot;,[207,logseq____&quot;^4logseq____&quot;,[logseq____&quot;^ logseq____&quot;,logseq____&quot;^1;logseq____&quot;,logseq____&quot;numberlogseq____&quot;],536870929]],[logseq____&quot;^15logseq____&quot;,[207,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c98-ec02-4250-8b5d-95196c75198elogseq____&quot;,536870929]],[logseq____&quot;^15logseq____&quot;,[209,logseq____&quot;^Qlogseq____&quot;,logseq____&quot;logseq____&quot;,536870930]],[logseq____&quot;^15logseq____&quot;,[209,logseq____&quot;^Ologseq____&quot;,logseq____&quot;^16logseq____&quot;,536870930]],[logseq____&quot;^15logseq____&quot;,[209,logseq____&quot;^Flogseq____&quot;,25,536870930]],[logseq____&quot;^15logseq____&quot;,[209,logseq____&quot;^Xlogseq____&quot;,25,536870930]],[logseq____&quot;^15logseq____&quot;,[209,logseq____&quot;^Vlogseq____&quot;,25,536870930]],[logseq____&quot;^15logseq____&quot;,[209,logseq____&quot;^Ulogseq____&quot;,25,536870930]],[logseq____&quot;^15logseq____&quot;,[209,logseq____&quot;^;logseq____&quot;,logseq____&quot;~u65884c98-4ffa-4a6e-b364-83f013ee52bblogseq____&quot;,536870930]]]]]]"</script>
 <script>window.logseq_state="{:ui/theme \"light\", :ui/radix-color :blue, :config {\"local\" {:feature/enable-whiteboards? false, :shortcuts {}, :default-templates {:journals \"\"}, :feature/enable-journals? false, :query/views {:pprint (fn [r] [:pre.code (pprint r)])}, :editor/preferred-pasting-file? false, :macros {}, :shortcut/doc-mode-enter-for-new-block? false, :favorites [\"Contents\" \"multixact\" \"wal-structure\"], :ui/show-empty-bullets? false, :file/name-format :triple-lowbar, :preferred-workflow :now, :publishing/all-pages-public? true, :ui/show-brackets? false, :ref/default-open-blocks-level 2, :feature/enable-block-timestamps? false, :start-of-week 6, :ref/linked-references-collapsed-threshold 50, :outliner/block-title-collapse-enabled? false, :commands [], :ui/show-full-blocks? false, :export/bullet-indentation :two-spaces, :meta/version 1, :hidden [], :default-queries {:journals [{:title \"🔨 NOW\", :query [:find (pull ?h [*]) :in $ ?start ?today :where [?h :block/marker ?marker] [(contains? #{\"NOW\" \"DOING\"} ?marker)] [?h :block/page ?p] [?p :block/journal? true] [?p :block/journal-day ?d] [(>= ?d ?start)] [(<= ?d ?today)]], :inputs [:14d :today], :result-transform (fn [result] (sort-by (fn [h] (get h :block/priority \"Z\")) result)), :group-by-page? false, :collapsed? false} {:title \"📅 NEXT\", :query [:find (pull ?h [*]) :in $ ?start ?next :where [?h :block/marker ?marker] [(contains? #{\"NOW\" \"LATER\" \"TODO\"} ?marker)] [?h :block/page ?p] [?p :block/journal? true] [?p :block/journal-day ?d] [(> ?d ?start)] [(< ?d ?next)]], :inputs [:today :7d-after], :group-by-page? false, :collapsed? false}]}, :ui/auto-expand-block-refs? false, :ui/enable-tooltip? true, :query/result-transforms {:sort-by-priority (fn [result] (sort-by (fn [h] (get h :block/priority \"Z\")) result))}, :property-pages/enabled? true, :block/content-max-length 10000, :ui/show-command-doc? true, :feature/enable-search-remove-accents? true, :default-home {:page \"Contents\"}}}}"</script>
 <script type="text/javascript">// Single Page Apps for GitHub Pages
      // https://github.com/rafgraph/spa-github-pages
      // Copyright (c) 2016 Rafael Pedicini, licensed under the MIT License
      // ----------------------------------------------------------------------
      // This script checks to see if a redirect is present in the query string
      // and converts it back into the correct url and adds it to the
      // browser's history using window.history.replaceState(...),
      // which won't cause the browser to attempt to load the new url.
      // When the single page app is loaded further down in this file,
      // the correct url will be waiting in the browser's history for
      // the single page app to route accordingly.
      (function(l) {
        if (l.search) {
          var q = {};
          l.search.slice(1).split('&').forEach(function(v) {
            var a = v.split('=');
            q[a[0]] = a.slice(1).join('=').replace(/~and~/g, '&');
          });
          if (q.p !== undefined) {
            window.history.replaceState(null, null,
              l.pathname.slice(0, -1) + (q.p || '') +
              (q.q ? ('?' + q.q) : '') +
              l.hash
            );
          }
        }
      }(window.location))</script>
 <script src="static/js/main.js"></script>
 <script src="static/js/interact.min.js"></script>
 <script src="static/js/highlight.min.js"></script>
 <script src="static/js/katex.min.js"></script>
 <script src="static/js/html2canvas.min.js"></script>
 <script src="static/js/code-editor.js"></script>
 <script src="static/js/custom.js"></script>
</body>
