<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
   <meta name="description" content="MCP学习
自己对MCP的理解
MCP server (一个简单的程序) 通过定义实现一系列函数，让 MCP client(例如 claude) 通过这些函数，获取到需要的信息。
MCP server:
# in /Users/yby/code/mcp_test/mcp-server-demo/server.py

# List content in my code directory
@mcp.tool()
def list_code_directory() -&gt; str:
    &#34;&#34;&#34;List content in the code directory&#34;&#34;&#34;
    directory = &#34;/Users/yby/code/&#34;
    contents = os.listdir(directory)
    return &#34;\\n&#34;.join(contents)
MCP client 配置。注意 uv​  路径是 full path">  

  <title>
    
      MCP学习
    
  </title>


  <link rel="shortcut icon" type="image/x-icon" href="/" />
  
  
  
  <link rel="stylesheet" href="/css/main.51652302d3a998bf7887aed5c2cf89141bbebdf45a2c8f87b0717a3cf4f51c4e53c694c328fb1de78c3a625a1c01f80745bf1f2f42c040647a245cbbb6c2d1d7.css" integrity="sha512-UWUjAtOpmL94h67Vws&#43;JFBu&#43;vfRaLI&#43;HsHF6PPT1HE5TxpTDKPsd54w6YlocAfgHRb8fL0LAQGR6JFy7tsLR1w==" />
  
</head>
<body a="auto">
        <main class="page-content" aria-label="Content">
            <div class="w">
<a href="/">..</a>


<article>
    <p class="post-meta">
        <time datetime="2025-04-08 19:57:51 &#43;0800 CST">
            2025-04-08
        </time>
    </p>

    <h1>MCP学习</h1>

    
        <aside >
            <nav id="TableOfContents"></nav>
        </aside>
    

    <h1 id="mcp学习">MCP学习</h1>
<h1 id="自己对mcp的理解">自己对MCP的理解</h1>
<p>MCP server (一个简单的程序) 通过定义实现一系列函数，让 MCP client(例如 claude) 通过这些函数，获取到需要的信息。</p>
<p>MCP server:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#0f0"># in /Users/yby/code/mcp_test/mcp-server-demo/server.py</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#0f0"># List content in my code directory</span>
</span></span><span style="display:flex;"><span>@mcp.tool()
</span></span><span style="display:flex;"><span><span style="color:#f00">def</span> <span style="color:#ff0">list_code_directory</span>() -&gt; str:
</span></span><span style="display:flex;"><span>    <span style="color:#87ceeb">&#34;&#34;&#34;List content in the code directory&#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span>    directory = <span style="color:#87ceeb">&#34;/Users/yby/code/&#34;</span>
</span></span><span style="display:flex;"><span>    contents = os.listdir(directory)
</span></span><span style="display:flex;"><span>    <span style="color:#f00">return</span> <span style="color:#87ceeb">&#34;</span><span style="color:#87ceeb">\\</span><span style="color:#87ceeb">n&#34;</span>.join(contents)
</span></span></code></pre></div><p>MCP client 配置。注意 <code>uv</code>​  路径是 full path</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#87ceeb">&#34;mcpServers&#34;</span>: {
</span></span><span style="display:flex;"><span>    <span style="color:#87ceeb">&#34;weather&#34;</span>: {
</span></span><span style="display:flex;"><span>      <span style="color:#87ceeb">&#34;command&#34;</span>: <span style="color:#87ceeb">&#34;/Users/yby/.local/bin/uv&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#87ceeb">&#34;args&#34;</span>: [
</span></span><span style="display:flex;"><span>        <span style="color:#87ceeb">&#34;--directory&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#87ceeb">&#34;/Users/yby/code/mcp_test/weather&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#87ceeb">&#34;run&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#87ceeb">&#34;weather.py&#34;</span>
</span></span><span style="display:flex;"><span>      ]
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    <span style="color:#87ceeb">&#34;Demo&#34;</span>: {
</span></span><span style="display:flex;"><span>      <span style="color:#87ceeb">&#34;command&#34;</span>: <span style="color:#87ceeb">&#34;/Users/yby/.local/bin/uv&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#87ceeb">&#34;args&#34;</span>: [
</span></span><span style="display:flex;"><span>        <span style="color:#87ceeb">&#34;run&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#87ceeb">&#34;--with&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#87ceeb">&#34;mcp[cli]&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#87ceeb">&#34;mcp&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#87ceeb">&#34;run&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#87ceeb">&#34;/Users/yby/code/mcp_test/mcp-server-demo/server.py&#34;</span>
</span></span><span style="display:flex;"><span>      ]
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h1 id="问题一-mcp-client例如-claude如何知道调用哪个函数">问题一: MCP client(例如 claude)如何知道调用哪个函数</h1>
<p>The MCP (Model Control Protocol) client, such as the Claude desktop application, discovers available functions through a mechanism called function registration and discovery. Here&rsquo;s how it works:</p>
<p>When a server implements MCP functions using the <code>@mcp.tool()</code>​ decorator, it creates a standardized description of each function, including:</p>
<ol>
<li>The function name</li>
<li>A description of what the function does</li>
<li>Parameter specifications (names, types, descriptions, required/optional status)</li>
<li>Return type information</li>
</ol>
<p>During the initial connection or session setup between the client and server, the server sends a capabilities manifest to the client. This manifest contains JSON Schema descriptions of all available functions, which follows the OpenAI function calling format. For example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  &#34;functions&#34;: [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      &#34;name&#34;: <span style="color:#87ceeb">&#34;get_weather&#34;</span>,
</span></span><span style="display:flex;"><span>      &#34;description&#34;: <span style="color:#87ceeb">&#34;Get the current weather for a location&#34;</span>,
</span></span><span style="display:flex;"><span>      &#34;parameters&#34;: {
</span></span><span style="display:flex;"><span>        &#34;type&#34;: <span style="color:#87ceeb">&#34;object&#34;</span>,
</span></span><span style="display:flex;"><span>        &#34;properties&#34;: {
</span></span><span style="display:flex;"><span>          &#34;location&#34;: {
</span></span><span style="display:flex;"><span>            &#34;type&#34;: <span style="color:#87ceeb">&#34;string&#34;</span>,
</span></span><span style="display:flex;"><span>            &#34;description&#34;: <span style="color:#87ceeb">&#34;City and state, e.g., &#39;San Francisco, CA&#39;&#34;</span>
</span></span><span style="display:flex;"><span>          }
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        &#34;required&#34;: [<span style="color:#87ceeb">&#34;location&#34;</span>]
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  ]
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>The client application (Claude desktop) parses this schema to:</p>
<ol>
<li>Know which functions exist and can be called</li>
<li>Understand what parameters are required for each function</li>
<li>Generate appropriate UI components or code to facilitate calling these functions</li>
<li>Validate input before sending function calls to the server</li>
</ol>
<p><strong>This architecture allows for dynamic discovery of capabilities - clients don&rsquo;t need to be hardcoded with knowledge of specific functions, and servers can add, modify, or remove functions without requiring client updates</strong>. The client simply adapts to whatever functions the server declares are available.</p>
<p>When you make a request that might benefit from using a function, the Claude model itself might suggest using one of these registered functions, and the client application facilitates this interaction by providing the appropriate interface.</p>

</article>

                
    
    
        <hr>
<p>written by mobilephone724</p>
    


            </div>
        </main>
    </body>
</html>
