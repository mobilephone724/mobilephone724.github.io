<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
   <meta name="description" content="跳表的实现
之前还没有写过跳表，补一下实现，
​​
FROM deepseek
跳表（Skip List）原理详解
跳表是一种基于有序链表的高效数据结构，通过引入多层索引实现快速查找，其平均时间复杂度为O(log n)，与平衡树相当，但实现更简单。以下是其核心原理：">  

  <title>
    
      跳表的实现
    
  </title>


  <link rel="shortcut icon" type="image/x-icon" href="/" />
  
  
  
  <link rel="stylesheet" href="/css/main.51652302d3a998bf7887aed5c2cf89141bbebdf45a2c8f87b0717a3cf4f51c4e53c694c328fb1de78c3a625a1c01f80745bf1f2f42c040647a245cbbb6c2d1d7.css" integrity="sha512-UWUjAtOpmL94h67Vws&#43;JFBu&#43;vfRaLI&#43;HsHF6PPT1HE5TxpTDKPsd54w6YlocAfgHRb8fL0LAQGR6JFy7tsLR1w==" />
  
</head>
<body a="auto">
        <main class="page-content" aria-label="Content">
            <div class="w">
<a href="/">..</a>


<article>
    <p class="post-meta">
        <time datetime="2025-03-03 22:46:11 &#43;0800 CST">
            2025-03-03
        </time>
    </p>

    <h1>跳表的实现</h1>

    
        <aside >
            <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#跳表skip-list原理详解">跳表（Skip List）原理详解</a></li>
      </ul>
    </li>
    <li><a href="#自己的实现">自己的实现</a></li>
    <li><a href="#deepseek的实现">deepseek的实现</a></li>
  </ul>
</nav>
        </aside>
    

    <h1 id="跳表的实现">跳表的实现</h1>
<p>之前还没有写过跳表，补一下实现，</p>
<p>​<img src="https://raw.githubusercontent.com/mobilephone724/hugoBlog/siyuan-pub/images/skip_table-20250304233140-hzl983v.png" alt="skip_table">​</p>
<p>FROM deepseek</p>
<h3 id="跳表skip-list原理详解">跳表（Skip List）原理详解</h3>
<p>跳表是一种基于有序链表的高效数据结构，通过引入多层索引实现快速查找，其平均时间复杂度为O(log n)，与平衡树相当，但实现更简单。以下是其核心原理：</p>
<h4 id="1-跳表结构"><strong>1. 跳表结构</strong></h4>
<ul>
<li><strong>多层链表</strong>：每个节点包含多个前向指针（层），层数由概率决定（通常为1/2的概率升级到更高层）。</li>
<li><strong>头节点（Header）</strong> ：作为起始点，不存储实际数据，最高层指向链表的首个元素。</li>
<li><strong>尾节点（Tail）</strong> ：所有层的指针指向NULL，表示链表结束。</li>
</ul>
<h4 id="2-关键操作原理"><strong>2. 关键操作原理</strong></h4>
<ul>
<li>
<p><strong>插入</strong>：</p>
<ol>
<li>随机生成新节点的层数（如抛硬币直到出现反面）。</li>
<li>从最高层开始查找插入位置，记录每层的前驱节点。</li>
<li>在各层的前驱和后继之间插入新节点，更新指针。</li>
</ol>
</li>
<li>
<p><strong>查找</strong>：</p>
<ol>
<li>从最高层开始，向右遍历直到当前节点的下一节点值大于目标值。</li>
<li>下移一层继续查找，重复直到最底层。</li>
<li>若找到相等节点则返回，否则不存在。</li>
</ol>
</li>
<li>
<p><strong>删除</strong>：</p>
<ol>
<li>类似查找过程，定位目标节点及其各层前驱。</li>
<li>更新各层前驱的指针，绕过目标节点。</li>
<li>释放目标节点内存。</li>
</ol>
</li>
</ul>
<h4 id="3-时间复杂度"><strong>3. 时间复杂度</strong></h4>
<ul>
<li><strong>平均情况</strong>：O(log n)（基于概率平衡的层数分布）。</li>
<li><strong>最坏情况</strong>：O(n)（所有节点仅1层，退化为普通链表）。</li>
</ul>
<p>‍</p>
<h2 id="自己的实现">自己的实现</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#e5e5e5">#include</span> <span style="color:#e5e5e5">&lt;bits/stdc++.h&gt;</span><span style="color:#e5e5e5">
</span></span></span><span style="display:flex;"><span><span style="color:#e5e5e5"></span>
</span></span><span style="display:flex;"><span><span style="color:#f00">using</span> <span style="color:#f00">namespace</span> std;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f00">class</span> skip_table
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#f00">struct</span> jump_node
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#ee82ee">int</span> key, value;
</span></span><span style="display:flex;"><span>        vector&lt;jump_node *&gt; next;
</span></span><span style="display:flex;"><span>        <span style="color:#f00">const</span> <span style="color:#ee82ee">int</span> _level;
</span></span><span style="display:flex;"><span>        jump_node(<span style="color:#ee82ee">int</span> k, <span style="color:#ee82ee">int</span> v, <span style="color:#ee82ee">int</span> size, <span style="color:#ee82ee">int</span> level) : _level(level)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            key = k;
</span></span><span style="display:flex;"><span>            value = v;
</span></span><span style="display:flex;"><span>            next = vector&lt;jump_node *&gt;(size, <span style="color:#f00">nullptr</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#ee82ee">int</span> <span style="color:#ff0">level</span>()
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#f00">return</span> _level;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f00">public</span>:
</span></span><span style="display:flex;"><span>    skip_table(<span style="color:#ee82ee">int</span> level) : _level(level)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        _head = <span style="color:#f00">new</span> jump_node(<span style="color:#f60">0</span>, <span style="color:#f60">0</span>, level, level);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ee82ee">bool</span> <span style="color:#ff0">insert</span>(<span style="color:#ee82ee">int</span> k, <span style="color:#ee82ee">int</span> v, <span style="color:#ee82ee">bool</span> replace = true)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        vector&lt;jump_node *&gt; prev_node(_level, <span style="color:#f00">nullptr</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#f00">auto</span> p = _head;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#f00">for</span> (<span style="color:#ee82ee">int</span> l = _level - <span style="color:#f60">1</span>; l &gt;= <span style="color:#f60">0</span>; --l)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#f00">while</span> (p-&gt;next[l] &amp;&amp; p-&gt;next[l]-&gt;key &lt; k)
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                p = p-&gt;next[l];
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            prev_node[l] = p;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#f00">if</span> (p-&gt;next[<span style="color:#f60">0</span>] &amp;&amp; p-&gt;next[<span style="color:#f60">0</span>]-&gt;key == k)
</span></span><span style="display:flex;"><span>        { <span style="color:#0f0">// if found
</span></span></span><span style="display:flex;"><span><span style="color:#0f0"></span>            <span style="color:#f00">if</span> (!replace)
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                <span style="color:#f00">return</span> false;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            p-&gt;next[<span style="color:#f60">0</span>]-&gt;value = v;
</span></span><span style="display:flex;"><span>            <span style="color:#f00">return</span> true;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#0f0">// not found, insert new one
</span></span></span><span style="display:flex;"><span><span style="color:#0f0"></span>        <span style="color:#ee82ee">int</span> new_node_level = random_level();
</span></span><span style="display:flex;"><span>        <span style="color:#f00">auto</span> new_node = <span style="color:#f00">new</span> jump_node(k, v, _level, new_node_level);
</span></span><span style="display:flex;"><span>        <span style="color:#f00">for</span> (<span style="color:#ee82ee">int</span> i = <span style="color:#f60">0</span>; i &lt; new_node_level; ++i)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            new_node-&gt;next[i] = prev_node[i]-&gt;next[i];
</span></span><span style="display:flex;"><span>            prev_node[i]-&gt;next[i] = new_node;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#f00">return</span> true;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ee82ee">bool</span> <span style="color:#ff0">remove</span>(<span style="color:#ee82ee">int</span> k)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        vector&lt;jump_node *&gt; prev_node(_level, <span style="color:#f00">nullptr</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#f00">auto</span> p = _head;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#f00">for</span> (<span style="color:#ee82ee">int</span> l = _level - <span style="color:#f60">1</span>; l &gt;= <span style="color:#f60">0</span>; --l)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#f00">while</span> (p-&gt;next[l] &amp;&amp; p-&gt;next[l]-&gt;key &lt; k)
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                p = p-&gt;next[l];
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            prev_node[l] = p;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#f00">if</span> (p-&gt;next[<span style="color:#f60">0</span>] &amp;&amp; p-&gt;next[<span style="color:#f60">0</span>]-&gt;key == k)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#f00">auto</span> pending_delete = p-&gt;next[<span style="color:#f60">0</span>];
</span></span><span style="display:flex;"><span>            <span style="color:#f00">for</span> (<span style="color:#ee82ee">int</span> i = <span style="color:#f60">0</span>; i &lt; _level; ++i)
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                prev_node[i]-&gt;next[i] = pending_delete-&gt;next[i];
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#f00">delete</span> pending_delete;
</span></span><span style="display:flex;"><span>            <span style="color:#f00">return</span> true;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#f00">return</span> false;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ee82ee">int</span> <span style="color:#ff0">get</span>(<span style="color:#ee82ee">int</span> k, <span style="color:#ee82ee">bool</span> &amp;found)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#f00">auto</span> p = _head;
</span></span><span style="display:flex;"><span>        <span style="color:#f00">for</span> (<span style="color:#ee82ee">int</span> l = _level - <span style="color:#f60">1</span>; l &gt;= <span style="color:#f60">0</span>; --l)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#f00">while</span> (p-&gt;next[l] &amp;&amp; p-&gt;next[l]-&gt;key &lt; k)
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                p = p-&gt;next[l];
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#f00">if</span> (p-&gt;next[<span style="color:#f60">0</span>] &amp;&amp; p-&gt;next[<span style="color:#f60">0</span>]-&gt;key == k)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            found = true;
</span></span><span style="display:flex;"><span>            <span style="color:#f00">return</span> p-&gt;next[<span style="color:#f60">0</span>]-&gt;value;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#f00">else</span>
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            found = false;
</span></span><span style="display:flex;"><span>            <span style="color:#f00">return</span> -<span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ee82ee">void</span> <span style="color:#ff0">print</span>()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#f00">for</span> (<span style="color:#ee82ee">int</span> i = _level - <span style="color:#f60">1</span>; i &gt;= <span style="color:#f60">0</span>; --i)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#f00">auto</span> p = _head-&gt;next[i];
</span></span><span style="display:flex;"><span>            cout &lt;&lt; <span style="color:#87ceeb">&#34;LEVEL: &#34;</span> &lt;&lt; i &lt;&lt; <span style="color:#87ceeb">&#34;</span><span style="color:#87ceeb">\t</span><span style="color:#87ceeb">&#34;</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#f00">while</span> (p != <span style="color:#f00">nullptr</span>)
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                cout &lt;&lt; p-&gt;key &lt;&lt; <span style="color:#87ceeb">&#34; : &#34;</span> &lt;&lt; p-&gt;value &lt;&lt; <span style="color:#87ceeb">&#34; ---&gt; &#34;</span>;
</span></span><span style="display:flex;"><span>                p = p-&gt;next[i];
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            cout &lt;&lt; endl;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f00">private</span>:
</span></span><span style="display:flex;"><span>    jump_node *_head;
</span></span><span style="display:flex;"><span>    <span style="color:#f00">const</span> <span style="color:#ee82ee">int</span> _level;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ee82ee">int</span> <span style="color:#ff0">random_level</span>()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#ee82ee">int</span> level = <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#f00">for</span> (<span style="color:#ee82ee">int</span> i = <span style="color:#f60">1</span>; i &lt; _level; ++i)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#f00">if</span> (random_bool())
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                level++;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#f00">return</span> level;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ee82ee">bool</span> <span style="color:#ff0">random_bool</span>()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#f00">static</span> std::random_device rd;  <span style="color:#0f0">// Seed for the random number generator
</span></span></span><span style="display:flex;"><span><span style="color:#0f0"></span>        <span style="color:#f00">static</span> std::mt19937 gen(rd()); <span style="color:#0f0">// Mersenne Twister engine
</span></span></span><span style="display:flex;"><span><span style="color:#0f0"></span>
</span></span><span style="display:flex;"><span>        <span style="color:#0f0">// Define a distribution for generating 0 or 1
</span></span></span><span style="display:flex;"><span><span style="color:#0f0"></span>        <span style="color:#f00">static</span> std::uniform_int_distribution&lt;<span style="color:#ee82ee">int</span>&gt; dist(<span style="color:#f60">0</span>, <span style="color:#f60">1</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#0f0">// Generate a random value (0 or 1)
</span></span></span><span style="display:flex;"><span><span style="color:#0f0"></span>        <span style="color:#f00">return</span> dist(gen) == <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ee82ee">int</span> <span style="color:#ff0">gen_random_val</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#f00">static</span> std::random_device rd;  <span style="color:#0f0">// Seed for the random number generator
</span></span></span><span style="display:flex;"><span><span style="color:#0f0"></span>    <span style="color:#f00">static</span> std::mt19937 gen(rd()); <span style="color:#0f0">// Mersenne Twister engine
</span></span></span><span style="display:flex;"><span><span style="color:#0f0"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#f00">static</span> <span style="color:#ee82ee">int</span> lower_bound = <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#f00">static</span> <span style="color:#ee82ee">int</span> upper_bound = <span style="color:#f60">10000</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#f00">static</span> std::uniform_int_distribution&lt;&gt; dist(lower_bound, upper_bound);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#0f0">// Generate a random number
</span></span></span><span style="display:flex;"><span><span style="color:#0f0"></span>    <span style="color:#f00">return</span> dist(gen);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ee82ee">int</span> <span style="color:#ff0">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#f00">auto</span> *st = <span style="color:#f00">new</span> skip_table(<span style="color:#f60">100</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#f00">auto</span> mp = map&lt;<span style="color:#ee82ee">int</span>, <span style="color:#ee82ee">int</span>&gt;();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#f00">auto</span> compare_jp_with_mp = [&amp;st, &amp;mp](<span style="color:#ee82ee">int</span> key)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#ee82ee">bool</span> error = false;
</span></span><span style="display:flex;"><span>        <span style="color:#ee82ee">bool</span> found_jp = false;
</span></span><span style="display:flex;"><span>        <span style="color:#ee82ee">int</span> val_jp = st-&gt;get(key, found_jp);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#f00">auto</span> iter_mp = mp.find(key);
</span></span><span style="display:flex;"><span>        <span style="color:#ee82ee">bool</span> found_mp = iter_mp != mp.end();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#f00">if</span> (found_jp != found_mp)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#f00">if</span> (found_mp)
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                cout &lt;&lt; <span style="color:#87ceeb">&#34;map found but st not found &#34;</span> &lt;&lt; endl;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#f00">else</span>
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                cout &lt;&lt; <span style="color:#87ceeb">&#34;st found but map not found &#34;</span> &lt;&lt; endl;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            cout &lt;&lt; key &lt;&lt; <span style="color:#87ceeb">&#34;:&#34;</span> &lt;&lt; endl;
</span></span><span style="display:flex;"><span>            error = true;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#f00">else</span> <span style="color:#f00">if</span> (found_jp)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#f00">if</span> (val_jp != iter_mp-&gt;second)
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                cout &lt;&lt; <span style="color:#87ceeb">&#34;both found but st = &#34;</span> &lt;&lt; val_jp &lt;&lt; <span style="color:#87ceeb">&#34; while mp = &#34;</span> &lt;&lt; iter_mp-&gt;second;
</span></span><span style="display:flex;"><span>                error = true;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#f00">if</span> (error)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            st-&gt;print();
</span></span><span style="display:flex;"><span>            exit(<span style="color:#f60">1</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#f00">return</span> true;
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#0f0">// {
</span></span></span><span style="display:flex;"><span><span style="color:#0f0"></span>    <span style="color:#0f0">//     auto start = std::chrono::high_resolution_clock::now();
</span></span></span><span style="display:flex;"><span><span style="color:#0f0"></span>    <span style="color:#0f0">//     for (int i = 0; i &lt;= 1000000; ++i)
</span></span></span><span style="display:flex;"><span><span style="color:#0f0"></span>    <span style="color:#0f0">//     {
</span></span></span><span style="display:flex;"><span><span style="color:#0f0"></span>    <span style="color:#0f0">//         int key = gen_random_val();
</span></span></span><span style="display:flex;"><span><span style="color:#0f0"></span>    <span style="color:#0f0">//         int val = gen_random_val();
</span></span></span><span style="display:flex;"><span><span style="color:#0f0"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#0f0">//         st-&gt;insert(key, val);
</span></span></span><span style="display:flex;"><span><span style="color:#0f0"></span>    <span style="color:#0f0">//         // st-&gt;print();
</span></span></span><span style="display:flex;"><span><span style="color:#0f0"></span>    <span style="color:#0f0">//     }
</span></span></span><span style="display:flex;"><span><span style="color:#0f0"></span>    <span style="color:#0f0">//     auto end = std::chrono::high_resolution_clock::now();
</span></span></span><span style="display:flex;"><span><span style="color:#0f0"></span>    <span style="color:#0f0">//     auto duration = std::chrono::duration_cast&lt;std::chrono::microseconds&gt;(end - start);
</span></span></span><span style="display:flex;"><span><span style="color:#0f0"></span>    <span style="color:#0f0">//     std::cout &lt;&lt; &#34;JP INSERT Time taken: &#34; &lt;&lt; duration.count() &lt;&lt; &#34; microseconds&#34; &lt;&lt; std::endl;
</span></span></span><span style="display:flex;"><span><span style="color:#0f0"></span>    <span style="color:#0f0">// }
</span></span></span><span style="display:flex;"><span><span style="color:#0f0"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#0f0">// {
</span></span></span><span style="display:flex;"><span><span style="color:#0f0"></span>    <span style="color:#0f0">//     auto start = std::chrono::high_resolution_clock::now();
</span></span></span><span style="display:flex;"><span><span style="color:#0f0"></span>    <span style="color:#0f0">//     for (int i = 0; i &lt;= 1000000; ++i)
</span></span></span><span style="display:flex;"><span><span style="color:#0f0"></span>    <span style="color:#0f0">//     {
</span></span></span><span style="display:flex;"><span><span style="color:#0f0"></span>    <span style="color:#0f0">//         int key = gen_random_val();
</span></span></span><span style="display:flex;"><span><span style="color:#0f0"></span>    <span style="color:#0f0">//         int val = gen_random_val();
</span></span></span><span style="display:flex;"><span><span style="color:#0f0"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#0f0">//         mp[key] = val;
</span></span></span><span style="display:flex;"><span><span style="color:#0f0"></span>    <span style="color:#0f0">//         // st-&gt;print();
</span></span></span><span style="display:flex;"><span><span style="color:#0f0"></span>    <span style="color:#0f0">//     }
</span></span></span><span style="display:flex;"><span><span style="color:#0f0"></span>    <span style="color:#0f0">//     auto end = std::chrono::high_resolution_clock::now();
</span></span></span><span style="display:flex;"><span><span style="color:#0f0"></span>    <span style="color:#0f0">//     auto duration = std::chrono::duration_cast&lt;std::chrono::microseconds&gt;(end - start);
</span></span></span><span style="display:flex;"><span><span style="color:#0f0"></span>    <span style="color:#0f0">//     std::cout &lt;&lt; &#34;MP INSERT Time taken: &#34; &lt;&lt; duration.count() &lt;&lt; &#34; microseconds&#34; &lt;&lt; std::endl;
</span></span></span><span style="display:flex;"><span><span style="color:#0f0"></span>    <span style="color:#0f0">// }
</span></span></span><span style="display:flex;"><span><span style="color:#0f0"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#f00">for</span> (<span style="color:#ee82ee">int</span> i = <span style="color:#f60">0</span>; i &lt;= <span style="color:#f60">10000</span>; ++i)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#ee82ee">int</span> key = gen_random_val();
</span></span><span style="display:flex;"><span>        <span style="color:#ee82ee">int</span> val = gen_random_val();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        mp[key] = val;
</span></span><span style="display:flex;"><span>        st-&gt;insert(key, val);
</span></span><span style="display:flex;"><span>        cout &lt;&lt; <span style="color:#87ceeb">&#34;insert &#34;</span> &lt;&lt; key &lt;&lt; <span style="color:#87ceeb">&#34;:&#34;</span> &lt;&lt; val &lt;&lt; endl;
</span></span><span style="display:flex;"><span>        <span style="color:#0f0">// st-&gt;print();
</span></span></span><span style="display:flex;"><span><span style="color:#0f0"></span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#f00">for</span> (<span style="color:#ee82ee">int</span> i = <span style="color:#f60">0</span>; i &lt;= <span style="color:#f60">5000</span>; ++i)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#ee82ee">int</span> key = gen_random_val();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        mp.erase(key);
</span></span><span style="display:flex;"><span>        st-&gt;remove(key);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#f00">for</span> (<span style="color:#ee82ee">int</span> i = <span style="color:#f60">0</span>; i &lt;= <span style="color:#f60">10000</span>; ++i)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#ee82ee">int</span> key = gen_random_val();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        compare_jp_with_mp(key);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#f00">return</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>‍</p>
<p>‍</p>
<h2 id="deepseek的实现">deepseek的实现</h2>
<p>未验证该代码。（deepseek 日常漏掉 &ldquo;&lt;&rdquo;)</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#e5e5e5">#include iostream&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#e5e5e5">#include vector&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#e5e5e5">#include cstdlib&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#e5e5e5">#include ctime&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#e5e5e5">#include climits&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#e5e5e5"></span>
</span></span><span style="display:flex;"><span><span style="color:#f00">template</span> <span style="color:#f00">typename</span> K, <span style="color:#f00">typename</span> V&gt;
</span></span><span style="display:flex;"><span><span style="color:#f00">class</span> SkipList {
</span></span><span style="display:flex;"><span><span style="color:#f00">private</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f00">struct</span> Node {
</span></span><span style="display:flex;"><span>        K key;
</span></span><span style="display:flex;"><span>        V value;
</span></span><span style="display:flex;"><span>        std::vector&lt;Node*&gt; forward; <span style="color:#0f0">// 各层的前向指针
</span></span></span><span style="display:flex;"><span><span style="color:#0f0"></span>
</span></span><span style="display:flex;"><span>        Node(K k, V v, <span style="color:#ee82ee">int</span> level) : key(k), value(v), forward(level, <span style="color:#f00">nullptr</span>) {}
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    Node* header;    <span style="color:#0f0">// 头节点（哨兵）
</span></span></span><span style="display:flex;"><span><span style="color:#0f0"></span>    <span style="color:#ee82ee">int</span> max_level;   <span style="color:#0f0">// 最大层数限制
</span></span></span><span style="display:flex;"><span><span style="color:#0f0"></span>    <span style="color:#ee82ee">int</span> current_level; <span style="color:#0f0">// 当前最大层数
</span></span></span><span style="display:flex;"><span><span style="color:#0f0"></span>    <span style="color:#ee82ee">float</span> probability; <span style="color:#0f0">// 层数增长概率
</span></span></span><span style="display:flex;"><span><span style="color:#0f0"></span>    <span style="color:#ee82ee">int</span> size;          <span style="color:#0f0">// 节点数量
</span></span></span><span style="display:flex;"><span><span style="color:#0f0"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#0f0">// 生成随机层数
</span></span></span><span style="display:flex;"><span><span style="color:#0f0"></span>    <span style="color:#ee82ee">int</span> <span style="color:#ff0">random_level</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#ee82ee">int</span> level = <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#f00">while</span> ((<span style="color:#f00">static_cast</span>&lt;<span style="color:#ee82ee">float</span>&gt;(rand()) / RAND_MAX)  probability &amp;&amp; level  max_level) {
</span></span><span style="display:flex;"><span>            level++;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#f00">return</span> level;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f00">public</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#0f0">// 构造函数
</span></span></span><span style="display:flex;"><span><span style="color:#0f0"></span>    SkipList(<span style="color:#ee82ee">int</span> max_level = <span style="color:#f60">16</span>, <span style="color:#ee82ee">float</span> prob = <span style="color:#f60">0.5</span>) 
</span></span><span style="display:flex;"><span>        : max_level(max_level), probability(prob), current_level(<span style="color:#f60">1</span>), size(<span style="color:#f60">0</span>) {
</span></span><span style="display:flex;"><span>        header = <span style="color:#f00">new</span> Node(K(), V(), max_level);
</span></span><span style="display:flex;"><span>        srand(time(<span style="color:#f60">0</span>));
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#0f0">// 析构函数
</span></span></span><span style="display:flex;"><span><span style="color:#0f0"></span>    ~SkipList() {
</span></span><span style="display:flex;"><span>        Node* current = header-&gt;forward[<span style="color:#f60">0</span>];
</span></span><span style="display:flex;"><span>        <span style="color:#f00">while</span> (current != <span style="color:#f00">nullptr</span>) {
</span></span><span style="display:flex;"><span>            Node* next = current-&gt;forward[<span style="color:#f60">0</span>];
</span></span><span style="display:flex;"><span>            <span style="color:#f00">delete</span> current;
</span></span><span style="display:flex;"><span>            current = next;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#f00">delete</span> header;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#0f0">// 插入键值对
</span></span></span><span style="display:flex;"><span><span style="color:#0f0"></span>    <span style="color:#ee82ee">void</span> <span style="color:#ff0">insert</span>(<span style="color:#f00">const</span> K&amp; key, <span style="color:#f00">const</span> V&amp; value) {
</span></span><span style="display:flex;"><span>        std::vector&lt;Node*&gt; update(max_level, <span style="color:#f00">nullptr</span>);
</span></span><span style="display:flex;"><span>        Node* current = header;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#0f0">// 查找各层的前驱节点
</span></span></span><span style="display:flex;"><span><span style="color:#0f0"></span>        <span style="color:#f00">for</span> (<span style="color:#ee82ee">int</span> i = current_level - <span style="color:#f60">1</span>; i &gt;= <span style="color:#f60">0</span>; i--) {
</span></span><span style="display:flex;"><span>            <span style="color:#f00">while</span> (current-&gt;forward[i] != <span style="color:#f00">nullptr</span> &amp;&amp; current-&gt;forward[i]-&gt;key  key) {
</span></span><span style="display:flex;"><span>                current = current-&gt;forward[i];
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            update[i] = current;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#0f0">// 检查是否已存在相同键
</span></span></span><span style="display:flex;"><span><span style="color:#0f0"></span>        current = current-&gt;forward[<span style="color:#f60">0</span>];
</span></span><span style="display:flex;"><span>        <span style="color:#f00">if</span> (current != <span style="color:#f00">nullptr</span> &amp;&amp; current-&gt;key == key) {
</span></span><span style="display:flex;"><span>            current-&gt;value = value; <span style="color:#0f0">// 更新值
</span></span></span><span style="display:flex;"><span><span style="color:#0f0"></span>            <span style="color:#f00">return</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#0f0">// 生成新节点的层数
</span></span></span><span style="display:flex;"><span><span style="color:#0f0"></span>        <span style="color:#ee82ee">int</span> new_level = random_level();
</span></span><span style="display:flex;"><span>        <span style="color:#f00">if</span> (new_level &gt; current_level) {
</span></span><span style="display:flex;"><span>            <span style="color:#f00">for</span> (<span style="color:#ee82ee">int</span> i = current_level; i  new_level; i++) {
</span></span><span style="display:flex;"><span>                update[i] = header;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            current_level = new_level;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#0f0">// 创建新节点并更新指针
</span></span></span><span style="display:flex;"><span><span style="color:#0f0"></span>        Node* new_node = <span style="color:#f00">new</span> Node(key, value, new_level);
</span></span><span style="display:flex;"><span>        <span style="color:#f00">for</span> (<span style="color:#ee82ee">int</span> i = <span style="color:#f60">0</span>; i  new_level; i++) {
</span></span><span style="display:flex;"><span>            new_node-&gt;forward[i] = update[i]-&gt;forward[i];
</span></span><span style="display:flex;"><span>            update[i]-&gt;forward[i] = new_node;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        size++;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#0f0">// 查找键对应的值
</span></span></span><span style="display:flex;"><span><span style="color:#0f0"></span>    <span style="color:#ee82ee">bool</span> <span style="color:#ff0">search</span>(<span style="color:#f00">const</span> K&amp; key, V&amp; value) {
</span></span><span style="display:flex;"><span>        Node* current = header;
</span></span><span style="display:flex;"><span>        <span style="color:#f00">for</span> (<span style="color:#ee82ee">int</span> i = current_level - <span style="color:#f60">1</span>; i &gt;= <span style="color:#f60">0</span>; i--) {
</span></span><span style="display:flex;"><span>            <span style="color:#f00">while</span> (current-&gt;forward[i] != <span style="color:#f00">nullptr</span> &amp;&amp; current-&gt;forward[i]-&gt;key  key) {
</span></span><span style="display:flex;"><span>                current = current-&gt;forward[i];
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        current = current-&gt;forward[<span style="color:#f60">0</span>];
</span></span><span style="display:flex;"><span>        <span style="color:#f00">if</span> (current != <span style="color:#f00">nullptr</span> &amp;&amp; current-&gt;key == key) {
</span></span><span style="display:flex;"><span>            value = current-&gt;value;
</span></span><span style="display:flex;"><span>            <span style="color:#f00">return</span> true;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#f00">return</span> false;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#0f0">// 删除键
</span></span></span><span style="display:flex;"><span><span style="color:#0f0"></span>    <span style="color:#ee82ee">bool</span> <span style="color:#ff0">remove</span>(<span style="color:#f00">const</span> K&amp; key) {
</span></span><span style="display:flex;"><span>        std::vector&lt;Node*&gt; update(max_level, <span style="color:#f00">nullptr</span>);
</span></span><span style="display:flex;"><span>        Node* current = header;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#0f0">// 查找各层的前驱节点
</span></span></span><span style="display:flex;"><span><span style="color:#0f0"></span>        <span style="color:#f00">for</span> (<span style="color:#ee82ee">int</span> i = current_level - <span style="color:#f60">1</span>; i &gt;= <span style="color:#f60">0</span>; i--) {
</span></span><span style="display:flex;"><span>            <span style="color:#f00">while</span> (current-&gt;forward[i] != <span style="color:#f00">nullptr</span> &amp;&amp; current-&gt;forward[i]-&gt;key  key) {
</span></span><span style="display:flex;"><span>                current = current-&gt;forward[i];
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            update[i] = current;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        current = current-&gt;forward[<span style="color:#f60">0</span>];
</span></span><span style="display:flex;"><span>        <span style="color:#f00">if</span> (current == <span style="color:#f00">nullptr</span> || current-&gt;key != key) {
</span></span><span style="display:flex;"><span>            <span style="color:#f00">return</span> false; <span style="color:#0f0">// 未找到
</span></span></span><span style="display:flex;"><span><span style="color:#0f0"></span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#0f0">// 更新各层指针
</span></span></span><span style="display:flex;"><span><span style="color:#0f0"></span>        <span style="color:#f00">for</span> (<span style="color:#ee82ee">int</span> i = <span style="color:#f60">0</span>; i  current_level; i++) {
</span></span><span style="display:flex;"><span>            <span style="color:#f00">if</span> (update[i]-&gt;forward[i] != current) <span style="color:#f00">break</span>;
</span></span><span style="display:flex;"><span>            update[i]-&gt;forward[i] = current-&gt;forward[i];
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#f00">delete</span> current;
</span></span><span style="display:flex;"><span>        size--;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#0f0">// 降低当前层数（若高层为空）
</span></span></span><span style="display:flex;"><span><span style="color:#0f0"></span>        <span style="color:#f00">while</span> (current_level &gt; <span style="color:#f60">1</span> &amp;&amp; header-&gt;forward[current_level - <span style="color:#f60">1</span>] == <span style="color:#f00">nullptr</span>) {
</span></span><span style="display:flex;"><span>            current_level--;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#f00">return</span> true;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#0f0">// 打印跳表结构（调试用）
</span></span></span><span style="display:flex;"><span><span style="color:#0f0"></span>    <span style="color:#ee82ee">void</span> <span style="color:#ff0">display</span>() {
</span></span><span style="display:flex;"><span>        std::cout &lt; <span style="color:#87ceeb">&#34;Skip List (Level=&#34;</span> &lt; current_level &lt; <span style="color:#87ceeb">&#34;, Size=&#34;</span> &lt; size &lt; <span style="color:#87ceeb">&#34;):&#34;</span> &lt; std::endl;
</span></span><span style="display:flex;"><span>        <span style="color:#f00">for</span> (<span style="color:#ee82ee">int</span> i = current_level - <span style="color:#f60">1</span>; i &gt;= <span style="color:#f60">0</span>; i--) {
</span></span><span style="display:flex;"><span>            Node* node = header-&gt;forward[i];
</span></span><span style="display:flex;"><span>            std::cout &lt; <span style="color:#87ceeb">&#34;Level &#34;</span> &lt; i &lt; <span style="color:#87ceeb">&#34;: &#34;</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#f00">while</span> (node != <span style="color:#f00">nullptr</span>) {
</span></span><span style="display:flex;"><span>                std::cout &lt; node-&gt;key &lt; <span style="color:#87ceeb">&#34;(&#34;</span> &lt; node-&gt;value &lt; <span style="color:#87ceeb">&#34;) &#34;</span>;
</span></span><span style="display:flex;"><span>                node = node-&gt;forward[i];
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            std::cout &lt; std::endl;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#0f0">// 示例测试
</span></span></span><span style="display:flex;"><span><span style="color:#0f0"></span><span style="color:#ee82ee">int</span> <span style="color:#ff0">main</span>() {
</span></span><span style="display:flex;"><span>    SkipList&lt;<span style="color:#ee82ee">int</span>, std::string&gt; skiplist;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#0f0">// 插入数据
</span></span></span><span style="display:flex;"><span><span style="color:#0f0"></span>    skiplist.insert(<span style="color:#f60">3</span>, <span style="color:#87ceeb">&#34;Alice&#34;</span>);
</span></span><span style="display:flex;"><span>    skiplist.insert(<span style="color:#f60">6</span>, <span style="color:#87ceeb">&#34;Bob&#34;</span>);
</span></span><span style="display:flex;"><span>    skiplist.insert(<span style="color:#f60">7</span>, <span style="color:#87ceeb">&#34;Charlie&#34;</span>);
</span></span><span style="display:flex;"><span>    skiplist.insert(<span style="color:#f60">9</span>, <span style="color:#87ceeb">&#34;Dave&#34;</span>);
</span></span><span style="display:flex;"><span>    skiplist.insert(<span style="color:#f60">12</span>, <span style="color:#87ceeb">&#34;Eve&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#0f0">// 查找测试
</span></span></span><span style="display:flex;"><span><span style="color:#0f0"></span>    std::string value;
</span></span><span style="display:flex;"><span>    <span style="color:#f00">if</span> (skiplist.search(<span style="color:#f60">6</span>, value)) {
</span></span><span style="display:flex;"><span>        std::cout &lt; <span style="color:#87ceeb">&#34;Key 6 found: &#34;</span> &lt; value &lt; std::endl; <span style="color:#0f0">// 输出 Bob
</span></span></span><span style="display:flex;"><span><span style="color:#0f0"></span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#0f0">// 删除测试
</span></span></span><span style="display:flex;"><span><span style="color:#0f0"></span>    <span style="color:#f00">if</span> (skiplist.remove(<span style="color:#f60">7</span>)) {
</span></span><span style="display:flex;"><span>        std::cout &lt; <span style="color:#87ceeb">&#34;Key 7 removed.&#34;</span> &lt; std::endl;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#0f0">// 显示跳表结构
</span></span></span><span style="display:flex;"><span><span style="color:#0f0"></span>    skiplist.display();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#f00">return</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div>
</article>

                
    
    
        <hr>
<p>written by mobilephone724</p>
    


            </div>
        </main>
    </body>
</html>
